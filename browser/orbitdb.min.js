/*! For license information please see orbitdb.min.js.LICENSE.txt */
var OrbitDB;(()=>{var __webpack_modules__={4537:t=>{"use strict";t.exports=function(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,s){r[n]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(t){o&&(o=!1,s(t))}}))}},7419:(t,e)=>{"use strict";var r=e;r.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var n=new Array(64),i=new Array(123),o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(t,e,r){for(var i,o=null,s=[],a=0,u=0;e<r;){var c=t[e++];switch(u){case 0:s[a++]=n[c>>2],i=(3&c)<<4,u=1;break;case 1:s[a++]=n[i|c>>4],i=(15&c)<<2,u=2;break;case 2:s[a++]=n[i|c>>6],s[a++]=n[63&c],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=n[i],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(t,e,r){for(var n,o=r,a=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&a>1)break;if(void 0===(c=i[c]))throw Error(s);switch(a){case 0:n=c,a=1;break;case 1:e[r++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:e[r++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:e[r++]=(3&n)<<6|c,a=0}}if(1===a)throw Error(s);return r-o},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},945:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(t,n,i){e[0]=t,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function a(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i,t.readFloatLE=n?s:a,t.readFloatBE=n?a:s}():function(){function e(t,e,r,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(e)/Math.LN2);t((i<<31|o+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,r,n)}}function s(t,e,r){var n=t(e,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,r),t.writeFloatBE=e.bind(null,n),t.readFloatLE=s.bind(null,i),t.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(t,n,i){e[0]=t,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function a(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i,t.readDoubleLE=n?s:a,t.readDoubleBE=n?a:s}():function(){function e(t,e,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)t(0,i,o+e),t(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))t(0,i,o+e),t(2146959360,i,o+r);else if(n>17976931348623157e292)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<22250738585072014e-324)t((a=n/5e-324)>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(a=n*Math.pow(2,-u))>>>0,i,o+e),t((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function s(t,e,r,n,i){var o=t(n,i+e),s=t(n,i+r),a=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,r,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=s.bind(null,i,0,4),t.readDoubleBE=s.bind(null,o,4,0)}(),t}function r(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function n(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function o(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:t=>{"use strict";t.exports=function(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return t(r);s+r>n&&(o=t(n),s=0);var a=e.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:(t,e)=>{"use strict";var r=e;r.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},r.read=function(t,e,r){if(r-e<1)return"";for(var n,i=null,o=[],s=0;e<r;)(n=t[e++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(t,e,r){for(var n,i,o=r,s=0;s<t.length;++s)(n=t.charCodeAt(s))<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=t.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-o}},9464:(t,e,r)=>{"use strict";const{fromCallback:n}=r(6957),i=r(4473),{getCallback:o,getOptions:s}=r(2520),a=Symbol("promise"),u=Symbol("status"),c=Symbol("operations"),h=Symbol("finishClose"),f=Symbol("closeCallbacks");e.AbstractChainedBatch=class{constructor(t){if("object"!=typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received "+(null===t?"null":typeof t));this[c]=[],this[f]=[],this[u]="open",this[h]=this[h].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[c].length}put(t,e,r){if("open"!==this[u])throw new i("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(t)||this.db._checkValue(e);if(n)throw n;const o=r&&null!=r.sublevel?r.sublevel:this.db,s=r,a=o.keyEncoding(r&&r.keyEncoding),h=o.valueEncoding(r&&r.valueEncoding),f=a.format;r={...r,keyEncoding:f,valueEncoding:h.format},o!==this.db&&(r.sublevel=null);const l=o.prefixKey(a.encode(t),f),p=h.encode(e);return this._put(l,p,r),this[c].push({...s,type:"put",key:t,value:e}),this}_put(t,e,r){}del(t,e){if("open"!==this[u])throw new i("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const r=this.db._checkKey(t);if(r)throw r;const n=e&&null!=e.sublevel?e.sublevel:this.db,o=e,s=n.keyEncoding(e&&e.keyEncoding),a=s.format;return e={...e,keyEncoding:a},n!==this.db&&(e.sublevel=null),this._del(n.prefixKey(s.encode(t),a),e),this[c].push({...o,type:"del",key:t}),this}_del(t,e){}clear(){if("open"!==this[u])throw new i("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[c]=[],this}_clear(){}write(t,e){return e=o(t,e),e=n(e,a),t=s(t),"open"!==this[u]?this.nextTick(e,new i("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(e):(this[u]="writing",this._write(t,(t=>{this[u]="closing",this[f].push((()=>e(t))),t||this.db.emit("batch",this[c]),this._close(this[h])}))),e[a]}_write(t,e){}close(t){return t=n(t,a),"closing"===this[u]?this[f].push(t):"closed"===this[u]?this.nextTick(t):(this[f].push(t),"writing"!==this[u]&&(this[u]="closing",this._close(this[h]))),t[a]}_close(t){this.nextTick(t)}[h](){this[u]="closed",this.db.detachResource(this);const t=this[f];this[f]=[];for(const e of t)e()}}},3961:(t,e,r)=>{"use strict";const{fromCallback:n}=r(6957),i=r(4473),{getOptions:o,getCallback:s}=r(2520),a=Symbol("promise"),u=Symbol("callback"),c=Symbol("working"),h=Symbol("handleOne"),f=Symbol("handleMany"),l=Symbol("autoClose"),p=Symbol("finishWork"),d=Symbol("returnMany"),y=Symbol("closing"),g=Symbol("handleClose"),b=Symbol("closed"),m=Symbol("closeCallbacks"),w=Symbol("keyEncoding"),v=Symbol("valueEncoding"),E=Symbol("abortOnClose"),B=Symbol("legacy"),S=Symbol("keys"),_=Symbol("values"),A=Symbol("limit"),I=Symbol("count"),k=Object.freeze({}),T=()=>{};let C=!1;class x{constructor(t,e,r){if("object"!=typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received "+(null===t?"null":typeof t));if("object"!=typeof e||null===e)throw new TypeError("The second argument must be an options object");this[b]=!1,this[m]=[],this[c]=!1,this[y]=!1,this[l]=!1,this[u]=null,this[h]=this[h].bind(this),this[f]=this[f].bind(this),this[g]=this[g].bind(this),this[w]=e[w],this[v]=e[v],this[B]=r,this[A]=Number.isInteger(e.limit)&&e.limit>=0?e.limit:1/0,this[I]=0,this[E]=!!e.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[I]}get limit(){return this[A]}next(t){let e;if(void 0===t)e=new Promise(((e,r)=>{t=(t,n,i)=>{t?r(t):this[B]?void 0===n&&void 0===i?e():e([n,i]):e(n)}}));else if("function"!=typeof t)throw new TypeError("Callback must be a function");return this[y]?this.nextTick(t,new i("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[c]?this.nextTick(t,new i("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[c]=!0,this[u]=t,this[I]>=this[A]?this.nextTick(this[h],null):this._next(this[h])),e}_next(t){this.nextTick(t)}nextv(t,e,r){return r=s(e,r),r=n(r,a),e=o(e,k),Number.isInteger(t)?(this[y]?this.nextTick(r,new i("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[c]?this.nextTick(r,new i("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[A]<1/0&&(t=Math.min(t,this[A]-this[I])),this[c]=!0,this[u]=r,t<=0?this.nextTick(this[f],null,[]):this._nextv(t,e,this[f])),r[a]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[a])}_nextv(t,e,r){const n=[],i=(e,o,s)=>e?r(e):(this[B]?void 0===o&&void 0===s:void 0===o)?r(null,n):(n.push(this[B]?[o,s]:o),void(n.length===t?r(null,n):this._next(i)));this._next(i)}all(t,e){return e=s(t,e),e=n(e,a),t=o(t,k),this[y]?this.nextTick(e,new i("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[c]?this.nextTick(e,new i("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[c]=!0,this[u]=e,this[l]=!0,this[I]>=this[A]?this.nextTick(this[f],null,[]):this._all(t,this[f])),e[a]}_all(t,e){let r=this[I];const n=[],i=()=>{const t=this[A]<1/0?Math.min(1e3,this[A]-r):1e3;t<=0?this.nextTick(e,null,n):this._nextv(t,k,o)},o=(t,o)=>{t?e(t):0===o.length?e(null,n):(n.push.apply(n,o),r+=o.length,i())};i()}[p](){const t=this[u];return this[E]&&null===t?T:(this[c]=!1,this[u]=null,this[y]&&this._close(this[g]),t)}[d](t,e,r){this[l]?this.close(t.bind(null,e,r)):t(e,r)}seek(t,e){if(e=o(e,k),this[y]);else{if(this[c])throw new i("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const r=this.db.keyEncoding(e.keyEncoding||this[w]),n=r.format;e.keyEncoding!==n&&(e={...e,keyEncoding:n});const i=this.db.prefixKey(r.encode(t),n);this._seek(i,e)}}}_seek(t,e){throw new i("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=n(t,a),this[b]?this.nextTick(t):this[y]?this[m].push(t):(this[y]=!0,this[m].push(t),this[c]?this[E]&&this[p]()(new i("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[g])),t[a]}_close(t){this.nextTick(t)}[g](){this[b]=!0,this.db.detachResource(this);const t=this[m];this[m]=[];for(const e of t)e()}async*[Symbol.asyncIterator](){try{let t;for(;void 0!==(t=await this.next());)yield t}finally{this[b]||await this.close()}}}class L extends x{constructor(t,e){super(t,e,!0),this[S]=!1!==e.keys,this[_]=!1!==e.values}[h](t,e,r){const n=this[p]();if(t)return n(t);try{e=this[S]&&void 0!==e?this[w].decode(e):void 0,r=this[_]&&void 0!==r?this[v].decode(r):void 0}catch(t){return n(new R("entry",t))}void 0===e&&void 0===r||this[I]++,n(null,e,r)}[f](t,e){const r=this[p]();if(t)return this[d](r,t);try{for(const t of e){const e=t[0],r=t[1];t[0]=this[S]&&void 0!==e?this[w].decode(e):void 0,t[1]=this[_]&&void 0!==r?this[v].decode(r):void 0}}catch(t){return this[d](r,new R("entries",t))}this[I]+=e.length,this[d](r,null,e)}end(t){return C||"undefined"==typeof console||(C=!0,console.warn(new i("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}}class R extends i{constructor(t,e){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:e})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(L.prototype,t.split(" ")[0],{get(){throw new i(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new i(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});L.keyEncoding=w,L.valueEncoding=v,e.AbstractIterator=L,e.AbstractKeyIterator=class extends x{constructor(t,e){super(t,e,!1)}[h](t,e){const r=this[p]();if(t)return r(t);try{e=void 0!==e?this[w].decode(e):void 0}catch(t){return r(new R("key",t))}void 0!==e&&this[I]++,r(null,e)}[f](t,e){const r=this[p]();if(t)return this[d](r,t);try{for(let t=0;t<e.length;t++){const r=e[t];e[t]=void 0!==r?this[w].decode(r):void 0}}catch(t){return this[d](r,new R("keys",t))}this[I]+=e.length,this[d](r,null,e)}},e.AbstractValueIterator=class extends x{constructor(t,e){super(t,e,!1)}[h](t,e){const r=this[p]();if(t)return r(t);try{e=void 0!==e?this[v].decode(e):void 0}catch(t){return r(new R("value",t))}void 0!==e&&this[I]++,r(null,e)}[f](t,e){const r=this[p]();if(t)return this[d](r,t);try{for(let t=0;t<e.length;t++){const r=e[t];e[t]=void 0!==r?this[v].decode(r):void 0}}catch(t){return this[d](r,new R("values",t))}this[I]+=e.length,this[d](r,null,e)}}},9071:(t,e,r)=>{"use strict";const{supports:n}=r(1675),{Transcoder:i}=r(8499),{EventEmitter:o}=r(7187),{fromCallback:s}=r(6957),a=r(4473),{AbstractIterator:u}=r(3961),{DefaultKeyIterator:c,DefaultValueIterator:h}=r(5429),{DeferredIterator:f,DeferredKeyIterator:l,DeferredValueIterator:p}=r(593),{DefaultChainedBatch:d}=r(4765),{getCallback:y,getOptions:g}=r(2520),b=r(56),m=Symbol("promise"),w=Symbol("landed"),v=Symbol("resources"),E=Symbol("closeResources"),B=Symbol("operations"),S=Symbol("undefer"),_=Symbol("deferOpen"),A=Symbol("options"),I=Symbol("status"),k=Symbol("defaultOptions"),T=Symbol("transcoder"),C=Symbol("keyEncoding"),x=Symbol("valueEncoding"),L=()=>{};class R extends o{constructor(t,e){if(super(),"object"!=typeof t||null===t)throw new TypeError("The first argument 'manifest' must be an object");e=g(e);const{keyEncoding:r,valueEncoding:o,passive:s,...a}=e;this[v]=new Set,this[B]=[],this[_]=!0,this[A]=a,this[I]="opening",this.supports=n(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==t.snapshots,permanence:!1!==t.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[T]=new i(U(this)),this[C]=this[T].encoding(r||"utf8"),this[x]=this[T].encoding(o||"utf8");for(const t of this[T].encodings())this.supports.encodings[t.commonName]||(this.supports.encodings[t.commonName]=!0);this[k]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[C].commonName,valueEncoding:this[x].commonName}),key:Object.freeze({keyEncoding:this[C].commonName})},this.nextTick((()=>{this[_]&&this.open({passive:!1},L)}))}get status(){return this[I]}keyEncoding(t){return this[T].encoding(null!=t?t:this[C])}valueEncoding(t){return this[T].encoding(null!=t?t:this[x])}open(t,e){e=y(t,e),e=s(e,m),(t={...this[A],...g(t)}).createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists;const r=t=>{"closing"===this[I]||"opening"===this[I]?this.once(w,t?()=>r(t):r):"open"!==this[I]?e(new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:t})):e()};return t.passive?"opening"===this[I]?this.once(w,r):this.nextTick(r):"closed"===this[I]||this[_]?(this[_]=!1,this[I]="opening",this.emit("opening"),this._open(t,(t=>{if(t)return this[I]="closed",this[E]((()=>{this.emit(w),r(t)})),void this[S]();this[I]="open",this[S](),this.emit(w),"open"===this[I]&&this.emit("open"),"open"===this[I]&&this.emit("ready"),r()}))):"open"===this[I]?this.nextTick(r):this.once(w,(()=>this.open(t,e))),e[m]}_open(t,e){this.nextTick(e)}close(t){t=s(t,m);const e=r=>{"opening"===this[I]||"closing"===this[I]?this.once(w,r?e(r):e):"closed"!==this[I]?t(new a("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):t()};if("open"===this[I]){this[I]="closing",this.emit("closing");const t=t=>{this[I]="open",this[S](),this.emit(w),e(t)};this[E]((()=>{this._close((r=>{if(r)return t(r);this[I]="closed",this[S](),this.emit(w),"closed"===this[I]&&this.emit("closed"),e()}))}))}else"closed"===this[I]?this.nextTick(e):this.once(w,(()=>this.close(t)));return t[m]}[E](t){if(0===this[v].size)return this.nextTick(t);let e=this[v].size,r=!0;const n=()=>{0==--e&&(r?this.nextTick(t):t())};for(const t of this[v])t.close(n);r=!1,this[v].clear()}_close(t){this.nextTick(t)}get(t,e,r){if(r=y(e,r),r=s(r,m),e=g(e,this[k].entry),"opening"===this[I])return this.defer((()=>this.get(t,e,r))),r[m];if(O(this,r))return r[m];const n=this._checkKey(t);if(n)return this.nextTick(r,n),r[m];const i=this.keyEncoding(e.keyEncoding),o=this.valueEncoding(e.valueEncoding),u=i.format,c=o.format;return e.keyEncoding===u&&e.valueEncoding===c||(e=Object.assign({},e,{keyEncoding:u,valueEncoding:c})),this._get(this.prefixKey(i.encode(t),u),e,((t,e)=>{if(t)return("LEVEL_NOT_FOUND"===t.code||t.notFound||/NotFound/i.test(t))&&(t.code||(t.code="LEVEL_NOT_FOUND"),t.notFound||(t.notFound=!0),t.status||(t.status=404)),r(t);try{e=o.decode(e)}catch(t){return r(new a("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:t}))}r(null,e)})),r[m]}_get(t,e,r){this.nextTick(r,new Error("NotFound"))}getMany(t,e,r){if(r=y(e,r),r=s(r,m),e=g(e,this[k].entry),"opening"===this[I])return this.defer((()=>this.getMany(t,e,r))),r[m];if(O(this,r))return r[m];if(!Array.isArray(t))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[m];if(0===t.length)return this.nextTick(r,null,[]),r[m];const n=this.keyEncoding(e.keyEncoding),i=this.valueEncoding(e.valueEncoding),o=n.format,u=i.format;e.keyEncoding===o&&e.valueEncoding===u||(e=Object.assign({},e,{keyEncoding:o,valueEncoding:u}));const c=new Array(t.length);for(let e=0;e<t.length;e++){const i=t[e],s=this._checkKey(i);if(s)return this.nextTick(r,s),r[m];c[e]=this.prefixKey(n.encode(i),o)}return this._getMany(c,e,((t,e)=>{if(t)return r(t);try{for(let t=0;t<e.length;t++)void 0!==e[t]&&(e[t]=i.decode(e[t]))}catch(t){return r(new a(`Could not decode one or more of ${e.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:t}))}r(null,e)})),r[m]}_getMany(t,e,r){this.nextTick(r,null,new Array(t.length).fill(void 0))}put(t,e,r,n){if(n=y(r,n),n=s(n,m),r=g(r,this[k].entry),"opening"===this[I])return this.defer((()=>this.put(t,e,r,n))),n[m];if(O(this,n))return n[m];const i=this._checkKey(t)||this._checkValue(e);if(i)return this.nextTick(n,i),n[m];const o=this.keyEncoding(r.keyEncoding),a=this.valueEncoding(r.valueEncoding),u=o.format,c=a.format;r.keyEncoding===u&&r.valueEncoding===c||(r=Object.assign({},r,{keyEncoding:u,valueEncoding:c}));const h=this.prefixKey(o.encode(t),u),f=a.encode(e);return this._put(h,f,r,(r=>{if(r)return n(r);this.emit("put",t,e),n()})),n[m]}_put(t,e,r,n){this.nextTick(n)}del(t,e,r){if(r=y(e,r),r=s(r,m),e=g(e,this[k].key),"opening"===this[I])return this.defer((()=>this.del(t,e,r))),r[m];if(O(this,r))return r[m];const n=this._checkKey(t);if(n)return this.nextTick(r,n),r[m];const i=this.keyEncoding(e.keyEncoding),o=i.format;return e.keyEncoding!==o&&(e=Object.assign({},e,{keyEncoding:o})),this._del(this.prefixKey(i.encode(t),o),e,(e=>{if(e)return r(e);this.emit("del",t),r()})),r[m]}_del(t,e,r){this.nextTick(r)}batch(t,e,r){if(!arguments.length){if("opening"===this[I])return new d(this);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(r="function"==typeof t?t:y(e,r),r=s(r,m),e=g(e,this[k].empty),"opening"===this[I])return this.defer((()=>this.batch(t,e,r))),r[m];if(O(this,r))return r[m];if(!Array.isArray(t))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[m];if(0===t.length)return this.nextTick(r),r[m];const n=new Array(t.length),{keyEncoding:i,valueEncoding:o,...u}=e;for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this.nextTick(r,new TypeError("A batch operation must be an object")),r[m];const s=Object.assign({},t[e]);if("put"!==s.type&&"del"!==s.type)return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[m];const a=this._checkKey(s.key);if(a)return this.nextTick(r,a),r[m];const u=null!=s.sublevel?s.sublevel:this,c=u.keyEncoding(s.keyEncoding||i),h=c.format;if(s.key=u.prefixKey(c.encode(s.key),h),s.keyEncoding=h,"put"===s.type){const t=this._checkValue(s.value);if(t)return this.nextTick(r,t),r[m];const e=u.valueEncoding(s.valueEncoding||o);s.value=e.encode(s.value),s.valueEncoding=e.format}u!==this&&(s.sublevel=null),n[e]=s}return this._batch(n,u,(e=>{if(e)return r(e);this.emit("batch",t),r()})),r[m]}_batch(t,e,r){this.nextTick(r)}sublevel(t,e){return this._sublevel(t,N.defaults(e))}_sublevel(t,e){return new N(this,t,e)}prefixKey(t,e){return t}clear(t,e){if(e=y(t,e),e=s(e,m),t=g(t,this[k].empty),"opening"===this[I])return this.defer((()=>this.clear(t,e))),e[m];if(O(this,e))return e[m];const r=t,n=this.keyEncoding(t.keyEncoding);return(t=b(t,n)).keyEncoding=n.format,0===t.limit?this.nextTick(e):this._clear(t,(t=>{if(t)return e(t);this.emit("clear",r),e()})),e[m]}_clear(t,e){this.nextTick(e)}iterator(t){const e=this.keyEncoding(t&&t.keyEncoding),r=this.valueEncoding(t&&t.valueEncoding);if((t=b(t,e)).keys=!1!==t.keys,t.values=!1!==t.values,t[u.keyEncoding]=e,t[u.valueEncoding]=r,t.keyEncoding=e.format,t.valueEncoding=r.format,"opening"===this[I])return new f(this,t);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new u(this,t)}keys(t){const e=this.keyEncoding(t&&t.keyEncoding),r=this.valueEncoding(t&&t.valueEncoding);if((t=b(t,e))[u.keyEncoding]=e,t[u.valueEncoding]=r,t.keyEncoding=e.format,t.valueEncoding=r.format,"opening"===this[I])return new l(this,t);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new c(this,t)}values(t){const e=this.keyEncoding(t&&t.keyEncoding),r=this.valueEncoding(t&&t.valueEncoding);if((t=b(t,e))[u.keyEncoding]=e,t[u.valueEncoding]=r,t.keyEncoding=e.format,t.valueEncoding=r.format,"opening"===this[I])return new p(this,t);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new h(this,t)}defer(t){if("function"!=typeof t)throw new TypeError("The first argument must be a function");this[B].push(t)}[S](){if(0===this[B].length)return;const t=this[B];this[B]=[];for(const e of t)e()}attachResource(t){if("object"!=typeof t||null===t||"function"!=typeof t.close)throw new TypeError("The first argument must be a resource object");this[v].add(t)}detachResource(t){this[v].delete(t)}_chainedBatch(){return new d(this)}_checkKey(t){if(null==t)return new a("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(null==t)return new a("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}R.prototype.nextTick=r(6909);const{AbstractSublevel:N}=r(9650)({AbstractLevel:R});e.AbstractLevel=R,e.AbstractSublevel=N;const O=function(t,e){return"open"!==t[I]&&(t.nextTick(e,new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},U=function(t){return Object.keys(t.supports.encodings).filter((e=>!!t.supports.encodings[e]))}},875:(t,e,r)=>{"use strict";e.AbstractLevel=r(9071).AbstractLevel,e.AbstractSublevel=r(9071).AbstractSublevel,e.AbstractIterator=r(3961).AbstractIterator,e.AbstractKeyIterator=r(3961).AbstractKeyIterator,e.AbstractValueIterator=r(3961).AbstractValueIterator,e.AbstractChainedBatch=r(9464).AbstractChainedBatch},2970:(t,e,r)=>{"use strict";const{AbstractIterator:n,AbstractKeyIterator:i,AbstractValueIterator:o}=r(3961),s=Symbol("unfix"),a=Symbol("iterator"),u=Symbol("handleOne"),c=Symbol("handleMany"),h=Symbol("callback");class f extends n{constructor(t,e,r,n){super(t,e),this[a]=r,this[s]=n,this[u]=this[u].bind(this),this[c]=this[c].bind(this),this[h]=null}[u](t,e,r){const n=this[h];if(t)return n(t);void 0!==e&&(e=this[s](e)),n(t,e,r)}[c](t,e){const r=this[h];if(t)return r(t);for(const t of e){const e=t[0];void 0!==e&&(t[0]=this[s](e))}r(t,e)}}class l extends i{constructor(t,e,r,n){super(t,e),this[a]=r,this[s]=n,this[u]=this[u].bind(this),this[c]=this[c].bind(this),this[h]=null}[u](t,e){const r=this[h];if(t)return r(t);void 0!==e&&(e=this[s](e)),r(t,e)}[c](t,e){const r=this[h];if(t)return r(t);for(let t=0;t<e.length;t++){const r=e[t];void 0!==r&&(e[t]=this[s](r))}r(t,e)}}class p extends o{constructor(t,e,r){super(t,e),this[a]=r}}for(const t of[f,l])t.prototype._next=function(t){this[h]=t,this[a].next(this[u])},t.prototype._nextv=function(t,e,r){this[h]=r,this[a].nextv(t,e,this[c])},t.prototype._all=function(t,e){this[h]=e,this[a].all(t,this[c])};for(const t of[p])t.prototype._next=function(t){this[a].next(t)},t.prototype._nextv=function(t,e,r){this[a].nextv(t,e,r)},t.prototype._all=function(t,e){this[a].all(t,e)};for(const t of[f,l,p])t.prototype._seek=function(t,e){this[a].seek(t,e)},t.prototype._close=function(t){this[a].close(t)};e.AbstractSublevelIterator=f,e.AbstractSublevelKeyIterator=l,e.AbstractSublevelValueIterator=p},9650:(t,e,r)=>{"use strict";const n=r(4473),{Buffer:i}=r(8764)||{},{AbstractSublevelIterator:o,AbstractSublevelKeyIterator:s,AbstractSublevelValueIterator:a}=r(2970),u=Symbol("prefix"),c=Symbol("upperBound"),h=Symbol("prefixRange"),f=Symbol("parent"),l=Symbol("unfix"),p=new TextEncoder,d={separator:"!"};t.exports=function({AbstractLevel:t}){class e extends t{static defaults(t){if("string"==typeof t)throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(t&&t.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==t?d:t.separator?t:{...t,separator:"!"}}constructor(t,r,i){const{separator:o,manifest:s,...a}=e.defaults(i);r=w(r,o);const h=o.charCodeAt(0)+1,d=t[f]||t;if(!p.encode(r).every((t=>t>h&&t<127)))throw new n(`Prefix must use bytes > ${h} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(y(d,s),a);const g=(t.prefix||"")+o+r+o,v=g.slice(0,-1)+String.fromCharCode(h);this[f]=d,this[u]=new b(g),this[c]=new b(v),this[l]=new m,this.nextTick=d.nextTick}prefixKey(t,e){if("utf8"===e)return this[u].utf8+t;if(0===t.byteLength)return this[u][e];if("view"===e){const e=this[u].view,r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r}{const e=this[u].buffer;return i.concat([e,t],e.byteLength+t.byteLength)}}[h](t,e){void 0!==t.gte?t.gte=this.prefixKey(t.gte,e):void 0!==t.gt?t.gt=this.prefixKey(t.gt,e):t.gte=this[u][e],void 0!==t.lte?t.lte=this.prefixKey(t.lte,e):void 0!==t.lt?t.lt=this.prefixKey(t.lt,e):t.lte=this[c][e]}get prefix(){return this[u].utf8}get db(){return this[f]}_open(t,e){this[f].open({passive:!0},e)}_put(t,e,r,n){this[f].put(t,e,r,n)}_get(t,e,r){this[f].get(t,e,r)}_getMany(t,e,r){this[f].getMany(t,e,r)}_del(t,e,r){this[f].del(t,e,r)}_batch(t,e,r){this[f].batch(t,e,r)}_clear(t,e){this[h](t,t.keyEncoding),this[f].clear(t,e)}_iterator(t){this[h](t,t.keyEncoding);const e=this[f].iterator(t),r=this[l].get(this[u].utf8.length,t.keyEncoding);return new o(this,t,e,r)}_keys(t){this[h](t,t.keyEncoding);const e=this[f].keys(t),r=this[l].get(this[u].utf8.length,t.keyEncoding);return new s(this,t,e,r)}_values(t){this[h](t,t.keyEncoding);const e=this[f].values(t);return new a(this,t,e)}}return{AbstractSublevel:e}};const y=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:g(t,"utf8"),buffer:g(t,"buffer"),view:g(t,"view")}}},g=function(t,e){return!!t.supports.encodings[e]&&t.keyEncoding(e).name===e};class b{constructor(t){this.utf8=t,this.view=p.encode(t),this.buffer=i?i.from(this.view.buffer,0,this.view.byteLength):{}}}class m{constructor(){this.cache=new Map}get(t,e){let r=this.cache.get(e);return void 0===r&&(r="view"===e?function(t,e){return e.subarray(t)}.bind(null,t):function(t,e){return e.slice(t)}.bind(null,t),this.cache.set(e,r)),r}}const w=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}},2520:(t,e)=>{"use strict";e.getCallback=function(t,e){return"function"==typeof t?t:e},e.getOptions=function(t,e){return"object"==typeof t&&null!==t?t:void 0!==e?e:{}}},4765:(t,e,r)=>{"use strict";const{AbstractChainedBatch:n}=r(9464),i=r(4473),o=Symbol("encoded");e.DefaultChainedBatch=class extends n{constructor(t){super(t),this[o]=[]}_put(t,e,r){this[o].push({...r,type:"put",key:t,value:e})}_del(t,e){this[o].push({...e,type:"del",key:t})}_clear(){this[o]=[]}_write(t,e){"opening"===this.db.status?this.db.defer((()=>this._write(t,e))):"open"===this.db.status?0===this[o].length?this.nextTick(e):this.db._batch(this[o],t,e):this.nextTick(e,new i("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}},5429:(t,e,r)=>{"use strict";const{AbstractKeyIterator:n,AbstractValueIterator:i}=r(3961),o=Symbol("iterator"),s=Symbol("callback"),a=Symbol("handleOne"),u=Symbol("handleMany");class c extends n{constructor(t,e){super(t,e),this[o]=t.iterator({...e,keys:!0,values:!1}),this[a]=this[a].bind(this),this[u]=this[u].bind(this)}}class h extends i{constructor(t,e){super(t,e),this[o]=t.iterator({...e,keys:!1,values:!0}),this[a]=this[a].bind(this),this[u]=this[u].bind(this)}}for(const t of[c,h]){const e=t===c,r=e?t=>t[0]:t=>t[1];t.prototype._next=function(t){this[s]=t,this[o].next(this[a])},t.prototype[a]=function(t,r,n){const i=this[s];t?i(t):i(null,e?r:n)},t.prototype._nextv=function(t,e,r){this[s]=r,this[o].nextv(t,e,this[u])},t.prototype._all=function(t,e){this[s]=e,this[o].all(t,this[u])},t.prototype[u]=function(t,e){const n=this[s];t?n(t):n(null,e.map(r))},t.prototype._seek=function(t,e){this[o].seek(t,e)},t.prototype._close=function(t){this[o].close(t)}}e.DefaultKeyIterator=c,e.DefaultValueIterator=h},593:(t,e,r)=>{"use strict";const{AbstractIterator:n,AbstractKeyIterator:i,AbstractValueIterator:o}=r(3961),s=r(4473),a=Symbol("nut"),u=Symbol("undefer"),c=Symbol("factory");class h extends n{constructor(t,e){super(t,e),this[a]=null,this[c]=()=>t.iterator(e),this.db.defer((()=>this[u]()))}}class f extends i{constructor(t,e){super(t,e),this[a]=null,this[c]=()=>t.keys(e),this.db.defer((()=>this[u]()))}}class l extends o{constructor(t,e){super(t,e),this[a]=null,this[c]=()=>t.values(e),this.db.defer((()=>this[u]()))}}for(const t of[h,f,l])t.prototype[u]=function(){"open"===this.db.status&&(this[a]=this[c]())},t.prototype._next=function(t){null!==this[a]?this[a].next(t):"opening"===this.db.status?this.db.defer((()=>this._next(t))):this.nextTick(t,new s("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(t,e,r){null!==this[a]?this[a].nextv(t,e,r):"opening"===this.db.status?this.db.defer((()=>this._nextv(t,e,r))):this.nextTick(r,new s("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(t,e){null!==this[a]?this[a].all(e):"opening"===this.db.status?this.db.defer((()=>this._all(t,e))):this.nextTick(e,new s("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(t,e){null!==this[a]?this[a]._seek(t,e):"opening"===this.db.status&&this.db.defer((()=>this._seek(t,e)))},t.prototype._close=function(t){null!==this[a]?this[a].close(t):"opening"===this.db.status?this.db.defer((()=>this._close(t))):this.nextTick(t)};e.DeferredIterator=h,e.DeferredKeyIterator=f,e.DeferredValueIterator=l},6909:(t,e,r)=>{"use strict";const n=r(4375);t.exports=function(t,...e){0===e.length?n(t):n((()=>t(...e)))}},56:(t,e,r)=>{"use strict";const n=r(4473),i=Object.prototype.hasOwnProperty,o=new Set(["lt","lte","gt","gte"]);t.exports=function(t,e){const r={};for(const s in t)if(i.call(t,s)&&"keyEncoding"!==s&&"valueEncoding"!==s){if("start"===s||"end"===s)throw new n(`The legacy range option '${s}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===s)throw new n("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});o.has(s)?r[s]=e.encode(t[s]):r[s]=t[s]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}},9742:(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=u(t),s=o[0],a=o[1],c=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),h=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=255&e;return 2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,c[h++]=255&e),1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,c[h++]=e>>8&255,c[h++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(t,a,a+s>u?u:a+s));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1708:(t,e,r)=>{"use strict";const{AbstractLevel:n}=r(875),i=r(4473),o=r(9967),{fromCallback:s}=r(6957),{Iterator:a}=r(8212),u=r(9687),c=r(9968),h=r(1217),f="level-js-",l=Symbol("idb"),p=Symbol("namePrefix"),d=Symbol("location"),y=Symbol("version"),g=Symbol("store"),b=Symbol("onComplete"),m=Symbol("promise");class w extends n{constructor(t,e,r){if("function"==typeof e||"function"==typeof r)throw new i("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:n,version:o,...s}=e||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),"string"!=typeof t)throw new Error("constructor requires a location string argument");this[d]=t,this[p]=null==n?f:n,this[y]=parseInt(o||1,10),this[l]=null}get location(){return this[d]}get namePrefix(){return this[p]}get version(){return this[y]}get db(){return this[l]}get type(){return"browser-level"}_open(t,e){const r=indexedDB.open(this[p]+this[d],this[y]);r.onerror=function(){e(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[l]=r.result,e()},r.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(this[d])||e.createObjectStore(this[d])}}[g](t){return this[l].transaction([this[d]],t).objectStore(this[d])}[b](t,e){const r=t.transaction;r.onabort=function(){e(r.error||new Error("aborted by user"))},r.oncomplete=function(){e(null,t.result)}}_get(t,e,r){const n=this[g]("readonly");let o;try{o=n.get(t)}catch(t){return this.nextTick(r,t)}this[b](o,(function(t,e){return t?r(t):void 0===e?r(new i("Entry not found",{code:"LEVEL_NOT_FOUND"})):void r(null,u(e))}))}_getMany(t,e,r){const n=this[g]("readonly"),i=t.map((t=>e=>{let r;try{r=n.get(t)}catch(t){return e(t)}r.onsuccess=()=>{const t=r.result;e(null,void 0===t?t:u(t))},r.onerror=t=>{t.stopPropagation(),e(r.error)}}));o(i,16,r)}_del(t,e,r){const n=this[g]("readwrite");let i;try{i=n.delete(t)}catch(t){return this.nextTick(r,t)}this[b](i,r)}_put(t,e,r,n){const i=this[g]("readwrite");let o;try{o=i.put(e,t)}catch(t){return this.nextTick(n,t)}this[b](o,n)}_iterator(t){return new a(this,this[d],t)}_batch(t,e,r){const n=this[g]("readwrite"),i=n.transaction;let o,s=0;i.onabort=function(){r(o||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function e(){const r=t[s++],a=r.key;let u;try{u="del"===r.type?n.delete(a):n.put(r.value,a)}catch(t){return o=t,void i.abort()}s<t.length?u.onsuccess=e:"function"==typeof i.commit&&i.commit()}()}_clear(t,e){let r,n;try{r=h(t)}catch(t){return this.nextTick(e)}if(t.limit>=0)return c(this,this[d],r,t,e);try{const t=this[g]("readwrite");n=r?t.delete(r):t.clear()}catch(t){return this.nextTick(e,t)}this[b](n,e)}_close(t){this[l].close(),this.nextTick(t)}}w.destroy=function(t,e,r){"function"==typeof e&&(r=e,e=f),r=s(r,m);const n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(t){r(t)},r[m]},e.BrowserLevel=w},8212:(t,e,r)=>{"use strict";const{AbstractIterator:n}=r(875),i=r(1217),o=r(9687),s=Symbol("cache"),a=Symbol("finished"),u=Symbol("options"),c=Symbol("currentOptions"),h=Symbol("position"),f=Symbol("location"),l=Symbol("first"),p={};function d(t){"function"==typeof t.commit&&t.commit()}e.Iterator=class extends n{constructor(t,e,r){super(t,r),this[s]=[],this[a]=0===this.limit,this[u]=r,this[c]={...r},this[h]=void 0,this[f]=e,this[l]=!0}_nextv(t,e,r){if(this[l]=!1,this[a])return this.nextTick(r,null,[]);if(this[s].length>0)return t=Math.min(t,this[s].length),this.nextTick(r,null,this[s].splice(0,t));let n;void 0!==this[h]&&(this[u].reverse?(this[c].lt=this[h],this[c].lte=void 0):(this[c].gt=this[h],this[c].gte=void 0));try{n=i(this[c])}catch(t){return this[a]=!0,this.nextTick(r,null,[])}const p=this.db.db.transaction([this[f]],"readonly"),y=p.objectStore(this[f]),g=[];if(this[u].reverse)y[!this[u].values&&y.openKeyCursor?"openKeyCursor":"openCursor"](n,"prev").onsuccess=e=>{const r=e.target.result;if(r){const{key:e,value:n}=r;this[h]=e,g.push([this[u].keys&&void 0!==e?o(e):void 0,this[u].values&&void 0!==n?o(n):void 0]),g.length<t?r.continue():d(p)}else this[a]=!0};else{let e,r;const i=()=>{if(void 0===e||void 0===r)return;const n=Math.max(e.length,r.length);0===n||t===1/0?this[a]=!0:this[h]=e[n-1],g.length=n;for(let t=0;t<n;t++){const n=e[t],i=r[t];g[t]=[this[u].keys&&void 0!==n?o(n):void 0,this[u].values&&void 0!==i?o(i):void 0]}d(p)};this[u].keys||t<1/0?y.getAllKeys(n,t<1/0?t:void 0).onsuccess=t=>{e=t.target.result,i()}:(e=[],this.nextTick(i)),this[u].values?y.getAll(n,t<1/0?t:void 0).onsuccess=t=>{r=t.target.result,i()}:(r=[],this.nextTick(i))}p.onabort=()=>{r(p.error||new Error("aborted by user")),r=null},p.oncomplete=()=>{r(null,g),r=null}}_next(t){if(this[s].length>0){const[e,r]=this[s].shift();this.nextTick(t,null,e,r)}else if(this[a])this.nextTick(t);else{let e=Math.min(100,this.limit-this.count);this[l]&&(this[l]=!1,e=1),this._nextv(e,p,((e,r)=>{if(e)return t(e);this[s]=r,this._next(t)}))}}_all(t,e){this[l]=!1;const r=this[s].splice(0,this[s].length),n=this.limit-this.count-r.length;if(n<=0)return this.nextTick(e,null,r);this._nextv(n,p,((t,n)=>{if(t)return e(t);r.length>0&&(n=r.concat(n)),e(null,n)}))}_seek(t,e){let r;this[l]=!0,this[s]=[],this[a]=!1,this[h]=void 0,this[c]={...this[u]};try{r=i(this[u])}catch(t){return void(this[a]=!0)}null===r||r.includes(t)?this[u].reverse?this[c].lte=t:this[c].gte=t:this[a]=!0}}},9968:t=>{"use strict";t.exports=function(t,e,r,n,i){if(0===n.limit)return t.nextTick(i);const o=t.db.transaction([e],"readwrite"),s=o.objectStore(e);let a=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};const u=s.openKeyCursor?"openKeyCursor":"openCursor",c=n.reverse?"prev":"next";s[u](r,c).onsuccess=function(t){const e=t.target.result;e&&(s.delete(e.key).onsuccess=function(){(n.limit<=0||++a<n.limit)&&e.continue()})}}},9687:t=>{"use strict";const e=new TextEncoder;t.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):e.encode(t)}},1217:t=>{"use strict";t.exports=function(t){const e=void 0!==t.gte?t.gte:void 0!==t.gt?t.gt:void 0,r=void 0!==t.lte?t.lte:void 0!==t.lt?t.lt:void 0,n=void 0===t.gte,i=void 0===t.lte;return void 0!==e&&void 0!==r?IDBKeyRange.bound(e,r,n,i):void 0!==e?IDBKeyRange.lowerBound(e,n):void 0!==r?IDBKeyRange.upperBound(r,i):null}},8764:(t,e,r)=>{"use strict";const n=r(9742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return c(t,e,r)}function c(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=a(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const i=function(t){if(u.isBuffer(t)){const e=0|d(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?a(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return h(t),a(t<0?0:0|d(t))}function l(t){const e=t.length<0?0:0|d(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(i)return n?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return C(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:w(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(Z(n))return s;t[r+s]=n}return s}function E(t,e,r,n){return W($(e,t.length-r),t,r,n)}function B(t,e,r,n){return W(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return W(G(e),t,r,n)}function _(t,e,r,n){return W(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=k));return r}(n)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return c(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return h(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},u.allocUnsafe=function(t){return f(t)},u.allocUnsafeSlow=function(t){return f(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(Y(e,Uint8Array))i+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)b(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const a=Math.min(o,s),c=this.slice(n,i),h=t.slice(e,r);for(let t=0;t<a;++t)if(c[t]!==h[t]){o=c[t],s=h[t];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":case"latin1":case"binary":return B(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function T(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function C(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Q[t[n]];return i}function L(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function O(t,e,r,n,i){q(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function U(t,e,r,n,i){q(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function D(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(t,e,r,n,o){return e=+e,r>>>=0,o||D(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function K(t,e,r,n,o){return e=+e,r>>>=0,o||D(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=J((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||F(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=J((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||F(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=J((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||F(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=J((function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||F(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||N(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||N(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=J((function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=J((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=J((function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=J((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return P(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return P(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return K(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return K(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=u.isBuffer(t)?t:u.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const M={};function V(t,e,r){M[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function q(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new M.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||F(e,t.length-(r+1))}(n,i,o)}function z(t,e){if("number"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE(e,"number",t)}function F(t,e,r){if(Math.floor(t)!==t)throw z(t,r),new M.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=j(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function $(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const Q=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?X:t}function X(){throw new Error("BigInt not supported")}},6957:(t,e,r)=>{"use strict";var n=r(886);e.fromCallback=function(t,e){if(void 0===t){var r=new Promise((function(e,r){t=function(t,n){t?r(t):e(n)}}));t[void 0!==e?e:"promise"]=r}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},e.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){n((()=>e(null,t)))})).catch((function(t){n((()=>e(t)))}))}},886:t=>{t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t)},6729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||t,s),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],f=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,o),!0;case 6:return h.fn.call(h.context,e,n,i,o,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var l,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),f){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,i);break;default:if(!u)for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];h[c].fn.apply(h[c].context,u)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],h=a.length;u<h;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},7187:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}y(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var i,o,s,c;if(a(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(t))>0&&s.length>i&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=s.length,c=h,console&&console.warn&&console.warn(c)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function l(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):d(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function y(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[t];if(void 0===u)return!1;if("function"==typeof u)n(u,this,e);else{var c=u.length,h=d(u,c);for(r=0;r<c;++r)n(h[r],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return a(e),this.on(t,f(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,f(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,n,i,o,s;if(a(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return l(this,t,!0)},o.prototype.rawListeners=function(t){return l(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},645:(t,e)=>{e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},1675:(t,e)=>{"use strict";e.supports=function(...t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(e,{snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,getMany:e.getMany||!1,keyIterator:e.keyIterator||!1,valueIterator:e.valueIterator||!1,iteratorNextv:e.iteratorNextv||!1,iteratorAll:e.iteratorAll||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:Object.assign({},e.encodings),events:Object.assign({},e.events),additionalMethods:Object.assign({},e.additionalMethods)})}},8499:(t,e,r)=>{"use strict";const n=r(4473),i=r(8002),{Encoding:o}=r(8266),{BufferFormat:s,ViewFormat:a,UTF8Format:u}=r(2376),c=Symbol("formats"),h=Symbol("encodings"),f=new Set(["buffer","view","utf8"]);e.Transcoder=class{constructor(t){if(!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((t=>f.has(t))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[h]=new Map,this[c]=new Set(t);for(const t in i)try{this.encoding(t)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[h].values()))}encoding(t){let e=this[h].get(t);if(void 0===e){if("string"==typeof t&&""!==t){if(e=p[t],!e)throw new n(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof t||null===t)throw new TypeError("First argument 'encoding' must be a string or object");e=function(t){if(t instanceof o)return t;const e="type"in t&&"string"==typeof t.type?t.type:void 0,r=t.name||e||"anonymous-"+d++;switch(function(t){return"format"in t&&void 0!==t.format?t.format:"buffer"in t&&"boolean"==typeof t.buffer?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}(t)){case"view":return new a({...t,name:r});case"utf8":return new u({...t,name:r});case"buffer":return new s({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(t)}const{name:r,format:i}=e;if(!this[c].has(i))if(this[c].has("view"))e=e.createViewTranscoder();else if(this[c].has("buffer"))e=e.createBufferTranscoder();else{if(!this[c].has("utf8"))throw new n(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});e=e.createUTF8Transcoder()}for(const n of[t,r,e.name,e.commonName])this[h].set(n,e)}return e}};const l={binary:i.buffer,"utf-8":i.utf8},p={...i,...l};let d=0},8266:(t,e,r)=>{"use strict";const n=r(4473),i=new Set(["buffer","view","utf8"]);e.Encoding=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!i.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}},8002:(t,e,r)=>{"use strict";const{Buffer:n}=r(8764)||{Buffer:{isBuffer:()=>!1}},{textEncoder:i,textDecoder:o}=r(5850)(),{BufferFormat:s,ViewFormat:a,UTF8Format:u}=r(2376),c=t=>t;e.utf8=new u({encode:function(t){return n.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?o.decode(t):String(t)},decode:c,name:"utf8",createViewTranscoder(){return new a({encode:function(t){return ArrayBuffer.isView(t)?t:i.encode(t)},decode:function(t){return o.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new s({encode:function(t){return n.isBuffer(t)?t:ArrayBuffer.isView(t)?n.from(t.buffer,t.byteOffset,t.byteLength):n.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new u({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new s({encode:function(t){return n.isBuffer(t)?t:ArrayBuffer.isView(t)?n.from(t.buffer,t.byteOffset,t.byteLength):n.from(String(t),"utf8")},decode:c,name:"buffer",createViewTranscoder(){return new a({encode:function(t){return ArrayBuffer.isView(t)?t:n.from(String(t),"utf8")},decode:function(t){return n.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}}),e.view=new a({encode:function(t){return ArrayBuffer.isView(t)?t:i.encode(t)},decode:c,name:"view",createBufferTranscoder(){return new s({encode:function(t){return n.isBuffer(t)?t:ArrayBuffer.isView(t)?n.from(t.buffer,t.byteOffset,t.byteLength):n.from(String(t),"utf8")},decode:c,name:`${this.name}+buffer`})}}),e.hex=new s({encode:function(t){return n.isBuffer(t)?t:n.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"}),e.base64=new s({encode:function(t){return n.isBuffer(t)?t:n.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})},2376:(t,e,r)=>{"use strict";const{Buffer:n}=r(8764)||{},{Encoding:i}=r(8266),o=r(5850);class s extends i{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new a({encode:this.encode,decode:t=>this.decode(n.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class a extends i{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new s({encode:t=>{const e=this.encode(t);return n.from(e.buffer,e.byteOffset,e.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}e.BufferFormat=s,e.ViewFormat=a,e.UTF8Format=class extends i{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new s({encode:t=>n.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:t,textDecoder:e}=o();return new a({encode:e=>t.encode(this.encode(e)),decode:t=>this.decode(e.decode(t)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}},5850:t=>{"use strict";let e=null;t.exports=function(){return null===e&&(e={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),e}},1301:(t,e,r)=>{e.Level=r(1708).BrowserLevel},7117:(t,e,r)=>{var n=r(7187),i=r(5717);function o(t){if(!(this instanceof o))return new o(t);"number"==typeof t&&(t={max:t}),t||(t={}),n.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}t.exports=o,i(o,n.EventEmitter),Object.defineProperty(o.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),o.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},o.prototype.remove=function(t){if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}},o.prototype._unlink=function(t,e,r){this.length--,0===this.length?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=r,this.cache[this.tail].prev=null):(this.cache[e].next=r,this.cache[r].prev=e)},o.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}},o.prototype.set=function(t,e){var r;if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){if((r=this.cache[t]).value=e,this.maxAge&&(r.modified=Date.now()),t===this.head)return e;this._unlink(t,r.prev,r.next)}else r={value:e,modified:0,next:null,prev:null},this.maxAge&&(r.modified=Date.now()),this.cache[t]=r,this.length===this.max&&this.evict();return this.length++,r.next=null,r.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e},o.prototype._checkAge=function(t,e){return!(this.maxAge&&Date.now()-e.modified>this.maxAge&&(this.remove(t),this.emit("evict",{key:t,value:e.value}),1))},o.prototype.get=function(t){if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}},o.prototype.evict=function(){if(this.tail){var t=this.tail,e=this.remove(this.tail);this.emit("evict",{key:t,value:e})}}},4473:t=>{"use strict";t.exports=class extends Error{constructor(t,e){super(t||""),"object"==typeof e&&null!==e&&(e.code&&(this.code=String(e.code)),e.expected&&(this.expected=!0),e.transient&&(this.transient=!0),e.cause&&(this.cause=e.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},8925:(t,e,r)=>{var n=r(3832);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.aes.Algorithm(t,e)}))}r(5649),r(1967),r(7116),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var i=y({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},n.aes.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var i=y({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},n.aes.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){h||l();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return d(r._w,t,e,!1)},decrypt:function(t,e){return d(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var i=0;i<e.length;++i)r.putByte(e[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var o=e.length();if(16===o||24===o||32===o)for(o>>>=2,i=0;i<o;++i)r.push(e.getInt32())}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=p(r,t.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(t,e){return h||l(),p(t,e)},n.aes._updateBlock=d,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var o,s,a,u,c,h=!1,f=4;function l(){h=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;for(o=new Array(256),s=new Array(256),u=new Array(4),c=new Array(4),e=0;e<4;++e)u[e]=new Array(256),c[e]=new Array(256);var r,n,i,f,l,p,d,y=0,g=0;for(e=0;e<256;++e){f=(f=g^g<<1^g<<2^g<<3^g<<4)>>8^255&f^99,o[y]=f,s[f]=y,p=(l=t[f])<<24^f<<16^f<<8^f^l,d=((r=t[y])^(n=t[r])^(i=t[n]))<<24^(y^i)<<16^(y^n^i)<<8^y^r^i;for(var b=0;b<4;++b)u[b][y]=p,c[b][f]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===y?y=g=1:(y=r^t[t[t[r^i]]],g^=t[t[g]])}}function p(t,e){for(var r,n=t.slice(0),i=1,s=n.length,u=f*(s+6+1),h=s;h<u;++h)r=n[h-1],h%s==0?(r=o[r>>>16&255]<<24^o[r>>>8&255]<<16^o[255&r]<<8^o[r>>>24]^a[i]<<24,i++):s>6&&h%s==4&&(r=o[r>>>24]<<24^o[r>>>16&255]<<16^o[r>>>8&255]<<8^o[255&r]),n[h]=n[h-s]^r;if(e){for(var l,p=c[0],d=c[1],y=c[2],g=c[3],b=n.slice(0),m=(h=0,(u=n.length)-f);h<u;h+=f,m-=f)if(0===h||h===u-f)b[h]=n[m],b[h+1]=n[m+3],b[h+2]=n[m+2],b[h+3]=n[m+1];else for(var w=0;w<f;++w)l=n[m+w],b[h+(3&-w)]=p[o[l>>>24]]^d[o[l>>>16&255]]^y[o[l>>>8&255]]^g[o[255&l]];n=b}return n}function d(t,e,r,n){var i,a,h,f,l,p,d,y,g,b,m,w,v=t.length/4-1;n?(i=c[0],a=c[1],h=c[2],f=c[3],l=s):(i=u[0],a=u[1],h=u[2],f=u[3],l=o),p=e[0]^t[0],d=e[n?3:1]^t[1],y=e[2]^t[2],g=e[n?1:3]^t[3];for(var E=3,B=1;B<v;++B)b=i[p>>>24]^a[d>>>16&255]^h[y>>>8&255]^f[255&g]^t[++E],m=i[d>>>24]^a[y>>>16&255]^h[g>>>8&255]^f[255&p]^t[++E],w=i[y>>>24]^a[g>>>16&255]^h[p>>>8&255]^f[255&d]^t[++E],g=i[g>>>24]^a[p>>>16&255]^h[d>>>8&255]^f[255&y]^t[++E],p=b,d=m,y=w;r[0]=l[p>>>24]<<24^l[d>>>16&255]<<16^l[y>>>8&255]<<8^l[255&g]^t[++E],r[n?3:1]=l[d>>>24]<<24^l[y>>>16&255]<<16^l[g>>>8&255]<<8^l[255&p]^t[++E],r[2]=l[y>>>24]<<24^l[g>>>16&255]<<16^l[p>>>8&255]<<8^l[255&d]^t[++E],r[n?1:3]=l[g>>>24]<<24^l[p>>>16&255]<<16^l[d>>>8&255]<<8^l[255&y]^t[++E]}function y(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=t,i.call(e,r)},e}},3068:(t,e,r)=>{var n=r(3832);r(7116),r(6270);var i=t.exports=n.asn1=n.asn1||{};function o(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}function s(t,e,r,n){var a;o(t,e,2);var u=t.getByte();e--;var c=192&u,h=31&u;a=t.length();var f,l,p=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var i=127&r;o(t,e,i),n=t.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(t,e);if(e-=a-t.length(),void 0!==p&&p>e){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=e,d.requested=p,d}p=e}var y=32==(32&u);if(y)if(f=[],void 0===p)for(;;){if(o(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}a=t.length(),f.push(s(t,e,r+1,n)),e-=a-t.length()}else for(;p>0;)a=t.length(),f.push(s(t,p,r+1,n)),e-=a-t.length(),p-=a-t.length();if(void 0===f&&c===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&(l=t.bytes(p)),void 0===f&&n.decodeBitStrings&&c===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&p>1){var g=t.read,b=e,m=0;if(h===i.Type.BITSTRING&&(o(t,e,1),m=t.getByte(),e--),0===m)try{a=t.length();var w=s(t,e,r+1,{strict:!0,decodeBitStrings:!0}),v=a-t.length();e-=v,h==i.Type.BITSTRING&&v++;var E=w.tagClass;v!==p||E!==i.Class.UNIVERSAL&&E!==i.Class.CONTEXT_SPECIFIC||(f=[w])}catch(t){}void 0===f&&(t.read=g,e=b)}if(void 0===f){if(void 0===p){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=e}if(h===i.Type.BMPSTRING)for(f="";p>0;p-=2)o(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(p),e-=p}var B=void 0===l?null:{bitStringContents:l};return i.create(c,h,y,f,B)}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,r,o,s){if(n.util.isArray(o)){for(var a=[],u=0;u<o.length;++u)void 0!==o[u]&&a.push(o[u]);o=a}var c={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(o),value:o};return s&&"bitStringContents"in s&&(c.bitStringContents=s.bitStringContents,c.original=i.copy(c)),c},i.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var o=0;o<t.length;++o)r.push(i.copy(t[o],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},i.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var o=0;o<t.length;++o)if(!i.equals(t[o],e[o]))return!1;return!0}if(typeof t!=typeof e)return!1;if("string"==typeof t)return t===e;var s=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return r&&r.includeBitStringContents&&(s=s&&t.bitStringContents===e.bitStringContents),s},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e},i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.length(),i=s(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=t.length(),o}return i},i.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,o=n.util.createBuffer(),s=!1;if("bitStringContents"in t&&(s=!0,t.original&&(s=i.equals(t,t.original))),s)o.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:o.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&o.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)o.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?o.putBytes(t.value.substr(1)):o.putBytes(t.value);if(e.putByte(r),o.length()<=127)e.putByte(127&o.length());else{var u=o.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);for(e.putByte(128|c.length),a=c.length-1;a>=0;--a)e.putByte(c.charCodeAt(a))}return e.putBuffer(o),e},i.oidToDer=function(t){var e,r,i,o,s=t.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var u=2;u<s.length;++u){e=!0,r=[],i=parseInt(s[u],10);do{o=127&i,i>>>=7,e||(o|=128),r.push(o),e=!1}while(i>0);for(var c=r.length-1;c>=0;--c)a.putByte(r[c])}return a},i.derToOid=function(t){var e;"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)i<<=7,128&(r=t.getByte())?i+=127&r:(e+="."+(i+r),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),c&&("+"===(u=t.charAt(c))||"-"===u)){var h=60*parseInt(t.substr(c+1,2),10)+parseInt(t.substr(c+4,2),10);h*=6e4,"+"===u?e.setTime(+e-h):e.setTime(+e+h)}return e},i.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,h=!1;"Z"===t.charAt(t.length-1)&&(h=!0);var f=t.length-5,l=t.charAt(f);return"+"!==l&&"-"!==l||(c=60*parseInt(t.substr(f+1,2),10)+parseInt(t.substr(f+4,2),10),c*=6e4,"+"===l&&(c*=-1),h=!0),"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),h?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(o,s,a,u)),e},i.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},i.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},i.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},i.derToInteger=function(t){"string"==typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,r,o){var s=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)o&&(t.tagClass!==e.tagClass&&o.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&o.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(s=!0,e.value&&n.util.isArray(e.value))for(var a=0,u=0;s&&u<e.value.length;++u)s=e.value[u].optional||!1,t.value[a]&&((s=i.validate(t.value[a],e.value[u],r,o))?++a:e.value[u].optional&&(s=!0)),!s&&o&&o.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(s&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else o&&o.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return s};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,r){var o="";r=r||2,(e=e||0)>0&&(o+="\n");for(var s="",u=0;u<e*r;++u)s+=" ";switch(o+=s+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:o+="Universal:";break;case i.Class.APPLICATION:o+="Application:";break;case i.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case i.Class.PRIVATE:o+="Private:"}if(t.tagClass===i.Class.UNIVERSAL)switch(o+=t.type,t.type){case i.Type.NONE:o+=" (None)";break;case i.Type.BOOLEAN:o+=" (Boolean)";break;case i.Type.INTEGER:o+=" (Integer)";break;case i.Type.BITSTRING:o+=" (Bit string)";break;case i.Type.OCTETSTRING:o+=" (Octet string)";break;case i.Type.NULL:o+=" (Null)";break;case i.Type.OID:o+=" (Object Identifier)";break;case i.Type.ODESC:o+=" (Object Descriptor)";break;case i.Type.EXTERNAL:o+=" (External or Instance of)";break;case i.Type.REAL:o+=" (Real)";break;case i.Type.ENUMERATED:o+=" (Enumerated)";break;case i.Type.EMBEDDED:o+=" (Embedded PDV)";break;case i.Type.UTF8:o+=" (UTF8)";break;case i.Type.ROID:o+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:o+=" (Sequence)";break;case i.Type.SET:o+=" (Set)";break;case i.Type.PRINTABLESTRING:o+=" (Printable String)";break;case i.Type.IA5String:o+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:o+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case i.Type.BMPSTRING:o+=" (BMP String)"}else o+=t.type;if(o+="\n",o+=s+"Constructed: "+t.constructed+"\n",t.composed){var c=0,h="";for(u=0;u<t.value.length;++u)void 0!==t.value[u]&&(c+=1,h+=i.prettyPrint(t.value[u],e+1,r),u+1<t.value.length&&(h+=","));o+=s+"Sub values: "+c+h}else{if(o+=s+"Value: ",t.type===i.Type.OID){var f=i.derToOid(t.value);o+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(o+=" ("+n.pki.oids[f]+") ")}if(t.type===i.Type.INTEGER)try{o+=i.derToInteger(t.value)}catch(e){o+="0x"+n.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(t.value.length>1?o+="0x"+n.util.bytesToHex(t.value.slice(1)):o+="(none)",t.value.length>0){var l=t.value.charCodeAt(0);1==l?o+=" (1 unused bit shown)":l>1&&(o+=" ("+l+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)a.test(t.value)||(o+="("+t.value+") "),o+="0x"+n.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{o+=n.util.decodeUtf8(t.value)}catch(e){if("URI malformed"!==e.message)throw e;o+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?o+=t.value:a.test(t.value)?o+="0x"+n.util.bytesToHex(t.value):0===t.value.length?o+="[null]":o+=t.value}return o}},8807:t=>{var e={};t.exports=e;var r={};e.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var u=0,c=t[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%o,c=c/o|0;for(;c>0;)a.push(c%o),c=c/o|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}else n=function(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=i;for(r=o.length-1;r>=0;--r)u+=e[o[r]];return u}(t,e);if(r){var h=new RegExp(".{1,"+r+"}","g");n=n.match(h).join("\r\n")}return n},e.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var n=r[e];if(!n){n=r[e]=[];for(var i=0;i<e.length;++i)n[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");var o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;i++){var u=n[t.charCodeAt(i)];if(void 0===u)return;for(var c=0,h=u;c<a.length;++c)h+=a[c]*o,a[c]=255&h,h>>=8;for(;h>0;)a.push(255&h),h>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)a.push(0);return"undefined"!=typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},5649:(t,e,r)=>{var n=r(3832);r(7116),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},1967:(t,e,r)=>{var n=r(3832);r(7116),n.cipher=n.cipher||{};var i=t.exports=n.cipher.modes=n.cipher.modes||{};function o(t,e){if("string"==typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var o=[],s=e/4;for(i=0;i<s;++i)o.push(t.getInt32());t=o}return t}function s(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=a(8*e.length());var o=e.length()%this.blockSize;for(o&&e.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i)t[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];e[0]^=i[0],e[1]^=i[1],e[2]^=i[2],e[3]^=i[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],u=(n-1-s%n)*e;a[s/n|0]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],u=i[s];i[o+s]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var c=i[o^n];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}},3480:(t,e,r)=>{var n=r(3832);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.des.Algorithm(t,e)}))}r(5649),r(1967),r(7116),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var i=d({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createEncryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var i=d({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createDecryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return p(r._keys,t,e,!1)},decrypt:function(t,e){return p(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,b=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,v=0;v<g;v++){var E=t.getInt32(),B=t.getInt32();E^=(e=252645135&(E>>>4^B))<<4,E^=e=65535&((B^=e)>>>-16^E),E^=(e=858993459&(E>>>2^(B^=e<<-16)))<<2,E^=e=65535&((B^=e)>>>-16^E),E^=(e=1431655765&(E>>>1^(B^=e<<-16)))<<1,E^=e=16711935&((B^=e)>>>8^E),e=(E^=(e=1431655765&(E>>>1^(B^=e<<8)))<<1)<<8|(B^=e)>>>20&240,E=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=e;for(var S=0;S<m.length;++S){m[S]?(E=E<<2|E>>>26,B=B<<2|B>>>26):(E=E<<1|E>>>27,B=B<<1|B>>>27);var _=r[(E&=-15)>>>28]|n[E>>>24&15]|i[E>>>20&15]|o[E>>>16&15]|s[E>>>12&15]|a[E>>>8&15]|u[E>>>4&15],A=c[(B&=-15)>>>28]|h[B>>>24&15]|f[B>>>20&15]|l[B>>>16&15]|p[B>>>12&15]|d[B>>>8&15]|y[B>>>4&15];e=65535&(A>>>16^_),b[w++]=_^e,b[w++]=A^e<<16}}return b}(e),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var o=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],h=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],l=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function p(t,e,r,n){var i,p,d=32===t.length?3:9;i=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var y=e[0],g=e[1];y^=(p=252645135&(y>>>4^g))<<4,y^=(p=65535&(y>>>16^(g^=p)))<<16,y^=p=858993459&((g^=p)>>>2^y),y^=p=16711935&((g^=p<<2)>>>8^y),y=(y^=(p=1431655765&(y>>>1^(g^=p<<8)))<<1)<<1|y>>>31,g=(g^=p)<<1|g>>>31;for(var b=0;b<d;b+=3){for(var m=i[b+1],w=i[b+2],v=i[b];v!=m;v+=w){var E=g^t[v],B=(g>>>4|g<<28)^t[v+1];p=y,y=g,g=p^(s[E>>>24&63]|u[E>>>16&63]|h[E>>>8&63]|l[63&E]|o[B>>>24&63]|a[B>>>16&63]|c[B>>>8&63]|f[63&B])}p=y,y=g,g=p}g=g>>>1|g<<31,g^=p=1431655765&((y=y>>>1|y<<31)>>>1^g),g^=(p=16711935&(g>>>8^(y^=p<<1)))<<8,g^=(p=858993459&(g>>>2^(y^=p)))<<2,g^=p=65535&((y^=p)>>>16^g),g^=p=252645135&((y^=p<<16)>>>4^g),y^=p<<4,r[0]=y,r[1]=g}function d(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=t,i.call(e,r)},e}},3832:t=>{t.exports={options:{usePureJavaScript:!1}}},6607:(t,e,r)=>{var n=r(3832);r(8991),r(7116),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,i=null,o={start:function(o,s){if(null!==o)if("string"==typeof o){if(!((o=o.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');e=n.md.algorithms[o].create()}else e=o;if(null===s)s=t;else{if("string"==typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var a=s;s=n.util.createBuffer();for(var u=0;u<a.length;++u)s.putByte(a[u])}var c=s.length();for(c>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),c=s.length(),u=0;u<c;++u)a=s.at(u),r.putByte(54^a),i.putByte(92^a);if(c<e.blockLength)for(a=e.blockLength-c,u=0;u<a;++u)r.putByte(54),i.putByte(92);t=s,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return o.digest=o.getMac,o}},5764:(t,e,r)=>{var n,i=r(3832);function o(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function s(){return new o(null)}function a(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,h=a*u+c*s;i=((u=s*u+((16383&h)<<14)+r.data[n]+i)>>28)+(h>>14)+a*c,r.data[n++]=268435455&u}return i}t.exports=i.jsbn=i.jsbn||{},i.jsbn.BigInteger=o,"undefined"==typeof navigator?(o.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=function(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,h=a*u+c*s;i=((u=s*u+((32767&h)<<15)+r.data[n]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),r.data[n++]=1073741823&u}return i},n=30):"Netscape"!=navigator.appName?(o.prototype.am=function(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i},n=26):(o.prototype.am=a,n=28),o.prototype.DB=n,o.prototype.DM=(1<<n)-1,o.prototype.DV=1<<n,o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-n,o.prototype.F2=2*n-52;var u,c,h=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)h[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)h[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)h[u++]=c;function f(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function l(t,e){var r=h[t.charCodeAt(e)];return null==r?-1:r}function p(t){var e=s();return e.fromInt(t),e}function d(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function y(t){this.m=t}function g(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function b(t,e){return t&e}function m(t,e){return t|e}function w(t,e){return t^e}function v(t,e){return t&~e}function E(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function B(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function S(){}function _(t){return t}function A(t){this.r2=s(),this.q3=s(),o.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}y.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},y.prototype.revert=function(t){return t},y.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},g.prototype.convert=function(t){var e=s();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e},g.prototype.revert=function(t){var e=s();return t.copyTo(e),this.reduce(e),e},g.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},g.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},g.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},o.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},o.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},o.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var a=8==r?255&t[n]:l(t,n);a<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},o.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},o.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},o.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)e.data[r]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},o.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},o.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},o.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)},o.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},o.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var a=s(),u=this.s,c=t.s,h=this.DB-d(n.data[n.t-1]);h>0?(n.lShiftTo(h,a),i.lShiftTo(h,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,l=a.data[f-1];if(0!=l){var p=l*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),y=this.FV/p,g=(1<<this.F1)/p,b=1<<this.F2,m=r.t,w=m-f,v=null==e?s():e;for(a.dlShiftTo(w,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),o.ONE.dlShiftTo(f,v),v.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--w>=0;){var E=r.data[--m]==l?this.DM:Math.floor(r.data[m]*y+(r.data[m-1]+b)*g);if((r.data[m]+=a.am(0,E,r,w,0,f))<E)for(a.dlShiftTo(w,v),r.subTo(v,r);r.data[m]<--E;)r.subTo(v,r)}null!=e&&(r.drShiftTo(f,e),u!=c&&o.ZERO.subTo(e,e)),r.t=f,r.clamp(),h>0&&r.rShiftTo(h,r),u<0&&o.ZERO.subTo(r,r)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},o.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},o.prototype.exp=function(t,e){if(t>4294967295||t<1)return o.ONE;var r=s(),n=s(),i=e.convert(this),a=d(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var u=r;r=n,n=u}return e.revert(r)},o.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=f(r));s>=0;)a<e?(r=(this.data[s]&(1<<a)-1)<<e-a,r|=this.data[--s]>>(a+=this.DB-e)):(r=this.data[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=f(r));return i?o:"0"},o.prototype.negate=function(){var t=s();return o.ZERO.subTo(this,t),t},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this.data[this.t-1]^this.s&this.DM)},o.prototype.mod=function(t){var e=s();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e},o.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new y(e):new g(e),this.exp(t,r)},o.ZERO=p(0),o.ONE=p(1),S.prototype.convert=_,S.prototype.revert=_,S.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},S.prototype.sqrTo=function(t,e){t.squareTo(e)},A.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=s();return t.copyTo(e),this.reduce(e),e},A.prototype.revert=function(t){return t},A.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},A.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},A.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],k=(1<<26)/I[I.length-1];o.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},o.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=p(r),i=s(),o=s(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a},o.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,a=0,u=0;u<t.length;++u){var c=l(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(i=!0):(a=e*a+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),i&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(o.ONE.shiftLeft(t-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(o.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},o.prototype.bitwiseTo=function(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},o.prototype.changeBit=function(t,e){var r=o.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},o.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},o.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},o.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()},o.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},o.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},o.prototype.millerRabin=function(t){var e=this.subtract(o.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,i=e.shiftRight(r),s={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},a=0;a<t;++a){do{n=new o(this.bitLength(),s)}while(n.compareTo(o.ONE)<=0||n.compareTo(e)>=0);var u=n.modPow(i,this);if(0!=u.compareTo(o.ONE)&&0!=u.compareTo(e)){for(var c=1;c++<r&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},o.prototype.clone=function(){var t=s();return this.copyTo(t),t},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},o.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},o.prototype.equals=function(t){return 0==this.compareTo(t)},o.prototype.min=function(t){return this.compareTo(t)<0?this:t},o.prototype.max=function(t){return this.compareTo(t)>0?this:t},o.prototype.and=function(t){var e=s();return this.bitwiseTo(t,b,e),e},o.prototype.or=function(t){var e=s();return this.bitwiseTo(t,m,e),e},o.prototype.xor=function(t){var e=s();return this.bitwiseTo(t,w,e),e},o.prototype.andNot=function(t){var e=s();return this.bitwiseTo(t,v,e),e},o.prototype.not=function(){for(var t=s(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},o.prototype.shiftLeft=function(t){var e=s();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},o.prototype.shiftRight=function(t){var e=s();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},o.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+E(this.data[t]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=B(this.data[r]^e);return t},o.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},o.prototype.setBit=function(t){return this.changeBit(t,m)},o.prototype.clearBit=function(t){return this.changeBit(t,v)},o.prototype.flipBit=function(t){return this.changeBit(t,w)},o.prototype.add=function(t){var e=s();return this.addTo(t,e),e},o.prototype.subtract=function(t){var e=s();return this.subTo(t,e),e},o.prototype.multiply=function(t){var e=s();return this.multiplyTo(t,e),e},o.prototype.divide=function(t){var e=s();return this.divRemTo(t,e,null),e},o.prototype.remainder=function(t){var e=s();return this.divRemTo(t,null,e),e},o.prototype.divideAndRemainder=function(t){var e=s(),r=s();return this.divRemTo(t,e,r),new Array(e,r)},o.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),o=p(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new y(e):e.isEven()?new A(e):new g(e);var a=new Array,u=3,c=r-1,h=(1<<r)-1;if(a[1]=n.convert(this),r>1){var f=s();for(n.sqrTo(a[1],f);u<=h;)a[u]=s(),n.mulTo(f,a[u-2],a[u]),u+=2}var l,b,m=t.t-1,w=!0,v=s();for(i=d(t.data[m])-1;m>=0;){for(i>=c?l=t.data[m]>>i-c&h:(l=(t.data[m]&(1<<i+1)-1)<<c-i,m>0&&(l|=t.data[m-1]>>this.DB+i-c)),u=r;0==(1&l);)l>>=1,--u;if((i-=u)<0&&(i+=this.DB,--m),w)a[l].copyTo(o),w=!1;else{for(;u>1;)n.sqrTo(o,v),n.sqrTo(v,o),u-=2;u>0?n.sqrTo(o,v):(b=o,o=v,v=b),n.mulTo(v,a[l],o)}for(;m>=0&&0==(t.data[m]&1<<i);)n.sqrTo(o,v),b=o,o=v,v=b,--i<0&&(i=this.DB-1,--m)}return n.revert(o)},o.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return o.ZERO;for(var r=t.clone(),n=this.clone(),i=p(1),s=p(0),a=p(0),u=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),s.subTo(u,s)):(n.subTo(r,n),e&&a.subTo(i,a),u.subTo(s,u))}return 0!=n.compareTo(o.ONE)?o.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},o.prototype.pow=function(t){return this.exp(t,new S)},o.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},o.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(r.data[0]==I[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<I.length;){for(var n=I[e],i=e+1;i<I.length&&n<k;)n*=I[i++];for(n=r.modInt(n);e<i;)if(n%I[e++]==0)return!1}return r.millerRabin(t)}},8991:(t,e,r)=>{var n=r(3832);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},6270:(t,e,r)=>{var n=r(3832);n.pki=n.pki||{};var i=t.exports=n.pki.oids=n.oids=n.oids||{};function o(t,e){i[t]=e,i[e]=t}function s(t,e){i[t]=e}o("1.2.840.113549.1.1.1","rsaEncryption"),o("1.2.840.113549.1.1.4","md5WithRSAEncryption"),o("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),o("1.2.840.113549.1.1.7","RSAES-OAEP"),o("1.2.840.113549.1.1.8","mgf1"),o("1.2.840.113549.1.1.9","pSpecified"),o("1.2.840.113549.1.1.10","RSASSA-PSS"),o("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),o("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),o("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),o("1.3.101.112","EdDSA25519"),o("1.2.840.10040.4.3","dsa-with-sha1"),o("1.3.14.3.2.7","desCBC"),o("1.3.14.3.2.26","sha1"),o("1.3.14.3.2.29","sha1WithRSASignature"),o("2.16.840.1.101.3.4.2.1","sha256"),o("2.16.840.1.101.3.4.2.2","sha384"),o("2.16.840.1.101.3.4.2.3","sha512"),o("2.16.840.1.101.3.4.2.4","sha224"),o("2.16.840.1.101.3.4.2.5","sha512-224"),o("2.16.840.1.101.3.4.2.6","sha512-256"),o("1.2.840.113549.2.2","md2"),o("1.2.840.113549.2.5","md5"),o("1.2.840.113549.1.7.1","data"),o("1.2.840.113549.1.7.2","signedData"),o("1.2.840.113549.1.7.3","envelopedData"),o("1.2.840.113549.1.7.4","signedAndEnvelopedData"),o("1.2.840.113549.1.7.5","digestedData"),o("1.2.840.113549.1.7.6","encryptedData"),o("1.2.840.113549.1.9.1","emailAddress"),o("1.2.840.113549.1.9.2","unstructuredName"),o("1.2.840.113549.1.9.3","contentType"),o("1.2.840.113549.1.9.4","messageDigest"),o("1.2.840.113549.1.9.5","signingTime"),o("1.2.840.113549.1.9.6","counterSignature"),o("1.2.840.113549.1.9.7","challengePassword"),o("1.2.840.113549.1.9.8","unstructuredAddress"),o("1.2.840.113549.1.9.14","extensionRequest"),o("1.2.840.113549.1.9.20","friendlyName"),o("1.2.840.113549.1.9.21","localKeyId"),o("1.2.840.113549.1.9.22.1","x509Certificate"),o("1.2.840.113549.1.12.10.1.1","keyBag"),o("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),o("1.2.840.113549.1.12.10.1.3","certBag"),o("1.2.840.113549.1.12.10.1.4","crlBag"),o("1.2.840.113549.1.12.10.1.5","secretBag"),o("1.2.840.113549.1.12.10.1.6","safeContentsBag"),o("1.2.840.113549.1.5.13","pkcs5PBES2"),o("1.2.840.113549.1.5.12","pkcs5PBKDF2"),o("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),o("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),o("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),o("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),o("1.2.840.113549.2.7","hmacWithSHA1"),o("1.2.840.113549.2.8","hmacWithSHA224"),o("1.2.840.113549.2.9","hmacWithSHA256"),o("1.2.840.113549.2.10","hmacWithSHA384"),o("1.2.840.113549.2.11","hmacWithSHA512"),o("1.2.840.113549.3.7","des-EDE3-CBC"),o("2.16.840.1.101.3.4.1.2","aes128-CBC"),o("2.16.840.1.101.3.4.1.22","aes192-CBC"),o("2.16.840.1.101.3.4.1.42","aes256-CBC"),o("2.5.4.3","commonName"),o("2.5.4.4","surname"),o("2.5.4.5","serialNumber"),o("2.5.4.6","countryName"),o("2.5.4.7","localityName"),o("2.5.4.8","stateOrProvinceName"),o("2.5.4.9","streetAddress"),o("2.5.4.10","organizationName"),o("2.5.4.11","organizationalUnitName"),o("2.5.4.12","title"),o("2.5.4.13","description"),o("2.5.4.15","businessCategory"),o("2.5.4.17","postalCode"),o("2.5.4.42","givenName"),o("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),o("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),o("2.16.840.1.113730.1.1","nsCertType"),o("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),o("2.5.29.14","subjectKeyIdentifier"),o("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),o("2.5.29.17","subjectAltName"),o("2.5.29.18","issuerAltName"),o("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),o("2.5.29.31","cRLDistributionPoints"),o("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),o("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),o("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),o("1.3.6.1.4.1.11129.2.4.2","timestampList"),o("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),o("1.3.6.1.5.5.7.3.1","serverAuth"),o("1.3.6.1.5.5.7.3.2","clientAuth"),o("1.3.6.1.5.5.7.3.3","codeSigning"),o("1.3.6.1.5.5.7.3.4","emailProtection"),o("1.3.6.1.5.5.7.3.8","timeStamping")},7450:(t,e,r)=>{var n=r(3832);if(r(8925),r(3068),r(3480),r(8991),r(6270),r(8960),r(6953),r(9563),r(9372),r(8095),r(7116),void 0===i)var i=n.jsbn.BigInteger;var o=n.asn1,s=n.pki=n.pki||{};t.exports=s.pbe=n.pbe=n.pbe||{};var a=s.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},h={name:"pkcs-12PbeParams",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(t,e){return t.start().update(e).digest().getBytes()}function l(t){var e;if(t){if(!(e=s.oids[o.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return p(e)}function p(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,u,c,h=n.random.getBytesSync(r.saltSize),f=r.count,l=o.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var d,y,g;switch(r.algorithm){case"aes128":i=16,d=16,y=a["aes128-CBC"],g=n.aes.createEncryptionCipher;break;case"aes192":i=24,d=16,y=a["aes192-CBC"],g=n.aes.createEncryptionCipher;break;case"aes256":i=32,d=16,y=a["aes256-CBC"],g=n.aes.createEncryptionCipher;break;case"des":i=8,d=8,y=a.desCBC,g=n.des.createEncryptionCipher;break;default:throw(B=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,B}var b="hmacWith"+r.prfAlgorithm.toUpperCase(),m=p(b),w=n.pkcs5.pbkdf2(e,h,f,i,m),v=n.random.getBytesSync(d);(S=g(w)).start(v),S.update(o.toDer(t)),S.finish(),c=S.output.getBytes();var E=function(t,e,r,i){var a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==i&&a.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids[i]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),a}(h,l,i,b);u=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBES2).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBKDF2).getBytes()),E]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(y).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,v)])])])}else{var B;if("3des"!==r.algorithm)throw(B=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,B;i=24;var S,_=new n.util.ByteBuffer(h);w=s.pbe.generatePkcs12Key(e,_,1,f,i),v=s.pbe.generatePkcs12Key(e,_,2,f,i),(S=n.des.createEncryptionCipher(w)).start(v),S.update(o.toDer(t)),S.finish(),c=S.output.getBytes(),u=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,l.getBytes())])])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[u,o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,c)])},s.decryptPrivateKeyInfo=function(t,e){var r=null,i={},a=[];if(!o.validate(t,u,i,a)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var h=o.derToOid(i.encryptionOid),f=s.pbe.getCipher(h,i.encryptionParams,e),l=n.util.createBuffer(i.encryptedData);return f.update(l),f.finish()&&(r=o.fromDer(f.output)),r},s.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},s.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return o.fromDer(e.body)},s.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var i=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));return i=s.encryptPrivateKeyInfo(i,e,r),s.encryptedPrivateKeyToPem(i)}var a,u,c,h;switch(r.algorithm){case"aes128":a="AES-128-CBC",c=16,u=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",c=24,u=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",c=32,u=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",c=24,u=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",c=8,u=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var l=h(n.pbe.opensslDeriveBytes(e,u.substr(0,8),c));l.start(u),l.update(o.toDer(s.privateKeyToAsn1(t))),l.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(u).toUpperCase()},body:l.output.getBytes()};return n.pem.encode(p)},s.decryptRsaPrivateKey=function(t,e){var r=null,i=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,u;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,u=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,u=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,u=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,c}var h=n.util.hexToBytes(i.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(e,h.substr(0,8),a));if(f.start(h),f.update(n.util.createBuffer(i.body)),!f.finish())return r;r=f.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?s.decryptPrivateKeyInfo(o.fromDer(r),e):o.fromDer(r))&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(t,e,r,i,o,s){var a,u;if(null==s){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');s=n.md.sha1.create()}var c=s.digestLength,h=s.blockLength,f=new n.util.ByteBuffer,l=new n.util.ByteBuffer;if(null!=t){for(u=0;u<t.length;u++)l.putInt16(t.charCodeAt(u));l.putInt16(0)}var p=l.length(),d=e.length(),y=new n.util.ByteBuffer;y.fillWithByte(r,h);var g=h*Math.ceil(d/h),b=new n.util.ByteBuffer;for(u=0;u<g;u++)b.putByte(e.at(u%d));var m=h*Math.ceil(p/h),w=new n.util.ByteBuffer;for(u=0;u<m;u++)w.putByte(l.at(u%p));var v=b;v.putBuffer(w);for(var E=Math.ceil(o/c),B=1;B<=E;B++){var S=new n.util.ByteBuffer;S.putBytes(y.bytes()),S.putBytes(v.bytes());for(var _=0;_<i;_++)s.start(),s.update(S.getBytes()),S=s.digest();var A=new n.util.ByteBuffer;for(u=0;u<h;u++)A.putByte(S.at(u%c));var I=Math.ceil(d/h)+Math.ceil(p/h),k=new n.util.ByteBuffer;for(a=0;a<I;a++){var T=new n.util.ByteBuffer(v.getBytes(h)),C=511;for(u=A.length()-1;u>=0;u--)C>>=8,C+=A.at(u)+T.at(u),T.setAt(u,255&C);k.putBuffer(T)}v=k,f.putBuffer(S)}return f.truncate(f.length()-o),f},s.pbe.getCipher=function(t,e,r){switch(t){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(t,e,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(t,e,r){var i,a={},u=[];if(!o.validate(e,c,a,u))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,i;if((t=o.derToOid(a.kdfOid))!==s.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,i.supportedOids=["pkcs5PBKDF2"],i;if((t=o.derToOid(a.encOid))!==s.oids["aes128-CBC"]&&t!==s.oids["aes192-CBC"]&&t!==s.oids["aes256-CBC"]&&t!==s.oids["des-EDE3-CBC"]&&t!==s.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var h,f,p=a.kdfSalt,d=n.util.createBuffer(a.kdfIterationCount);switch(d=d.getInt(d.length()<<3),s.oids[t]){case"aes128-CBC":h=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,f=n.des.createDecryptionCipher;break;case"desCBC":h=8,f=n.des.createDecryptionCipher}var y=l(a.prfOid),g=n.pkcs5.pbkdf2(r,p,d,h,y),b=a.encIv,m=f(g);return m.start(b),m},s.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},a=[];if(!o.validate(e,h,i,a))throw(y=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,y;var u,c,f,p=n.util.createBuffer(i.salt),d=n.util.createBuffer(i.iterations);switch(d=d.getInt(d.length()<<3),t){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=n.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var y;throw(y=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,y}var g=l(i.prfOid),b=s.pbe.generatePkcs12Key(r,p,1,d,u,g);return g.start(),f(b,s.pbe.generatePkcs12Key(r,p,2,d,c,g))},s.pbe.opensslDeriveBytes=function(t,e,r,i){if(null==i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===e&&(e="");for(var o=[f(i,t+e)],s=16,a=1;s<r;++a,s+=16)o.push(f(i,o[a-1]+t+e));return o.join("").substr(0,r)}},8960:(t,e,r)=>{var n=r(3832);r(6607),r(8991),r(7116);var i,o=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(5819)),t.exports=n.pbkdf2=o.pbkdf2=function(t,e,r,o,s,a){if("function"==typeof s&&(a=s,s=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===s||"object"!=typeof s)&&(i.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!=typeof s&&(s="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?4===i.pbkdf2Sync.length?i.pbkdf2(t,e,r,o,(function(t,e){if(t)return a(t);a(null,e.toString("binary"))})):i.pbkdf2(t,e,r,o,s,(function(t,e){if(t)return a(t);a(null,e.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,e,r,o).toString("binary"):i.pbkdf2Sync(t,e,r,o,s).toString("binary");if(null==s&&(s="sha1"),"string"==typeof s){if(!(s in n.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=n.md[s].create()}var u=s.digestLength;if(o>4294967295*u){var c=new Error("Derived key is too long.");if(a)return a(c);throw c}var h=Math.ceil(o/u),f=o-(h-1)*u,l=n.hmac.create();l.start(s,t);var p,d,y,g="";if(!a){for(var b=1;b<=h;++b){l.start(null,null),l.update(e),l.update(n.util.int32ToBytes(b)),p=y=l.digest().getBytes();for(var m=2;m<=r;++m)l.start(null,null),l.update(y),d=l.digest().getBytes(),p=n.util.xorBytes(p,d,u),y=d;g+=b<h?p:p.substr(0,f)}return g}function w(){if(b>h)return a(null,g);l.start(null,null),l.update(e),l.update(n.util.int32ToBytes(b)),p=y=l.digest().getBytes(),m=2,v()}function v(){if(m<=r)return l.start(null,null),l.update(y),d=l.digest().getBytes(),p=n.util.xorBytes(p,d,u),y=d,++m,n.util.setImmediate(v);g+=b<h?p:p.substr(0,f),++b,w()}b=1,w()}},6953:(t,e,r)=>{var n=r(3832);r(7116);var i=t.exports=n.pem=n.pem||{};function o(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var o=0,s=-1;for(i=0;i<e.length;++i,++o)if(o>65&&-1!==s){var a=e[s];","===a?(++s,e=e.substr(0,s)+"\r\n "+e.substr(s)):e=e.substr(0,s)+"\r\n"+a+e.substr(s+1),o=i-s-1,s=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(s=i);return e}function s(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(i+=o(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(i+=o(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=o(r)),t.headers)for(var s=0;s<t.headers.length;++s)i+=o(t.headers[s]);return t.procType&&(i+="\r\n"),(i+=n.util.encode64(t.body,e.maxline||64)+"\r\n")+"-----END "+t.type+"-----\r\n"},i.decode=function(t){for(var e,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;e=i.exec(t);){var u=e[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var c={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(c),e[2]){for(var h=e[2].split(a),f=0;e&&f<h.length;){for(var l=h[f].replace(/\s+$/,""),p=f+1;p<h.length;++p){var d=h[p];if(!/\s/.test(d[0]))break;l+=d,f=p}if(e=l.match(o)){for(var y={name:e[1],values:[]},g=e[2].split(","),b=0;b<g.length;++b)y.values.push(s(g[b]));if(c.procType)if(c.contentDomain||"Content-Domain"!==y.name)if(c.dekInfo||"DEK-Info"!==y.name)c.headers.push(y);else{if(0===y.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.contentDomain=g[0]||"";else{if("Proc-Type"!==y.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==y.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++f}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},8936:(t,e,r)=>{var n=r(3832);r(7116),r(9563),r(137);var i=t.exports=n.pkcs1=n.pkcs1||{};function o(t,e,r){r||(r=n.md.sha1.create());for(var i="",o=Math.ceil(e/r.digestLength),s=0;s<o;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,r){var i,s,a,u;"string"==typeof r?(i=r,s=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),u||(u=a);var c=Math.ceil(t.n.bitLength()/8),h=c-2*a.digestLength-2;if(e.length>h)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=e.length,g.maxLength=h,g;i||(i=""),a.update(i,"raw");for(var f=a.digest(),l="",p=h-e.length,d=0;d<p;d++)l+="\0";var y=f.getBytes()+l+""+e;if(s){if(s.length!==a.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=s.length,g.digestLength=a.digestLength,g}}else s=n.random.getBytes(a.digestLength);var b=o(s,c-a.digestLength-1,u),m=n.util.xorBytes(y,b,y.length),w=o(m,a.digestLength,u);return"\0"+n.util.xorBytes(s,w,s.length)+m},i.decode_rsa_oaep=function(t,e,r){var i,s,a;"string"==typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u)throw(b=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,b.expectedLength=u,b;if(void 0===s?s=n.md.sha1.create():s.start(),a||(a=s),u<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),s.update(i,"raw");for(var c=s.digest().getBytes(),h=e.charAt(0),f=e.substring(1,s.digestLength+1),l=e.substring(1+s.digestLength),p=o(l,s.digestLength,a),d=o(n.util.xorBytes(f,p,f.length),u-s.digestLength-1,a),y=n.util.xorBytes(l,d,l.length),g=y.substring(0,s.digestLength),b="\0"!==h,m=0;m<s.digestLength;++m)b|=c.charAt(m)!==g.charAt(m);for(var w=1,v=s.digestLength,E=s.digestLength;E<y.length;E++){var B=y.charCodeAt(E);b|=B&(w?65534:0),v+=w&=1&B^1}if(b||1!==y.charCodeAt(v))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(v+1)}},9654:(t,e,r)=>{var n=r(3832);r(7116),r(5764),r(9563),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],o=new r(null);o.fromInt(30);var s=function(t,e){return t|e};e.generateProbablePrime=function(t,e,i){"function"==typeof e&&(i=e,e={});var o=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof o&&(o={name:o}),o.options=o.options||{};var s=e.prng||n.random,u={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===o.name)return function(t,e,i,o){return"workers"in i?function(t,e,i,o){if("undefined"==typeof Worker)return a(t,e,i,o);var s=c(t,e),u=i.workers,h=i.workLoad||100,f=30*h/8,l=i.workerScript||"forge/prime.worker.js";if(-1===u)return n.util.estimateCores((function(t,e){t&&(e=2),u=e-1,p()}));function p(){u=Math.max(1,u);for(var n=[],i=0;i<u;++i)n[i]=new Worker(l);for(i=0;i<u;++i)n[i].addEventListener("message",p);var a=!1;function p(i){if(!a){var u=i.data;if(u.found){for(var l=0;l<n.length;++l)n[l].terminate();return a=!0,o(null,new r(u.prime,16))}s.bitLength()>t&&(s=c(t,e));var p=s.toString(16);i.target.postMessage({hex:p,workLoad:h}),s.dAddOffset(f,0)}}}p()}(t,e,i,o):a(t,e,i,o)}(t,u,o.options,i);throw new Error("Invalid prime generation algorithm: "+o.name)}}function a(t,e,r,n){var i=c(t,e),o=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var s=10;"maxBlockTime"in r&&(s=r.maxBlockTime),u(i,t,e,0,o,s,n)}function u(t,e,r,o,s,a,h){var f=+new Date;do{if(t.bitLength()>e&&(t=c(e,r)),t.isProbablePrime(s))return h(null,t);t.dAddOffset(i[o++%8],0)}while(a<0||+new Date-f<a);n.util.setImmediate((function(){u(t,e,r,o,s,a,h)}))}function c(t,e){var n=new r(t,e),i=t-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),s,n),n.dAddOffset(31-n.mod(o).byteValue(),0),n}}()},4933:(t,e,r)=>{var n=r(3832);r(7116);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(i=r(5819)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,o=new Array(32),s=0;s<32;++s)o[s]=r.create();function a(){if(e.pools[0].messageLength>=32)return u();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r==0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function c(t){var e=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(e=function(t){return i.getRandomValues(t)});var o=n.util.createBuffer();if(e)for(;o.length()<t;){var s=Math.max(1,Math.min(t-o.length(),65536)/4),a=new Uint32Array(Math.floor(s));try{e(a);for(var u=0;u<a.length;++u)o.putInt32(a[u])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(o.length()<t)for(var c,h,f,l=Math.floor(65536*Math.random());o.length()<t;)for(h=16807*(65535&l),h+=(32767&(c=16807*(l>>16)))<<16,l=4294967295&(h=(2147483647&(h+=c>>15))+(h>>31)),u=0;u<3;++u)f=l>>>(u<<3),f^=Math.floor(256*Math.random()),o.putByte(255&f);return o.getBytes(t)}return e.pools=o,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var i=e.plugin.cipher,o=e.plugin.increment,s=e.plugin.formatKey,a=e.plugin.formatSeed,c=n.util.createBuffer();e.key=null,function h(f){if(f)return r(f);if(c.length()>=t)return r(null,c.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return n.util.nextTick((function(){!function(t){if(e.pools[0].messageLength>=32)return u(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,(function(r,n){if(r)return t(r);e.collect(n),u(),t()}))}(h)}));var l=i(e.key,e.seed);e.generated+=l.length,c.putBytes(l),e.key=s(i(e.key,o(e.seed))),e.seed=a(i(e.key,e.seed)),n.util.setImmediate(h)}()},e.generateSync=function(t){var r=e.plugin.cipher,i=e.plugin.increment,o=e.plugin.formatKey,s=e.plugin.formatSeed;e.key=null;for(var u=n.util.createBuffer();u.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&a();var c=r(e.key,e.seed);e.generated+=c.length,u.putBytes(c),e.key=o(r(e.key,i(e.seed))),e.seed=s(r(e.key,e.seed))}return u.getBytes(t)},i?(e.seedFile=function(t,e){i.randomBytes(t,(function(t,r){if(t)return e(t);e(null,r.toString())}))},e.seedFileSync=function(t){return i.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,c(t))}catch(t){e(t)}},e.seedFileSync=c),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(t>>i&255);e.collect(n)},e.registerWorker=function(t){t===self?e.seedFile=function(t,e){self.addEventListener("message",(function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:t}}})}:t.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,(function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})}))}))},e}},9563:(t,e,r)=>{var n=r(3832);r(8925),r(1668),r(4933),r(7116),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},i=new Array(4),o=n.util.createBuffer();function s(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var a=s(),u=null,c=n.util.globalScope,h=c.crypto||c.msCrypto;if(h&&h.getRandomValues&&(u=function(t){return h.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"==typeof window||window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var l in navigator)try{"string"==typeof navigator[l]&&(f+=navigator[l])}catch(t){}a.collect(f),f=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(n.random)for(var l in a)n.random[l]=a[l];else n.random=a;n.random.createInstance=s,t.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},9372:(t,e,r)=>{var n=r(3832);r(7116);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],o=[1,2,3,5],s=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"==typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,o=t,s=t.length(),a=e,u=Math.ceil(a/8),c=255>>(7&a);for(r=s;r<128;r++)o.putByte(i[o.at(r-1)+o.at(r-s)&255]);for(o.setAt(128-u,i[o.at(128-u)&c]),r=127-u;r>=0;r--)o.setAt(r,i[o.at(r+1)^o.at(r+u)]);return o};var u=function(t,e,r){var i,u,c,h,f=!1,l=null,p=null,d=null,y=[];for(t=n.rc2.expandKey(t,e),c=0;c<64;c++)y.push(t.getInt16Le());r?(i=function(t){for(c=0;c<4;c++)t[c]+=y[h]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),t[c]=s(t[c],o[c]),h++},u=function(t){for(c=0;c<4;c++)t[c]+=y[63&t[(c+3)%4]]}):(i=function(t){for(c=3;c>=0;c--)t[c]=a(t[c],o[c]),t[c]-=y[h]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),h--},u=function(t){for(c=3;c>=0;c--)t[c]-=y[63&t[(c+3)%4]]});var g=function(t){var e=[];for(c=0;c<4;c++){var n=l.getInt16Le();null!==d&&(r?n^=d.getInt16Le():d.putInt16Le(n)),e.push(65535&n)}h=r?0:63;for(var i=0;i<t.length;i++)for(var o=0;o<t[i][0];o++)t[i][1](e);for(c=0;c<4;c++)null!==d&&(r?d.putInt16Le(e[c]):e[c]^=d.getInt16Le()),p.putInt16Le(e[c])},b=null;return b={start:function(t,e){t&&"string"==typeof t&&(t=n.util.createBuffer(t)),f=!1,l=n.util.createBuffer(),p=e||new n.util.createBuffer,d=t,b.output=p},update:function(t){for(f||l.putBuffer(t);l.length()>=8;)g([[5,i],[1,u],[6,i],[1,u],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,l,!r);else{var n=8===l.length()?8:8-l.length();l.fillWithByte(n,n)}if(e&&(f=!0,b.update()),!r&&(e=0===l.length()))if(t)e=t(8,p,!r);else{var i=p.length(),o=p.at(i-1);o>i?e=!1:p.truncate(o)}return e}}};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},8095:(t,e,r)=>{var n=r(3832);if(r(3068),r(5764),r(6270),r(8936),r(9654),r(9563),r(7116),void 0===i)var i=n.jsbn.BigInteger;var o=n.util.isNodejs?r(5819):null,s=n.asn1,a=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var u=n.pki,c=[6,4,2,4,2,4,6,2],h={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},l={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},y=function(t){var e;if(!(t.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=u.oids[t.algorithm];var n=s.oidToDer(e).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},g=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var o;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{o=new i(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(o.compareTo(e.n)>=0||!o.gcd(e.n).equals(i.ONE));for(var s=(t=t.multiply(o.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);s.compareTo(a)<0;)s=s.add(e.p);var u=s.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return u.multiply(o.modInverse(e.n)).mod(e.n)};function b(t,e,r){var i=n.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=o-11,s}i.putByte(0),i.putByte(r);var a,u=o-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var c=0;c<u;++c)i.putByte(a)}else for(;u>0;){var h=0,f=n.random.getBytes(u);for(c=0;c<u;++c)0===(a=f.charCodeAt(c))?++h:i.putByte(a);u=h}return i.putByte(0),i.putBytes(t),i}function m(t,e,r,i){var o=Math.ceil(e.n.bitLength()/8),s=n.util.createBuffer(t),a=s.getByte(),u=s.getByte();if(0!==a||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=o-3-i;for(var h=0;h<c;++h)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++c}else if(2===u)for(c=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++c}if(0!==s.getByte()||c!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function w(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function v(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function E(t){return n.util.isNodejs&&"function"==typeof o[t]}function B(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.crypto&&"object"==typeof a.globalScope.crypto.subtle&&"function"==typeof a.globalScope.crypto.subtle[t]}function S(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.msCrypto&&"object"==typeof a.globalScope.msCrypto.subtle&&"function"==typeof a.globalScope.msCrypto.subtle[t]}function _(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}u.rsa.encrypt=function(t,e,r){var o,s=r,a=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,o=b(t,e,r)):(o=n.util.createBuffer()).putBytes(t);for(var u=new i(o.toHex(),16),c=g(u,e,s).toString(16),h=n.util.createBuffer(),f=a-Math.ceil(c.length/2);f>0;)h.putByte(0),--f;return h.putBytes(n.util.hexToBytes(c)),h.getBytes()},u.rsa.decrypt=function(t,e,r,o){var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=s,a}var u=new i(n.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=g(u,e,r).toString(16),h=n.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)h.putByte(0),--f;return h.putBytes(n.util.hexToBytes(c)),!1!==o?m(h.getBytes(),e,r):h.getBytes()},u.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var o,s=(r=r||{}).prng||n.random,a={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(o={algorithm:u,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(o.eInt),o},u.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,o=0,s=function(t,e){return t|e},a=+new Date,h=0;null===t.keys&&(e<=0||h<e);){if(0===t.state){var f=null===t.p?t.pBits:t.qBits,l=f-1;0===t.pqState?(t.num=new i(f,t.rng),t.num.testBit(l)||t.num.bitwiseTo(i.ONE.shiftLeft(l),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),o=0,++t.pqState):1===t.pqState?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(v(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[o++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var p=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)}}h+=(n=+new Date)-a,a=n}return null!==t.keys},u.rsa.generateKeyPair=function(t,e,r,c){if(1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(c=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(c=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,c=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(c=r,r=void 0):(c=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(c){if(E("generateKeyPair"))return o.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,r){if(t)return c(t);c(null,{privateKey:u.privateKeyFromPem(r),publicKey:u.publicKeyFromPem(e)})}));if(B("generateKey")&&B("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){c(t)})).then((function(t){if(t){var e=u.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(t)));c(null,{privateKey:e,publicKey:u.setRsaPublicKey(e.n,e.e)})}}));if(S("generateKey")&&S("exportKey")){var h=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return h.oncomplete=function(t){var e=t.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=u.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(e)));c(null,{privateKey:r,publicKey:u.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){c(t)}},void(h.onerror=function(t){c(t)})}}else if(E("generateKeyPairSync")){var f=o.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(f.privateKey),publicKey:u.publicKeyFromPem(f.publicKey)}}var l=u.rsa.createKeyPairGenerationState(t,e,r);if(!c)return u.rsa.stepKeyPairGenerationState(l,0),l.keys;!function(t,e,r){"function"==typeof e&&(r=e,e={});var o={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function s(){a(t.pBits,(function(e,n){return e?r(e):(t.p=n,null!==t.q?c(e,t.q):void a(t.qBits,c))}))}function a(t,e){n.prime.generateProbablePrime(t,o,e)}function c(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var o=t.p;t.p=t.q,t.q=o}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void s();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,c);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void s();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,c);var h=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,h,t.p,t.q,h.mod(t.p1),h.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(o.prng=e.prng),s()}(l,r,c)},u.setRsaPublicKey=u.rsa.setPublicKey=function(t,e){var r={n:t,e,encrypt:function(t,e,i){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return b(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var o=e.encode(t,r,!0);return u.rsa.encrypt(o,r,!0)},verify:function(t,e,i,o){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===o&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=m(e,r,!0);var i=s.fromDer(e,{parseAllBytes:o._parseAllDigestBytes}),a={},u=[];if(!s.validate(i,d,a,u))throw(c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,c;var c,h=s.derToOid(a.algorithmIdentifier);if(h!==n.oids.md2&&h!==n.oids.md5&&h!==n.oids.sha1&&h!==n.oids.sha224&&h!==n.oids.sha256&&h!==n.oids.sha384&&h!==n.oids.sha512&&h!==n.oids["sha512-224"]&&h!==n.oids["sha512-256"])throw(c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=h,c;if((h===n.oids.md2||h===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return t===m(e,r,!0)}});var a=u.rsa.decrypt(e,r,!0,!1);return i.verify(t,a,r.n.bitLength())}};return r},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(t,e,r,i,o,s,a,c){var h={n:t,e,d:r,p:i,q:o,dP:s,dQ:a,qInv:c,decrypt:function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=u.rsa.decrypt(t,h,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:m};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,h,!1)},sign:function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:y},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,h.n.bitLength());return u.rsa.encrypt(n,h,r)}};return h},u.wrapRsaPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(t).getBytes())])},u.privateKeyFromAsn1=function(t){var e,r,o,a,c,l,p,d,y={},g=[];if(s.validate(t,h,y,g)&&(t=s.fromDer(n.util.createBuffer(y.privateKey))),y={},g=[],!s.validate(t,f,y,g)){var b=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw b.errors=g,b}return e=n.util.createBuffer(y.privateKeyModulus).toHex(),r=n.util.createBuffer(y.privateKeyPublicExponent).toHex(),o=n.util.createBuffer(y.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(y.privateKeyPrime1).toHex(),c=n.util.createBuffer(y.privateKeyPrime2).toHex(),l=n.util.createBuffer(y.privateKeyExponent1).toHex(),p=n.util.createBuffer(y.privateKeyExponent2).toHex(),d=n.util.createBuffer(y.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new i(e,16),new i(r,16),new i(o,16),new i(a,16),new i(c,16),new i(l,16),new i(p,16),new i(d,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.qInv))])},u.publicKeyFromAsn1=function(t){var e={},r=[];if(s.validate(t,p,e,r)){var o,a=s.derToOid(e.publicKeyOid);if(a!==u.oids.rsaEncryption)throw(o=new Error("Cannot read public key. Unknown OID.")).oid=a,o;t=e.rsaPublicKey}if(r=[],!s.validate(t,l,e,r))throw(o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,o;var c=n.util.createBuffer(e.publicKeyModulus).toHex(),h=n.util.createBuffer(e.publicKeyExponent).toHex();return u.setRsaPublicKey(new i(c,16),new i(h,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(t)])])},u.publicKeyToRSAPublicKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.e))])}},137:(t,e,r)=>{var n=r(3832);r(8991),r(7116);var i=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),s=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var u=o.length;i.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=u[1],u[1]=u[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(o),a(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var u,c=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-c));for(var h=8*i.fullMessageLength[0],f=0;f<i.fullMessageLength.length-1;++f)h+=(u=8*i.fullMessageLength[f+1])/4294967296>>>0,s.putInt32(h>>>0),h=u>>>0;s.putInt32(h);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};a(l,r,s);var p=n.util.createBuffer();return p.putInt32(l.h0),p.putInt32(l.h1),p.putInt32(l.h2),p.putInt32(l.h3),p.putInt32(l.h4),p},i};var o=null,s=!1;function a(t,e,r){for(var n,i,o,s,a,u,c,h=r.length();h>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,u=t.h4,c=0;c<16;++c)n=r.getInt32(),e[c]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<20;++c)n=(n=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|n>>>31,e[c]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<32;++c)n=(n=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|n>>>31,e[c]=n,n=(i<<5|i>>>27)+(o^s^a)+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<40;++c)n=(n=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|n>>>30,e[c]=n,n=(i<<5|i>>>27)+(o^s^a)+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<60;++c)n=(n=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|n>>>30,e[c]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+u+2400959708+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<80;++c)n=(n=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|n>>>30,e[c]=n,n=(i<<5|i>>>27)+(o^s^a)+u+3395469782+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,h-=64}}},1668:(t,e,r)=>{var n=r(3832);r(8991),r(7116);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(o),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var a,c=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-c));for(var h=8*i.fullMessageLength[0],f=0;f<i.fullMessageLength.length-1;++f)h+=(a=8*i.fullMessageLength[f+1])/4294967296>>>0,s.putInt32(h>>>0),h=a>>>0;s.putInt32(h);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(l,r,s);var p=n.util.createBuffer();return p.putInt32(l.h0),p.putInt32(l.h1),p.putInt32(l.h2),p.putInt32(l.h3),p.putInt32(l.h4),p.putInt32(l.h5),p.putInt32(l.h6),p.putInt32(l.h7),p},i};var o=null,s=!1,a=null;function u(t,e,r){for(var n,i,o,s,u,c,h,f,l,p,d,y,g,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=((n=e[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=e[u-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(c=t.h0,h=t.h1,f=t.h2,l=t.h3,p=t.h4,d=t.h5,y=t.h6,g=t.h7,u=0;u<64;++u)o=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&h|f&(c^h),n=g+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(y^p&(d^y))+a[u]+e[u],g=y,y=d,d=p,p=l+n>>>0,l=f,f=h,h=c,c=n+(i=o+s)>>>0;t.h0=t.h0+c|0,t.h1=t.h1+h|0,t.h2=t.h2+f|0,t.h3=t.h3+l|0,t.h4=t.h4+p|0,t.h5=t.h5+d|0,t.h6=t.h6+y|0,t.h7=t.h7+g|0,b-=64}}},3219:(t,e,r)=>{var n=r(3832);r(8991),r(7116);var i=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var o=n.sha384=n.sha512.sha384=n.sha512.sha384||{};o.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=o,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(t){if(a||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===t&&(t="SHA-512"),!(t in c))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=c[t],r=null,i=n.util.createBuffer(),o=new Array(80),f=0;f<80;++f)o[f]=new Array(2);var l=64;switch(t){case"SHA-384":l=48;break;case"SHA-512/256":l=32;break;case"SHA-512/224":l=28}var p={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:l,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var t=p.messageLengthSize/4,o=0;o<t;++o)p.fullMessageLength.push(0);for(i=n.util.createBuffer(),r=new Array(e.length),o=0;o<e.length;++o)r[o]=e[o].slice(0);return p}};return p.start(),p.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var s=t.length;p.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=p.fullMessageLength.length-1;a>=0;--a)p.fullMessageLength[a]+=s[1],s[1]=s[0]+(p.fullMessageLength[a]/4294967296>>>0),p.fullMessageLength[a]=p.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return i.putBytes(t),h(r,o,i),(i.read>2048||0===i.length())&&i.compact(),p},p.digest=function(){var e=n.util.createBuffer();e.putBytes(i.bytes());var a,u=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;e.putBytes(s.substr(0,p.blockLength-u));for(var c=8*p.fullMessageLength[0],f=0;f<p.fullMessageLength.length-1;++f)c+=(a=8*p.fullMessageLength[f+1])/4294967296>>>0,e.putInt32(c>>>0),c=a>>>0;e.putInt32(c);var l=new Array(r.length);for(f=0;f<r.length;++f)l[f]=r[f].slice(0);h(l,o,e);var d,y=n.util.createBuffer();for(d="SHA-512"===t?l.length:"SHA-384"===t?l.length-2:l.length-4,f=0;f<d;++f)y.putInt32(l[f][0]),f===d-1&&"SHA-512/224"===t||y.putInt32(l[f][1]);return y},p};var s=null,a=!1,u=null,c=null;function h(t,e,r){for(var n,i,o,s,a,c,h,f,l,p,d,y,g,b,m,w,v,E,B,S,_,A,I,k,T,C,x,L,R,N,O,U,D,P=r.length();P>=128;){for(x=0;x<16;++x)e[x][0]=r.getInt32()>>>0,e[x][1]=r.getInt32()>>>0;for(;x<80;++x)n=(((L=(N=e[x-2])[0])>>>19|(R=N[1])<<13)^(R>>>29|L<<3)^L>>>6)>>>0,i=((L<<13|R>>>19)^(R<<3|L>>>29)^(L<<26|R>>>6))>>>0,o=(((L=(U=e[x-15])[0])>>>1|(R=U[1])<<31)^(L>>>8|R<<24)^L>>>7)>>>0,s=((L<<31|R>>>1)^(L<<24|R>>>8)^(L<<25|R>>>7))>>>0,O=e[x-7],D=e[x-16],R=i+O[1]+s+D[1],e[x][0]=n+O[0]+o+D[0]+(R/4294967296>>>0)>>>0,e[x][1]=R>>>0;for(d=t[0][0],y=t[0][1],g=t[1][0],b=t[1][1],m=t[2][0],w=t[2][1],v=t[3][0],E=t[3][1],B=t[4][0],S=t[4][1],_=t[5][0],A=t[5][1],I=t[6][0],k=t[6][1],T=t[7][0],C=t[7][1],x=0;x<80;++x)h=((B>>>14|S<<18)^(B>>>18|S<<14)^(S>>>9|B<<23))>>>0,f=(I^B&(_^I))>>>0,a=((d>>>28|y<<4)^(y>>>2|d<<30)^(y>>>7|d<<25))>>>0,c=((d<<4|y>>>28)^(y<<30|d>>>2)^(y<<25|d>>>7))>>>0,l=(d&g|m&(d^g))>>>0,p=(y&b|w&(y^b))>>>0,R=C+(((B<<18|S>>>14)^(B<<14|S>>>18)^(S<<23|B>>>9))>>>0)+((k^S&(A^k))>>>0)+u[x][1]+e[x][1],n=T+h+f+u[x][0]+e[x][0]+(R/4294967296>>>0)>>>0,i=R>>>0,o=a+l+((R=c+p)/4294967296>>>0)>>>0,s=R>>>0,T=I,C=k,I=_,k=A,_=B,A=S,B=v+n+((R=E+i)/4294967296>>>0)>>>0,S=R>>>0,v=m,E=w,m=g,w=b,g=d,b=y,d=n+o+((R=i+s)/4294967296>>>0)>>>0,y=R>>>0;R=t[0][1]+y,t[0][0]=t[0][0]+d+(R/4294967296>>>0)>>>0,t[0][1]=R>>>0,R=t[1][1]+b,t[1][0]=t[1][0]+g+(R/4294967296>>>0)>>>0,t[1][1]=R>>>0,R=t[2][1]+w,t[2][0]=t[2][0]+m+(R/4294967296>>>0)>>>0,t[2][1]=R>>>0,R=t[3][1]+E,t[3][0]=t[3][0]+v+(R/4294967296>>>0)>>>0,t[3][1]=R>>>0,R=t[4][1]+S,t[4][0]=t[4][0]+B+(R/4294967296>>>0)>>>0,t[4][1]=R>>>0,R=t[5][1]+A,t[5][0]=t[5][0]+_+(R/4294967296>>>0)>>>0,t[5][1]=R>>>0,R=t[6][1]+k,t[6][0]=t[6][0]+I+(R/4294967296>>>0)>>>0,t[6][1]=R>>>0,R=t[7][1]+C,t[7][0]=t[7][0]+T+(R/4294967296>>>0)>>>0,t[7][1]=R>>>0,P-=128}}},7116:(t,e,r)=>{var n=r(3832),i=r(8807),o=t.exports=n.util=n.util||{};function s(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function a(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(o.isArrayBuffer(t)||o.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof a||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return o.nextTick=process.nextTick,void("function"==typeof setImmediate?o.setImmediate=setImmediate:o.setImmediate=o.nextTick);if("function"==typeof setImmediate)return o.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(o.nextTick=function(t){return setImmediate(t)});if(o.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];o.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach((function(t){t()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,i=document.createElement("div");e=[],new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(i,{attributes:!0});var s=o.setImmediate;o.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),s(t)):(e.push(t),1===e.length&&i.setAttribute("a",n=!n))}}o.nextTick=o.setImmediate}(),o.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,o.globalScope=o.isNodejs?r.g:"undefined"==typeof self?window:self,o.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},o.isArrayBufferView=function(t){return t&&o.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},o.ByteBuffer=a,o.ByteStringBuffer=a,o.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},o.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},o.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},o.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},o.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},o.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},o.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(o.encodeUtf8(t))},o.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},o.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},o.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},o.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},o.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},o.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},o.ByteStringBuffer.prototype.putInt=function(t,e){s(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},o.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},o.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},o.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},o.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},o.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},o.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},o.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},o.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},o.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},o.ByteStringBuffer.prototype.getInt=function(t){s(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},o.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},o.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},o.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},o.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},o.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},o.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},o.ByteStringBuffer.prototype.copy=function(){var t=o.createBuffer(this.data);return t.read=this.read,t},o.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},o.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},o.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},o.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},o.ByteStringBuffer.prototype.toString=function(){return o.decodeUtf8(this.bytes())},o.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=o.isArrayBuffer(t),n=o.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},o.DataBuffer.prototype.length=function(){return this.write-this.read},o.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},o.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},o.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},o.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},o.DataBuffer.prototype.putBytes=function(t,e){if(o.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(o.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof o.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&o.isArrayBufferView(t.data))return n=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(t instanceof o.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var i;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.hex.decode(t,i,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.base64.decode(t,i,this.write),this;if("utf8"===e&&(t=o.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.raw.decode(i),this;if("utf16"===e)return this.accommodate(2*t.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=o.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},o.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},o.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},o.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},o.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},o.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},o.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},o.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},o.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},o.DataBuffer.prototype.putInt=function(t,e){s(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},o.DataBuffer.prototype.putSignedInt=function(t,e){return s(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},o.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},o.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},o.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},o.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},o.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},o.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},o.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},o.DataBuffer.prototype.getInt=function(t){s(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},o.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},o.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},o.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},o.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},o.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},o.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},o.DataBuffer.prototype.copy=function(){return new o.DataBuffer(this)},o.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},o.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},o.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},o.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},o.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return o.binary.raw.encode(e);if("hex"===t)return o.binary.hex.encode(e);if("base64"===t)return o.binary.base64.encode(e);if("utf8"===t)return o.text.utf8.decode(e);if("utf16"===t)return o.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},o.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=o.encodeUtf8(t)),new o.ByteBuffer(t)},o.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},o.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+o},o.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},o.bytesToHex=function(t){return o.createBuffer(t).toHex()},o.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],h="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";o.encode64=function(t,e){for(var r,n,i,o="",s="",a=0;a<t.length;)r=t.charCodeAt(a++),n=t.charCodeAt(a++),i=t.charCodeAt(a++),o+=u.charAt(r>>2),o+=u.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=u.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":u.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+o},o.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,o="",s=0;s<t.length;)e=c[t.charCodeAt(s++)-43],r=c[t.charCodeAt(s++)-43],n=c[t.charCodeAt(s++)-43],i=c[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},o.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},o.decodeUtf8=function(t){return decodeURIComponent(escape(t))},o.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},o.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},o.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},o.binary.hex.encode=o.bytesToHex,o.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var i=0,o=r=r||0;for(1&t.length&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n},o.binary.base64.encode=function(t,e){for(var r,n,i,o="",s="",a=0;a<t.byteLength;)r=t[a++],n=t[a++],i=t[a++],o+=u.charAt(r>>2),o+=u.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=u.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":u.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+o},o.binary.base64.decode=function(t,e,r){var n,i,o,s,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,h=r=r||0;u<t.length;)n=c[t.charCodeAt(u++)-43],i=c[t.charCodeAt(u++)-43],o=c[t.charCodeAt(u++)-43],s=c[t.charCodeAt(u++)-43],a[h++]=n<<2|i>>4,64!==o&&(a[h++]=(15&i)<<4|o>>2,64!==s&&(a[h++]=(3&o)<<6|s));return e?h-r:a.subarray(0,h)},o.binary.base58.encode=function(t,e){return o.binary.baseN.encode(t,h,e)},o.binary.base58.decode=function(t,e){return o.binary.baseN.decode(t,h,e)},o.text={utf8:{},utf16:{}},o.text.utf8.encode=function(t,e,r){t=o.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n},o.text.utf8.decode=function(t){return o.decodeUtf8(String.fromCharCode.apply(null,t))},o.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var i=new Uint16Array(n.buffer),o=r=r||0,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n},o.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},o.deflate=function(t,e,r){if(e=o.decode64(t.deflate(o.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},o.inflate=function(t,e,r){var n=t.inflate(o.encode64(e)).rval;return null===n?null:o.decode64(n)};var f=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=o.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},l=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(o.decode64(r))),r},p=function(t,e,r,n){var i=l(t,e);null===i&&(i={}),i[r]=n,f(t,e,i)},d=function(t,e,r){var n=l(t,e);return null!==n&&(n=r in n?n[r]:null),n},y=function(t,e,r){var n=l(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),f(t,e,n)}},g=function(t,e){f(t,e,null)},b=function(t,e,r){var n,i=null;void 0===r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),o="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),o=!0)}catch(t){s=t}if(o)break}if(!o)throw s;return i};o.setItem=function(t,e,r,n,i){b(p,arguments,i)},o.getItem=function(t,e,r,n){return b(d,arguments,n)},o.removeItem=function(t,e,r,n){b(y,arguments,n)},o.clearItems=function(t,e,r){b(g,arguments,r)},o.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},o.format=function(t){for(var e,r,n=/%./g,i=0,o=[],s=0;e=n.exec(t);){(r=t.substring(s,n.lastIndex-2)).length>0&&o.push(r),s=n.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")},o.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=void 0===r?",":r,a=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",h=c.length>3?c.length%3:0;return u+(h?c.substr(0,h)+a:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")},o.formatSize=function(t){return t>=1073741824?o.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?o.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?o.formatNumber(t/1024,0)+" KiB":o.formatNumber(t,0)+" bytes"},o.bytesFromIP=function(t){return-1!==t.indexOf(".")?o.bytesFromIPv4(t):-1!==t.indexOf(":")?o.bytesFromIPv6(t):null},o.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=o.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},o.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),n=o.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var s=o.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},o.bytesToIP=function(t){return 4===t.length?o.bytesToIPv4(t):16===t.length?o.bytesToIPv6(t):null},o.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},o.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=o.bytesToHex(t[i]+t[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=r[r.length-1],u=e.length;a&&u===a.end+1?(a.end=u,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},o.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in o&&!t.update)return e(null,o.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return o.cores=navigator.hardwareConcurrency,e(null,o.cores);if("undefined"==typeof Worker)return o.cores=1,e(null,o.cores);if("undefined"==typeof Blob)return o.cores=2,e(null,o.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function t(n,i,s){if(0===i){var a=Math.floor(n.reduce((function(t,e){return t+e}),0)/n.length);return o.cores=Math.max(1,a),URL.revokeObjectURL(r),e(null,o.cores)}!function(t,e){for(var n=[],i=[],o=0;o<t;++o){var s=new Worker(r);s.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var o=0;o<t;++o)n[o].terminate();e(0,i)}})),n.push(s)}for(o=0;o<t;++o)n[o].postMessage(o)}(s,(function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],o=r[n]=[],s=0;s<t;++s)if(n!==s){var a=e[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}(s,r)),t(n,i-1,s)}))}([],5,16)}},1408:(t,e,r)=>{"use strict";t.exports=u;var n,i=r(9693),o=i.LongBits,s=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c,h="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},f=function(){return i.Buffer?function(t){return(u.create=function(t){return i.Buffer.isBuffer(t)?new n(t):h(t)})(t)}:h};function l(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=f(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,r);if(e===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,r)},u.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){n=t,u.create=f(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return l.call(this)[e](!1)},uint64:function(){return l.call(this)[e](!0)},sint64:function(){return l.call(this).zzDecode()[e](!1)},fixed64:function(){return d.call(this)[e](!0)},sfixed64:function(){return d.call(this)[e](!1)}})}},7248:(t,e,r)=>{"use strict";t.exports=o;var n=r(1408);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(9693);function o(t){n.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},1945:(t,e,r)=>{"use strict";t.exports=i;var n=r(9693);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===s?o:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},9693:function(t,e,r){"use strict";var n=e;function i(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function o(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}n.asPromise=r(4537),n.base64=r(7419),n.EventEmitter=r(9211),n.float=r(945),n.inquire=r(7199),n.utf8=r(4997),n.pool=r(6662),n.LongBits=r(1945),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:(t,e,r)=>{"use strict";t.exports=f;var n,i=r(9693),o=i.LongBits,s=i.base64,a=i.utf8;function u(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function c(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var l=function(){return i.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function p(t,e,r){e[r]=255&t}function d(t,e){this.len=t,this.next=void 0,this.val=e}function y(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function g(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}f.create=l(),f.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(f.alloc=i.pool(f.alloc,i.Array.prototype.subarray)),f.prototype._push=function(t,e,r){return this.tail=this.tail.next=new u(t,e,r),this.len+=e,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},f.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new d((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},f.prototype.int32=function(t){return t<0?this._push(y,10,o.fromNumber(t)):this.uint32(t)},f.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},f.prototype.uint64=function(t){var e=o.from(t);return this._push(y,e.length(),e)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(y,e.length(),e)},f.prototype.bool=function(t){return this._push(p,1,t?1:0)},f.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(t){var e=o.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},f.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var b=i.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};f.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(i.isString(t)){var r=f.alloc(e=s.length(t));s.decode(t,r,0),t=r}return this.uint32(e)._push(b,e,t)},f.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},f.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},f._configure=function(t){n=t,f.create=l(),n._configure()}},3155:(t,e,r)=>{"use strict";t.exports=o;var n=r(1173);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(9693);function o(){n.call(this)}function s(t,e,r){t.length<40?i.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},o._configure()},4375:(t,e,r)=>{let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):t=>(n||(n=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))},2916:(t,e,r)=>{"use strict";const n=r(1807);class i{constructor(t,e,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=e,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,t.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,e)}reschedule(t){t||(t=this._scheduled);const e=n();e+t-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(t)):this._triggered?this._schedule(t):(this._started=e,this._rescheduled=t)}_schedule(t){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=t,this._timer=setTimeout(this._timerWrapper,t)}clear(){clearTimeout(this._timer)}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new i(arguments[0],arguments[1],t)}},1807:t=>{"use strict";t.exports=function(){return Date.now()}},9967:(t,e,r)=>{t.exports=function(t,e,r){if("number"!=typeof e)throw new Error("second argument must be a Number");let i,o,s,a,u,c,h=!0;function f(t){function e(){r&&r(t,i),r=null}h?n(e):e()}function l(e,r,n){if(i[e]=n,r&&(u=!0),0==--s||r)f(r);else if(!u&&c<o){let e;a?(e=a[c],c+=1,t[e]((function(t,r){l(e,t,r)}))):(e=c,c+=1,t[e]((function(t,r){l(e,t,r)})))}}Array.isArray(t)?(i=[],s=o=t.length):(a=Object.keys(t),i={},s=o=a.length),c=e,s?a?a.some((function(r,n){return t[r]((function(t,e){l(r,t,e)})),n===e-1})):t.some((function(t,r){return t((function(t,e){l(r,t,e)})),r===e-1})):f(null),h=!1};const n=r(4375)},715:(t,e,r)=>{"use strict";const{AbortController:n}=globalThis,i=r(2916);class o extends n{constructor(t){super(),this._ms=t,this._timer=i((()=>this.abort()),t),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}t.exports={TimeoutController:o}},5819:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ComposedStorage:()=>An,Database:()=>Rn,DefaultAccessController:()=>Sn,Documents:()=>Dn,Entry:()=>ln,Events:()=>Mn,IPFSAccessController:()=>cu,IPFSBlockStorage:()=>In,Identities:()=>Za,KeyStore:()=>Da,KeyValue:()=>qn,KeyValueIndexed:()=>Fn,LRUStorage:()=>xn,LevelStorage:()=>Tn,Log:()=>_n,MemoryStorage:()=>pn,OrbitDBAccessController:()=>lu,PublicKeyIdentityProvider:()=>Ha,createOrbitDB:()=>gu,isIdentity:()=>qa,isValidAddress:()=>Qa,parseAddress:()=>Ja,useAccessController:()=>du,useDatabaseType:()=>$n,useIdentityProvider:()=>Wa});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{base32:()=>xt,base32hex:()=>Ot,base32hexpad:()=>Dt,base32hexpadupper:()=>Pt,base32hexupper:()=>Ut,base32pad:()=>Rt,base32padupper:()=>Nt,base32upper:()=>Lt,base32z:()=>Kt});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{base58btc:()=>Mt,base58flickr:()=>Vt});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{code:()=>tn,decode:()=>rn,encode:()=>en,name:()=>Xr});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{sha256:()=>on,sha512:()=>sn});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{base10:()=>Yn});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{base16:()=>Zn,base16upper:()=>Qn});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{base2:()=>Jn});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{base256emoji:()=>ri});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{base36:()=>ni,base36upper:()=>ii});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{base64:()=>oi,base64pad:()=>si,base64url:()=>ai,base64urlpad:()=>ui});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{base8:()=>ci});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{identity:()=>hi});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{code:()=>di,decode:()=>gi,encode:()=>yi,name:()=>pi});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{code:()=>mi,decode:()=>vi,encode:()=>wi,name:()=>bi});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{identity:()=>Bi});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{dQ:()=>wo,ci:()=>co,bytesToNumberBE:()=>lo,ty:()=>po,eV:()=>mo,n$:()=>Bo,ql:()=>bo,hexToBytes:()=>fo,tL:()=>yo,S5:()=>go,FF:()=>_o});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{Ed25519PrivateKey:()=>Ns,Ed25519PublicKey:()=>Rs,generateKeyPair:()=>Ds,generateKeyPairFromSeed:()=>Ps,unmarshalEd25519PrivateKey:()=>Os,unmarshalEd25519PublicKey:()=>Us});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{MAX_KEY_SIZE:()=>Gs,RsaPrivateKey:()=>Ys,RsaPublicKey:()=>Ws,fromJwk:()=>Js,generateKeyPair:()=>Xs,unmarshalRsaPrivateKey:()=>Zs,unmarshalRsaPublicKey:()=>Qs});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{Secp256k1PrivateKey:()=>Aa,Secp256k1PublicKey:()=>_a,generateKeyPair:()=>Ta,unmarshalSecp256k1PrivateKey:()=>Ia,unmarshalSecp256k1PublicKey:()=>ka});var w=__webpack_require__(7187),v=__webpack_require__(6729);class E extends Error{constructor(t){super(t),this.name="TimeoutError"}}class B extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const S=t=>void 0===globalThis.DOMException?new B(t):new DOMException(t),_=t=>{const e=void 0===t.reason?S("This operation was aborted."):t.reason;return e instanceof Error?e:S(e)};var A,I=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};A=new WeakMap;const k=class{constructor(){A.set(this,[])}enqueue(t,e){const r={priority:(e={priority:0,...e}).priority,run:t};if(this.size&&I(this,A,"f")[this.size-1].priority>=e.priority)return void I(this,A,"f").push(r);const n=function(t,e,r){let n=0,i=t.length;for(;i>0;){const r=Math.trunc(i/2);let s=n+r;o=t[s],e.priority-o.priority<=0?(n=++s,i-=r+1):i=r}var o;return n}(I(this,A,"f"),r);I(this,A,"f").splice(n,0,r)}dequeue(){const t=I(this,A,"f").shift();return null==t?void 0:t.run}filter(t){return I(this,A,"f").filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return I(this,A,"f").length}};var T,C,x,L,R,N,O,U,D,P,K,M,V,j,q,z,F,H,$,G,W,Y,Z,Q,J,X,tt=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},et=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class rt extends Error{}C=new WeakMap,x=new WeakMap,L=new WeakMap,R=new WeakMap,N=new WeakMap,O=new WeakMap,U=new WeakMap,D=new WeakMap,P=new WeakMap,K=new WeakMap,M=new WeakMap,V=new WeakMap,j=new WeakMap,q=new WeakMap,T=new WeakSet,z=function(){return et(this,x,"f")||et(this,L,"f")<et(this,R,"f")},F=function(){return et(this,M,"f")<et(this,V,"f")},H=function(){var t;tt(this,M,(t=et(this,M,"f"),--t),"f"),et(this,T,"m",W).call(this),this.emit("next")},$=function(){et(this,T,"m",Z).call(this),et(this,T,"m",Y).call(this),tt(this,D,void 0,"f")},G=function(){const t=Date.now();if(void 0===et(this,U,"f")){const e=et(this,O,"f")-t;if(!(e<0))return void 0===et(this,D,"f")&&tt(this,D,setTimeout((()=>{et(this,T,"m",$).call(this)}),e),"f"),!0;tt(this,L,et(this,C,"f")?et(this,M,"f"):0,"f")}return!1},W=function(){if(0===et(this,P,"f").size)return et(this,U,"f")&&clearInterval(et(this,U,"f")),tt(this,U,void 0,"f"),this.emit("empty"),0===et(this,M,"f")&&this.emit("idle"),!1;if(!et(this,j,"f")){const t=!et(this,T,"a",G);if(et(this,T,"a",z)&&et(this,T,"a",F)){const e=et(this,P,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&et(this,T,"m",Y).call(this),!0)}}return!1},Y=function(){et(this,x,"f")||void 0!==et(this,U,"f")||(tt(this,U,setInterval((()=>{et(this,T,"m",Z).call(this)}),et(this,N,"f")),"f"),tt(this,O,Date.now()+et(this,N,"f"),"f"))},Z=function(){0===et(this,L,"f")&&0===et(this,M,"f")&&et(this,U,"f")&&(clearInterval(et(this,U,"f")),tt(this,U,void 0,"f")),tt(this,L,et(this,C,"f")?et(this,M,"f"):0,"f"),et(this,T,"m",Q).call(this)},Q=function(){for(;et(this,T,"m",W).call(this););},J=async function(t){return new Promise(((e,r)=>{t.addEventListener("abort",(()=>{r(new rt("The task was aborted."))}),{once:!0})}))},X=async function(t,e){return new Promise((r=>{const n=()=>{e&&!e()||(this.off(t,n),r())};this.on(t,n)}))};const nt=class extends v{constructor(t){var e,r,n,i;if(super(),T.add(this),C.set(this,void 0),x.set(this,void 0),L.set(this,0),R.set(this,void 0),N.set(this,void 0),O.set(this,0),U.set(this,void 0),D.set(this,void 0),P.set(this,void 0),K.set(this,void 0),M.set(this,0),V.set(this,void 0),j.set(this,void 0),q.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:k,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==r?r:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);tt(this,C,t.carryoverConcurrencyCount,"f"),tt(this,x,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),tt(this,R,t.intervalCap,"f"),tt(this,N,t.interval,"f"),tt(this,P,new t.queueClass,"f"),tt(this,K,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,tt(this,q,!0===t.throwOnTimeout,"f"),tt(this,j,!1===t.autoStart,"f")}get concurrency(){return et(this,V,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);tt(this,V,t,"f"),et(this,T,"m",Q).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:et(this,q,"f"),...e},new Promise(((r,n)=>{et(this,P,"f").enqueue((async()=>{var i,o,s;tt(this,M,(o=et(this,M,"f"),++o),"f"),tt(this,L,(s=et(this,L,"f"),++s),"f");try{if(null===(i=e.signal)||void 0===i?void 0:i.aborted)throw new rt("The task was aborted.");let n=t({signal:e.signal});e.timeout&&(n=function(t,e,r,n){let i;const o=new Promise(((o,s)=>{if("number"!=typeof e||1!==Math.sign(e))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e!==Number.POSITIVE_INFINITY){if((n={customTimers:{setTimeout,clearTimeout},...n}).signal){const{signal:t}=n;t.aborted&&s(_(t)),t.addEventListener("abort",(()=>{s(_(t))}))}i=n.customTimers.setTimeout.call(void 0,(()=>{const n=r instanceof Error?r:new E(`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),s(n)}),e),(async()=>{try{o(await t)}catch(t){s(t)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()}else o(t)}));return o.clear=()=>{clearTimeout(i),i=void 0},o}(Promise.resolve(n),e.timeout)),e.signal&&(n=Promise.race([n,et(this,T,"m",J).call(this,e.signal)]));const o=await n;r(o),this.emit("completed",o)}catch(t){if(t instanceof E&&!e.throwOnTimeout)return void r();n(t),this.emit("error",t)}finally{et(this,T,"m",H).call(this)}}),e),this.emit("add"),et(this,T,"m",W).call(this)}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return et(this,j,"f")?(tt(this,j,!1,"f"),et(this,T,"m",Q).call(this),this):this}pause(){tt(this,j,!0,"f")}clear(){tt(this,P,new(et(this,K,"f")),"f")}async onEmpty(){0!==et(this,P,"f").size&&await et(this,T,"m",X).call(this,"empty")}async onSizeLessThan(t){et(this,P,"f").size<t||await et(this,T,"m",X).call(this,"next",(()=>et(this,P,"f").size<t))}async onIdle(){0===et(this,M,"f")&&0===et(this,P,"f").size||await et(this,T,"m",X).call(this,"idle")}get size(){return et(this,P,"f").size}sizeBy(t){return et(this,P,"f").filter(t).length}get pending(){return et(this,M,"f")}get isPaused(){return et(this,j,"f")}};function it(){const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t}class ot{buffer;mask;top;btm;next;constructor(t){if(!(t>0)||0!=(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class st{size;hwm;head;tail;constructor(t={}){this.hwm=t.splitLimit??16,this.head=new ot(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return null!=t?.byteLength?t.byteLength:1}push(t){if(null!=t?.value&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){const e=this.head;this.head=e.next=new ot(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=t?.value&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}class at extends Error{type;code;constructor(t,e){super(t??"The operation was aborted"),this.type="aborted",this.code=e??"ABORT_ERR"}}function ut(t={}){return function(t,e){let r,n,i,o=(e=e??{}).onEnd,s=new st,a=it();const u=t=>null!=n?n(t):(s.push(t),r),c=t=>{if(i)return r;if(!0!==e?.objectMode&&null==t?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:t})},h=t=>i?r:(i=!0,null!=t?(t=>(s=new st,null!=n?n({error:t}):(s.push({error:t}),r)))(t):u({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:async()=>{try{return s.isEmpty()?i?{done:!0}:await new Promise(((e,i)=>{n=o=>{n=null,s.push(o);try{e(t(s))}catch(t){i(t)}return r}})):t(s)}finally{s.isEmpty()&&queueMicrotask((()=>{a.resolve(),a=it()}))}},return:()=>(s=new st,h(),{done:!0}),throw:t=>(h(t),{done:!0}),push:c,end:h,get readableLength(){return s.size},onEmpty:async t=>{const e=t?.signal;if(e?.throwIfAborted(),s.isEmpty())return;let r,n;null!=e&&(r=new Promise(((t,r)=>{n=()=>{r(new at)},e.addEventListener("abort",n)})));try{await Promise.race([a.promise,r])}finally{null!=n&&null!=e&&e?.removeEventListener("abort",n)}}},null==o)return r;const f=r;return r={[Symbol.asyncIterator](){return this},next:()=>f.next(),throw:t=>(f.throw(t),null!=o&&(o(t),o=void 0),{done:!0}),return:()=>(f.return(),null!=o&&(o(),o=void 0),{done:!0}),push:c,end:t=>(f.end(t),null!=o&&(o(t),o=void 0),r),get readableLength(){return f.readableLength}},r}((t=>{const e=t.shift();if(null==e)return{done:!0};if(null!=e.error)throw e.error;return{done:!0===e.done,value:e.value}}),t)}function ct(t,...e){if(null==t)throw new Error("Empty pipeline");if(pt(t)){const e=t;t=()=>e.source}else if(lt(t)||ft(t)){const e=t;t=()=>e}const r=[t,...e];if(r.length>1&&pt(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let t=1;t<r.length-1;t++)pt(r[t])&&(r[t]=dt(r[t]));return ht(...r)}const ht=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},ft=t=>null!=t?.[Symbol.asyncIterator],lt=t=>null!=t?.[Symbol.iterator],pt=t=>null!=t&&null!=t.sink&&null!=t.source,dt=t=>e=>{const r=t.sink(e);if(null!=r?.then){const e=ut({objectMode:!0});let n;r.then((()=>{e.end()}),(t=>{e.end(t)}));const i=t.source;if(ft(i))n=async function*(){yield*i,e.end()};else{if(!lt(i))throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");n=function*(){yield*i,e.end()}}return function(...t){const e=[];for(const r of t)null==r[Symbol.asyncIterator]&&e.push(r);return e.length===t.length?function*(){for(const t of e)yield*t}():async function*(){const e=ut({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(t.map((async t=>{for await(const r of t)e.push(r)}))),e.end()}catch(t){e.end(t)}})),yield*e}()}(e,n())}return t.source};var yt=__webpack_require__(715);const gt=(...t)=>t.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",bt=gt;var mt=__webpack_require__(7117);const wt=(t,e)=>({id:t,time:e=e||0}),vt=(new Uint8Array(0),t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")});const Et=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var n=0,i=0;t[e]===u;)n++,e++;for(var o=(t.length-e)*c+1>>>0,s=new Uint8Array(o);t[e];){var h=r[t.charCodeAt(e)];if(255===h)return;for(var f=0,l=o-1;(0!==h||f<i)&&-1!==l;l--,f++)h+=a*s[l]>>>0,s[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=f,e++}if(" "!==t[e]){for(var p=o-i;p!==o&&0===s[p];)p++;for(var d=new Uint8Array(n+(o-p)),y=n;p!==o;)d[y++]=s[p++];return d}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var s=(o-i)*h+1>>>0,c=new Uint8Array(s);i!==o;){for(var f=e[i],l=0,p=s-1;(0!==f||l<n)&&-1!==p;p--,l++)f+=256*c[p]>>>0,c[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");n=l,i++}for(var d=s-n;d!==s&&0===c[d];)d++;for(var y=u.repeat(r);d<s;++d)y+=t.charAt(c[d]);return y},decodeUnsafe:f,decode:function(t){var r=f(t);if(r)return r;throw new Error(`Non-${e} character`)}}};class Bt{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class St{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return At(this,t)}}class _t{constructor(t){this.decoders=t}or(t){return At(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const At=(t,e)=>new _t({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class It{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new Bt(t,e,r),this.decoder=new St(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const kt=({name:t,prefix:e,encode:r,decode:n})=>new It(t,e,r,n),Tt=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Et(r,e);return kt({prefix:t,name:e,encode:n,decode:t=>vt(i(t))})},Ct=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>kt({prefix:e,name:t,encode:t=>((t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<t.length;++n)for(a=a<<8|t[n],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(t,n,r),decode:e=>((t,e,r,n)=>{const i={};for(let t=0;t<e.length;++t)i[e[t]]=t;let o=t.length;for(;"="===t[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,u=0,c=0;for(let e=0;e<o;++e){const o=i[t[e]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);u=u<<r|o,a+=r,a>=8&&(a-=8,s[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s})(e,n,r,t)}),xt=Ct({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lt=Ct({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rt=Ct({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nt=Ct({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ot=Ct({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ut=Ct({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dt=Ct({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pt=Ct({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Kt=Ct({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Mt=Tt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Vt=Tt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jt=128,qt=-128,zt=Math.pow(2,31),Ft=128,Ht=127,$t=Math.pow(2,7),Gt=Math.pow(2,14),Wt=Math.pow(2,21),Yt=Math.pow(2,28),Zt=Math.pow(2,35),Qt=Math.pow(2,42),Jt=Math.pow(2,49),Xt=Math.pow(2,56),te=Math.pow(2,63);const ee={encode:function t(e,r,n){r=r||[];for(var i=n=n||0;e>=zt;)r[n++]=255&e|jt,e/=128;for(;e&qt;)r[n++]=255&e|jt,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},decode:function t(e,r){var n,i=0,o=0,s=r=r||0,a=e.length;do{if(s>=a)throw t.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=o<28?(n&Ht)<<o:(n&Ht)*Math.pow(2,o),o+=7}while(n>=Ft);return t.bytes=s-r,i},encodingLength:function(t){return t<$t?1:t<Gt?2:t<Wt?3:t<Yt?4:t<Zt?5:t<Qt?6:t<Jt?7:t<Xt?8:t<te?9:10}},re=(t,e=0)=>[ee.decode(t,e),ee.decode.bytes],ne=(t,e,r=0)=>(ee.encode(t,e,r),e),ie=t=>ee.encodingLength(t),oe=(t,e)=>{const r=e.byteLength,n=ie(t),i=n+ie(r),o=new Uint8Array(i+r);return ne(t,o,0),ne(r,o,n),o.set(e,i),new se(t,r,e,o)};class se{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}const ae=(t,e)=>{const{bytes:r,version:n}=t;return 0===n?le(r,ce(t),e||Mt.encoder):pe(r,ce(t),e||xt.encoder)},ue=new WeakMap,ce=t=>{const e=ue.get(t);if(null==e){const e=new Map;return ue.set(t,e),e}return e};class he{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:e}=this;if(t!==de)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==ye)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return he.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,r=oe(t,e);return he.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return he.equals(this,t)}static equals(t,e){const r=e;return r&&t.code===r.code&&t.version===r.version&&((t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&((t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0})(t.bytes,r.bytes)}})(t.multihash,r.multihash)}toString(t){return ae(this,t)}toJSON(){return{"/":ae(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const e=t;if(e instanceof he)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new he(t,r,n,i||ge(t,r,n.bytes))}if(!0===e[be]){const{version:t,multihash:r,code:n}=e,i=(t=>{const e=vt(t),[r,n]=re(e),[i,o]=re(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new se(r,i,s,e)})(r);return he.create(t,n,i)}return null}static create(t,e,r){if("number"!=typeof e)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(e!==de)throw new Error(`Version 0 CID must use dag-pb (code: ${de}) block encoding`);return new he(t,e,r,r.bytes);case 1:{const n=ge(t,e,r.bytes);return new he(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return he.create(0,de,t)}static createV1(t,e){return he.create(1,t,e)}static decode(t){const[e,r]=he.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=he.inspectBytes(t),r=e.size-e.multihashSize,n=vt(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const i=n.subarray(e.multihashSize-e.digestSize),o=new se(e.multihashCode,e.digestSize,i,n);return[0===e.version?he.createV0(o):he.createV1(e.codec,o),t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[r,n]=re(t.subarray(e));return e+=n,r};let n=r(),i=de;if(18===n?(n=0,e=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const o=e,s=r(),a=r(),u=e+a;return{version:n,codec:i,multihashCode:s,digestSize:a,multihashSize:u-o,size:u}}static parse(t,e){const[r,n]=fe(t,e),i=he.decode(n);if(0===i.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return ce(i).set(r,t),i}}const fe=(t,e)=>{switch(t[0]){case"Q":{const r=e||Mt;return[Mt.prefix,r.decode(`${Mt.prefix}${t}`)]}case Mt.prefix:{const r=e||Mt;return[Mt.prefix,r.decode(t)]}case xt.prefix:{const r=e||xt;return[xt.prefix,r.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},le=(t,e,r)=>{const{prefix:n}=r;if(n!==Mt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(null==i){const i=r.encode(t).slice(1);return e.set(n,i),i}return i},pe=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(null==i){const i=r.encode(t);return e.set(n,i),i}return i},de=112,ye=18,ge=(t,e,r)=>{const n=ie(t),i=n+ie(e),o=new Uint8Array(i+r.byteLength);return ne(t,o,0),ne(e,o,n),o.set(r,i),o},be=Symbol.for("@ipld/js-cid/CID"),me=({name:t,code:e,encode:r})=>new we(t,e,r);class we{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?oe(this.code,e):e.then((t=>oe(this.code,t)))}throw Error("Unknown type, must be binary type")}}function ve({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*Ee(t,e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))for(const[r,n]of e.entries()){const e=[...t,r],i=he.asCID(n);i?yield[e.join("/"),i]:"object"==typeof n&&(yield*Be(n,e))}else{const r=he.asCID(e);r?yield[t.join("/"),r]:yield*Be(e,t)}}function*Be(t,e){if(null==t||t instanceof Uint8Array)return;const r=he.asCID(t);r&&(yield[e.join("/"),r]);for(const[r,n]of Object.entries(t)){const t=[...e,r];yield*Ee(t,n)}}function*Se(t,e){if(Array.isArray(e))for(const[r,n]of e.entries()){const e=[...t,r];yield e.join("/"),"object"!=typeof n||he.asCID(n)||(yield*_e(n,e))}else yield*_e(e,t)}function*_e(t,e){if(null!=t&&"object"==typeof t)for(const[r,n]of Object.entries(t)){const t=[...e,r];yield t.join("/"),null==n||n instanceof Uint8Array||"object"!=typeof n||he.asCID(n)||(yield*Se(t,n))}}class Ae{constructor({cid:t,bytes:e,value:r}){if(!t||!e||void 0===r)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:ve(),bytes:ve(),value:ve(),asBlock:ve()})}links(){return Be(this.value,[])}tree(){return _e(this.value,[])}get(t="/"){return function(t,e){let r=t;for(const[t,n]of e.entries()){if(r=r[n],null==r)throw new Error(`Object has no property at ${e.slice(0,t+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const i=he.asCID(r);if(i)return{value:i,remaining:e.slice(t+1).join("/")}}return{value:r}}(this.value,t.split("/").filter(Boolean))}}async function Ie({value:t,codec:e,hasher:r}){if(void 0===t)throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),i=await r.digest(n),o=he.create(1,e.code,i);return new Ae({value:t,bytes:n,cid:o})}async function ke({bytes:t,codec:e,hasher:r}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.decode(t),i=await r.digest(t),o=he.create(1,e.code,i);return new Ae({value:n,bytes:t,cid:o})}const Te=["string","number","bigint","symbol"],Ce=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class xe{constructor(t,e,r){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}xe.uint=new xe(0,"uint",!0),xe.negint=new xe(1,"negint",!0),xe.bytes=new xe(2,"bytes",!0),xe.string=new xe(3,"string",!0),xe.array=new xe(4,"array",!1),xe.map=new xe(5,"map",!1),xe.tag=new xe(6,"tag",!1),xe.float=new xe(7,"float",!0),xe.false=new xe(7,"false",!0),xe.true=new xe(7,"true",!0),xe.null=new xe(7,"null",!0),xe.undefined=new xe(7,"undefined",!0),xe.break=new xe(7,"break",!0);class Le{constructor(t,e,r){this.type=t,this.value=e,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Re=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,Ne=new TextDecoder,Oe=new TextEncoder;function Ue(t){return Re&&globalThis.Buffer.isBuffer(t)}function De(t){return t instanceof Uint8Array?Ue(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const Pe=Re?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Fe(t,e,r):(t,e,r)=>r-e>64?Ne.decode(t.subarray(e,r)):Fe(t,e,r),Ke=Re?t=>t.length>64?globalThis.Buffer.from(t):ze(t):t=>t.length>64?Oe.encode(t):ze(t),Me=t=>Uint8Array.from(t),Ve=Re?(t,e,r)=>Ue(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),je=Re?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),De(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let e of t)n+e.length>r.length&&(e=e.subarray(0,r.length-n)),r.set(e,n),n+=e.length;return r},qe=Re?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function ze(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=63&i|128):55296==(64512&i)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++n)),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=63&i|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=63&i|128)}return e}function Fe(t,e,r){const n=[];for(;e<r;){const i=t[e];let o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let r,n,a,u;switch(s){case 1:i<128&&(o=i);break;case 2:r=t[e+1],128==(192&r)&&(u=(31&i)<<6|63&r,u>127&&(o=u));break;case 3:r=t[e+1],n=t[e+2],128==(192&r)&&128==(192&n)&&(u=(15&i)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[e+1],n=t[e+2],a=t[e+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),e+=s}return function(t){const e=t.length;if(e<=He)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=He));return r}(n)}const He=4096;class $e{constructor(t=256){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const r=e.length-(this.maxCursor-this.cursor)-1;e.set(t,r)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=qe(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=Ve(r,0,this.cursor)}else e=je(this.chunks,this.cursor);return t&&this.reset(),e}}const Ge="CBOR decode error:",We="CBOR encode error:",Ye=[];function Ze(t,e,r){if(t.length-e<r)throw new Error(`${Ge} not enough data for type`)}Ye[23]=1,Ye[24]=2,Ye[25]=3,Ye[26]=5,Ye[27]=9;const Qe=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Je(t,e,r){Ze(t,e,1);const n=t[e];if(!0===r.strict&&n<Qe[0])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);return n}function Xe(t,e,r){Ze(t,e,2);const n=t[e]<<8|t[e+1];if(!0===r.strict&&n<Qe[1])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);return n}function tr(t,e,r){Ze(t,e,4);const n=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===r.strict&&n<Qe[2])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);return n}function er(t,e,r){Ze(t,e,8);const n=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===r.strict&&o<Qe[3])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(!0===r.allowBigInt)return o;throw new Error(`${Ge} integers outside of the safe integer range are not supported`)}function rr(t,e){return nr(t,0,e.value)}function nr(t,e,r){if(r<Qe[0]){const n=Number(r);t.push([e|n])}else if(r<Qe[1]){const n=Number(r);t.push([24|e,n])}else if(r<Qe[2]){const n=Number(r);t.push([25|e,n>>>8,255&n])}else if(r<Qe[3]){const n=Number(r);t.push([26|e,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<Qe[4]))throw new Error(`${Ge} encountered BigInt larger than allowable range`);{const r=[27|e,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&o,o>>=8,r[3]=255&o,o>>=8,r[2]=255&o,o>>=8,r[1]=255&o,t.push(r)}}}rr.encodedSize=function(t){return nr.encodedSize(t.value)},nr.encodedSize=function(t){return t<Qe[0]?1:t<Qe[1]?2:t<Qe[2]?3:t<Qe[3]?5:9},rr.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const ir=BigInt(-1),or=BigInt(1);function sr(t,e){const r=e.value,n="bigint"==typeof r?r*ir-or:-1*r-1;nr(t,e.type.majorEncoded,n)}function ar(t,e,r,n){Ze(t,e,r+n);const i=Ve(t,e+r,e+r+n);return new Le(xe.bytes,i,r+n)}function ur(t,e,r,n){return ar(t,e,1,r)}function cr(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===xe.string?Ke(t.value):t.value),t.encodedBytes}function hr(t,e){const r=cr(e);nr(t,e.type.majorEncoded,r.length),t.push(r)}function fr(t,e,r,n,i){const o=r+n;Ze(t,e,o);const s=new Le(xe.string,Pe(t,e+r,e+o),o);return!0===i.retainStringBytes&&(s.byteValue=Ve(t,e+r,e+o)),s}function lr(t,e,r,n){return fr(t,e,1,r,n)}sr.encodedSize=function(t){const e=t.value,r="bigint"==typeof e?e*ir-or:-1*e-1;return r<Qe[0]?1:r<Qe[1]?2:r<Qe[2]?3:r<Qe[3]?5:9},sr.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},hr.encodedSize=function(t){const e=cr(t);return nr.encodedSize(e.length)+e.length},hr.compareTokens=function(t,e){return r=cr(t),n=cr(e),r.length<n.length?-1:r.length>n.length?1:function(t,e){if(Ue(t)&&Ue(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}(r,n);var r,n};const pr=hr;function dr(t,e,r,n){return new Le(xe.array,n,r)}function yr(t,e,r,n){return dr(0,0,1,r)}function gr(t,e){nr(t,xe.array.majorEncoded,e.value)}function br(t,e,r,n){return new Le(xe.map,n,r)}function mr(t,e,r,n){return br(0,0,1,r)}function wr(t,e){nr(t,xe.map.majorEncoded,e.value)}function vr(t,e,r,n){return new Le(xe.tag,r,1)}function Er(t,e){nr(t,xe.tag.majorEncoded,e.value)}gr.compareTokens=rr.compareTokens,gr.encodedSize=function(t){return nr.encodedSize(t.value)},wr.compareTokens=rr.compareTokens,wr.encodedSize=function(t){return nr.encodedSize(t.value)},Er.compareTokens=rr.compareTokens,Er.encodedSize=function(t){return nr.encodedSize(t.value)};function Br(t,e,r){if(r){if(!1===r.allowNaN&&Number.isNaN(t))throw new Error(`${Ge} NaN values are not supported`);if(!1===r.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${Ge} Infinity values are not supported`)}return new Le(xe.float,t,e)}function Sr(t,e,r){const n=e.value;if(!1===n)t.push([20|xe.float.majorEncoded]);else if(!0===n)t.push([21|xe.float.majorEncoded]);else if(null===n)t.push([22|xe.float.majorEncoded]);else if(void 0===n)t.push([23|xe.float.majorEncoded]);else{let e,o=!1;r&&!0===r.float64||(kr(n),e=Tr(Ir,1),n===e||Number.isNaN(n)?(Ir[0]=249,t.push(Ir.slice(0,3)),o=!0):(Cr(n),e=xr(Ir,1),n===e&&(Ir[0]=250,t.push(Ir.slice(0,5)),o=!0))),o||(i=n,Ar.setFloat64(0,i,!1),e=Lr(Ir,1),Ir[0]=251,t.push(Ir.slice(0,9)))}var i}Sr.encodedSize=function(t,e){const r=t.value;if(!1===r||!0===r||null==r)return 1;if(!e||!0!==e.float64){kr(r);let t=Tr(Ir,1);if(r===t||Number.isNaN(r))return 3;if(Cr(r),t=xr(Ir,1),r===t)return 5}return 9};const _r=new ArrayBuffer(9),Ar=new DataView(_r,1),Ir=new Uint8Array(_r,0);function kr(t){if(t===1/0)Ar.setUint16(0,31744,!1);else if(t===-1/0)Ar.setUint16(0,64512,!1);else if(Number.isNaN(t))Ar.setUint16(0,32256,!1);else{Ar.setFloat32(0,t);const e=Ar.getUint32(0),r=(2139095040&e)>>23,n=8388607&e;if(255===r)Ar.setUint16(0,31744,!1);else if(0===r)Ar.setUint16(0,(2147483648&t)>>16|n>>13,!1);else{const t=r-127;t<-24?Ar.setUint16(0,0):t<-14?Ar.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):Ar.setUint16(0,(2147483648&e)>>16|t+15<<10|n>>13,!1)}}}function Tr(t,e){if(t.length-e<2)throw new Error(`${Ge} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,i=1023&r;let o;return o=0===n?i*2**-24:31!==n?(i+1024)*2**(n-25):0===i?1/0:NaN,32768&r?-o:o}function Cr(t){Ar.setFloat32(0,t,!1)}function xr(t,e){if(t.length-e<4)throw new Error(`${Ge} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Lr(t,e){if(t.length-e<8)throw new Error(`${Ge} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}function Rr(t,e,r){throw new Error(`${Ge} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Nr(t){return()=>{throw new Error(`${Ge} ${t}`)}}Sr.compareTokens=rr.compareTokens;const Or=[];for(let t=0;t<=23;t++)Or[t]=Rr;Or[24]=function(t,e,r,n){return new Le(xe.uint,Je(t,e+1,n),2)},Or[25]=function(t,e,r,n){return new Le(xe.uint,Xe(t,e+1,n),3)},Or[26]=function(t,e,r,n){return new Le(xe.uint,tr(t,e+1,n),5)},Or[27]=function(t,e,r,n){return new Le(xe.uint,er(t,e+1,n),9)},Or[28]=Rr,Or[29]=Rr,Or[30]=Rr,Or[31]=Rr;for(let t=32;t<=55;t++)Or[t]=Rr;Or[56]=function(t,e,r,n){return new Le(xe.negint,-1-Je(t,e+1,n),2)},Or[57]=function(t,e,r,n){return new Le(xe.negint,-1-Xe(t,e+1,n),3)},Or[58]=function(t,e,r,n){return new Le(xe.negint,-1-tr(t,e+1,n),5)},Or[59]=function(t,e,r,n){const i=er(t,e+1,n);if("bigint"!=typeof i){const t=-1-i;if(t>=Number.MIN_SAFE_INTEGER)return new Le(xe.negint,t,9)}if(!0!==n.allowBigInt)throw new Error(`${Ge} integers outside of the safe integer range are not supported`);return new Le(xe.negint,ir-BigInt(i),9)},Or[60]=Rr,Or[61]=Rr,Or[62]=Rr,Or[63]=Rr;for(let t=64;t<=87;t++)Or[t]=ur;Or[88]=function(t,e,r,n){return ar(t,e,2,Je(t,e+1,n))},Or[89]=function(t,e,r,n){return ar(t,e,3,Xe(t,e+1,n))},Or[90]=function(t,e,r,n){return ar(t,e,5,tr(t,e+1,n))},Or[91]=function(t,e,r,n){const i=er(t,e+1,n);if("bigint"==typeof i)throw new Error(`${Ge} 64-bit integer bytes lengths not supported`);return ar(t,e,9,i)},Or[92]=Rr,Or[93]=Rr,Or[94]=Rr,Or[95]=Nr("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)Or[t]=lr;Or[120]=function(t,e,r,n){return fr(t,e,2,Je(t,e+1,n),n)},Or[121]=function(t,e,r,n){return fr(t,e,3,Xe(t,e+1,n),n)},Or[122]=function(t,e,r,n){return fr(t,e,5,tr(t,e+1,n),n)},Or[123]=function(t,e,r,n){const i=er(t,e+1,n);if("bigint"==typeof i)throw new Error(`${Ge} 64-bit integer string lengths not supported`);return fr(t,e,9,i,n)},Or[124]=Rr,Or[125]=Rr,Or[126]=Rr,Or[127]=Nr("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)Or[t]=yr;Or[152]=function(t,e,r,n){return dr(0,0,2,Je(t,e+1,n))},Or[153]=function(t,e,r,n){return dr(0,0,3,Xe(t,e+1,n))},Or[154]=function(t,e,r,n){return dr(0,0,5,tr(t,e+1,n))},Or[155]=function(t,e,r,n){const i=er(t,e+1,n);if("bigint"==typeof i)throw new Error(`${Ge} 64-bit integer array lengths not supported`);return dr(0,0,9,i)},Or[156]=Rr,Or[157]=Rr,Or[158]=Rr,Or[159]=function(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${Ge} indefinite length items not allowed`);return dr(0,0,1,1/0)};for(let t=160;t<=183;t++)Or[t]=mr;Or[184]=function(t,e,r,n){return br(0,0,2,Je(t,e+1,n))},Or[185]=function(t,e,r,n){return br(0,0,3,Xe(t,e+1,n))},Or[186]=function(t,e,r,n){return br(0,0,5,tr(t,e+1,n))},Or[187]=function(t,e,r,n){const i=er(t,e+1,n);if("bigint"==typeof i)throw new Error(`${Ge} 64-bit integer map lengths not supported`);return br(0,0,9,i)},Or[188]=Rr,Or[189]=Rr,Or[190]=Rr,Or[191]=function(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${Ge} indefinite length items not allowed`);return br(0,0,1,1/0)};for(let t=192;t<=215;t++)Or[t]=vr;Or[216]=function(t,e,r,n){return new Le(xe.tag,Je(t,e+1,n),2)},Or[217]=function(t,e,r,n){return new Le(xe.tag,Xe(t,e+1,n),3)},Or[218]=function(t,e,r,n){return new Le(xe.tag,tr(t,e+1,n),5)},Or[219]=function(t,e,r,n){return new Le(xe.tag,er(t,e+1,n),9)},Or[220]=Rr,Or[221]=Rr,Or[222]=Rr,Or[223]=Rr;for(let t=224;t<=243;t++)Or[t]=Nr("simple values are not supported");Or[244]=Rr,Or[245]=Rr,Or[246]=Rr,Or[247]=function(t,e,r,n){if(!1===n.allowUndefined)throw new Error(`${Ge} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new Le(xe.null,null,1):new Le(xe.undefined,void 0,1)},Or[248]=Nr("simple values are not supported"),Or[249]=function(t,e,r,n){return Br(Tr(t,e+1),3,n)},Or[250]=function(t,e,r,n){return Br(xr(t,e+1),5,n)},Or[251]=function(t,e,r,n){return Br(Lr(t,e+1),9,n)},Or[252]=Rr,Or[253]=Rr,Or[254]=Rr,Or[255]=function(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${Ge} indefinite length items not allowed`);return new Le(xe.break,void 0,1)};const Ur=[];for(let t=0;t<24;t++)Ur[t]=new Le(xe.uint,t,1);for(let t=-1;t>=-24;t--)Ur[31-t]=new Le(xe.negint,t,1);Ur[64]=new Le(xe.bytes,new Uint8Array(0),1),Ur[96]=new Le(xe.string,"",1),Ur[128]=new Le(xe.array,0,1),Ur[160]=new Le(xe.map,0,1),Ur[244]=new Le(xe.false,!1,1),Ur[245]=new Le(xe.true,!0,1),Ur[246]=new Le(xe.null,null,1);const Dr={float64:!1,mapSorter:function(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,o=Pr[i].compareTokens(r,n);return 0===o&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o},quickEncodeToken:function(t){switch(t.type){case xe.false:return Me([244]);case xe.true:return Me([245]);case xe.null:return Me([246]);case xe.bytes:return t.value.length?void 0:Me([64]);case xe.string:return""===t.value?Me([96]):void 0;case xe.array:return 0===t.value?Me([128]):void 0;case xe.map:return 0===t.value?Me([160]):void 0;case xe.uint:return t.value<24?Me([Number(t.value)]):void 0;case xe.negint:if(t.value>=-24)return Me([31-Number(t.value)])}}},Pr=function(){const t=[];return t[xe.uint.major]=rr,t[xe.negint.major]=sr,t[xe.bytes.major]=hr,t[xe.string.major]=pr,t[xe.array.major]=gr,t[xe.map.major]=wr,t[xe.tag.major]=Er,t[xe.float.major]=Sr,t}(),Kr=new $e;class Mr{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${We} object contains circular references`);return new Mr(e,t)}}const Vr={null:new Le(xe.null,null),undefined:new Le(xe.undefined,void 0),true:new Le(xe.true,!0),false:new Le(xe.false,!1),emptyArray:new Le(xe.array,0),emptyMap:new Le(xe.map,0)},jr={number:(t,e,r,n)=>Number.isInteger(t)&&Number.isSafeInteger(t)?new Le(t>=0?xe.uint:xe.negint,t):new Le(xe.float,t),bigint:(t,e,r,n)=>t>=BigInt(0)?new Le(xe.uint,t):new Le(xe.negint,t),Uint8Array:(t,e,r,n)=>new Le(xe.bytes,t),string:(t,e,r,n)=>new Le(xe.string,t),boolean:(t,e,r,n)=>t?Vr.true:Vr.false,null:(t,e,r,n)=>Vr.null,undefined:(t,e,r,n)=>Vr.undefined,ArrayBuffer:(t,e,r,n)=>new Le(xe.bytes,new Uint8Array(t)),DataView:(t,e,r,n)=>new Le(xe.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,r,n){if(!t.length)return!0===r.addBreakTokens?[Vr.emptyArray,new Le(xe.break)]:Vr.emptyArray;n=Mr.createCheck(n,t);const i=[];let o=0;for(const e of t)i[o++]=qr(e,r,n);return r.addBreakTokens?[new Le(xe.array,t.length),i,new Le(xe.break)]:[new Le(xe.array,t.length),i]},Object(t,e,r,n){const i="Object"!==e,o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return!0===r.addBreakTokens?[Vr.emptyMap,new Le(xe.break)]:Vr.emptyMap;n=Mr.createCheck(n,t);const a=[];let u=0;for(const e of o)a[u++]=[qr(e,r,n),qr(i?t.get(e):t[e],r,n)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(a,r),r.addBreakTokens?[new Le(xe.map,s),a,new Le(xe.break)]:[new Le(xe.map,s),a]}};jr.Map=jr.Object,jr.Buffer=jr.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))jr[`${t}Array`]=jr.DataView;function qr(t,e={},r){const n=function(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(Te.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";return function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(Ce.includes(e))return e}(t)||"Object"}(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||jr[n];if("function"==typeof i){const o=i(t,n,e,r);if(null!=o)return o}const o=jr[n];if(!o)throw new Error(`${We} unsupported type: ${n}`);return o(t,n,e,r)}function zr(t,e,r,n){if(Array.isArray(e))for(const i of e)zr(t,i,r,n);else r[e.type.major](t,e,n)}function Fr(t,e,r){const n=qr(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const t=r.quickEncodeToken(n);if(t)return t;const i=e[n.type.major];if(i.encodedSize){const t=i.encodedSize(n,r),e=new $e(t);if(i(e,n,r),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return De(e.chunks[0])}}return Kr.reset(),zr(Kr,n,e,r),Kr.toBytes(!0)}const Hr={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class $r{constructor(t,e={}){this._pos=0,this.data=t,this.options=e}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let e=Ur[t];if(void 0===e){const r=Or[t];if(!r)throw new Error(`${Ge} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const n=31&t;e=r(this.data,this._pos,n,this.options)}return this._pos+=e.encodedLength,e}}const Gr=Symbol.for("DONE"),Wr=Symbol.for("BREAK");function Yr(t,e){if(t.done())return Gr;const r=t.next();if(r.type===xe.break)return Wr;if(r.type.terminal)return r.value;if(r.type===xe.array)return function(t,e,r){const n=[];for(let i=0;i<t.value;i++){const o=Yr(e,r);if(o===Wr){if(t.value===1/0)break;throw new Error(`${Ge} got unexpected break to lengthed array`)}if(o===Gr)throw new Error(`${Ge} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}(r,t,e);if(r.type===xe.map)return function(t,e,r){const n=!0===r.useMaps,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){const a=Yr(e,r);if(a===Wr){if(t.value===1/0)break;throw new Error(`${Ge} got unexpected break to lengthed map`)}if(a===Gr)throw new Error(`${Ge} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(!0!==n&&"string"!=typeof a)throw new Error(`${Ge} non-string keys not supported (got ${typeof a})`);if(!0===r.rejectDuplicateMapKeys&&(n&&o.has(a)||!n&&a in i))throw new Error(`${Ge} found repeat map key "${a}"`);const u=Yr(e,r);if(u===Gr)throw new Error(`${Ge} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,u):i[a]=u}return n?o:i}(r,t,e);if(r.type===xe.tag){if(e.tags&&"function"==typeof e.tags[r.value]){const n=Yr(t,e);return e.tags[r.value](n)}throw new Error(`${Ge} tag not supported (${r.value})`)}throw new Error("unsupported")}function Zr(t,e){const[r,n]=function(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Ge} data to decode must be a Uint8Array`);const r=(e=Object.assign({},Hr,e)).tokenizer||new $r(t,e),n=Yr(r,e);if(n===Gr)throw new Error(`${Ge} did not find any content to decode`);if(n===Wr)throw new Error(`${Ge} got unexpected break`);return[n,t.subarray(r.pos())]}(t,e);if(n.length>0)throw new Error(`${Ge} too many terminals, data makes no sense`);return r}const Qr={float64:!0,typeEncoders:{Object:function(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=he.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Le(xe.tag,42),new Le(xe.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},Jr={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Jr.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return he.decode(t.subarray(1))};const Xr="dag-cbor",tn=113,en=t=>{return e=t,r=Qr,r=Object.assign({},Dr,r),Fr(e,Pr,r);var e,r},rn=t=>Zr(t,Jr),nn=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),on=me({name:"sha2-256",code:18,encode:nn("SHA-256")}),sn=me({name:"sha2-512",code:19,encode:nn("SHA-512")}),an=r,un=on,cn=Mt,hn=t=>t&&void 0!==t.id&&void 0!==t.next&&void 0!==t.payload&&void 0!==t.v&&void 0!==t.clock&&void 0!==t.refs,fn=async t=>{const{cid:e,bytes:r}=await Ie({value:t,codec:an,hasher:un}),n=e.toString(cn),i=wt(t.clock.id,t.clock.time);return{...t,clock:i,hash:n,bytes:r}},ln={create:async(t,e,r,n=null,i=[],o=[])=>{if(null==t)throw new Error("Identity is required, cannot create entry");if(null==e)throw new Error("Entry requires an id");if(null==r)throw new Error("Entry requires a payload");if(null==i||!Array.isArray(i))throw new Error("'next' argument is not an array");const s={id:e,payload:r,next:i,refs:o,clock:n=n||wt(t.publicKey),v:2},{bytes:a}=await Ie({value:s,codec:an,hasher:un}),u=await t.sign(t,a);return s.key=t.publicKey,s.identity=t.hash,s.sig=u,fn(s)},verify:async(t,e)=>{if(!t)throw new Error("Identities is required, cannot verify entry");if(!hn(e))throw new Error("Invalid Log entry");if(!e.key)throw new Error("Entry doesn't have a key");if(!e.sig)throw new Error("Entry doesn't have a signature");const r={id:e.id,payload:e.payload,next:e.next,refs:e.refs,clock:e.clock,v:e.v},{bytes:n}=await Ie({value:r,codec:an,hasher:un});return t.verify(e.sig,e.key,n)},decode:async t=>{const{value:e}=await ke({bytes:t,codec:an,hasher:un});return fn(e)},isEntry:hn,isEqual:(t,e)=>t&&e&&t.hash===e.hash},pn=async()=>{let t={};const e=async(e,r)=>{t[e]=r};return{put:e,del:async e=>{delete t[e]},get:async e=>t[e],iterator:async function*(){for await(const[e,r]of Object.entries(t))yield[e,r]},merge:async t=>{if(t)for await(const[r,n]of t.iterator())e(r,n)},clear:async()=>{t={}},close:async()=>{}}},dn=pn,yn=t=>{t=new Set(t);const e={};for(const r of t)for(const t of r.next)e[t]=r.hash;const r=[];for(const n of t)e[n.hash]||r.push(n);return r};function gn(t,e,r){const n=((t,e)=>{const r=t.time-e.time;return 0===r&&t.id!==e.id?t.id<e.id?-1:1:r})(t.clock,e.clock);return 0===n?r(t,e):n}function bn(t,e,r){return t.clock.id===e.clock.id?r(t,e):t.clock.id<e.clock.id?-1:1}const mn={SortByClocks:gn,SortByClockId:bn,LastWriteWins:function(t,e){const r=(t,e)=>t,n=(t,e)=>bn(t,e,r);return((t,e)=>gn(t,e,n))(t,e)},NoZeroes:function(t){const e=`Your log's tiebreaker function, ${t.name}, has returned zero and therefore cannot be`;return(r,n)=>{const i=t(r,n);if(0===i)throw Error(e);return i}}},{LastWriteWins:wn,NoZeroes:vn}=mn,En=(t,e)=>Math.max(t,e.clock.time),Bn=pn,Sn=async()=>({canAppend:async t=>!0}),_n=async(t,{logId:e,logHeads:r,access:n,entryStorage:i,headsStorage:o,indexStorage:s,sortFn:a}={})=>{if(null==t)throw new Error("Identity is required");if(null!=r&&!Array.isArray(r))throw new Error("'logHeads' argument must be an array");const u=e||(new Date).getTime().toString();n=n||await Sn();const c=i||await Bn(),h=s||await Bn();o=o||await Bn();const f=await(async({storage:t,heads:e})=>{t=t||await dn();const r=async e=>{e=yn(e);for(const r of e)await t.put(r.hash,r.bytes)},n=async e=>{await t.clear(),await r(e)},i=async function*(){const e=t.iterator();for await(const[,t]of e){const e=await ln.decode(t);yield e}},o=async()=>{const t=[];for await(const e of i())t.push(e);return t};return await r(e||[]),{put:r,set:n,add:async t=>{const e=await o();if(e.find((e=>ln.isEqual(e,t))))return;const r=yn([...e,t]);return await n(r),r},iterator:i,all:o,clear:async()=>{await t.clear()},close:async()=>{await t.close()}}})({storage:o,heads:r});a=vn(a||wn);const l=async()=>{const e=Math.max(0,(await p()).reduce(En,0));return wt(t.publicKey,e)},p=async()=>(await f.all()).sort(a).reverse(),d=async()=>{const t=[];for await(const e of m())t.unshift(e);return t},y=async t=>{const e=await c.get(t);if(e){const r=await ln.decode(e);return await h.put(t,!0),r}},g=async t=>null!=await h.get(t),b=async e=>{const{hash:r}=e;if(await g(r))return!1;{const t=m(await p(),(t=>t.next.includes(r)||e.next.includes(t.hash)));for await(const e of t)if(e.next.includes(r))return await h.put(r,!0),!1}if(e.id!==u)throw new Error(`Entry's id (${e.id}) doesn't match the log's id (${u}).`);if(!await n.canAppend(e))throw new Error(`Could not append entry:\nKey "${e.identity}" is not allowed to write to the log`);if(!await ln.verify(t,e))throw new Error(`Could not validate signature for entry "${r}"`);return!!await f.add(e)&&(await c.put(r,e.bytes),await h.put(r,!0),!0)},m=async function*(t,e,r=!0){e=e||(()=>!1);let n=(t=t||await p()).sort(a);const i={};let o=[];const s={},u=t=>!(i[t]||s[t]);let c;for(;n.length>0;)if(n=n.sort(a),c=n.pop(),c){const{hash:t,next:a,refs:h}=c;if(!i[t]){if(yield c,!0===await e(c))break;i[t]=!0,s[t]=!0,o=[...o,...a,...r?h:[]].filter(u);const f=t=>{if(!i[t]&&!s[t])return s[t]=!0,y(t)},l=await Promise.all(o.map(f));o=l.filter((t=>null!=t)).reduce(((t,e)=>Array.from(new Set([...t,...e.next,...r?e.refs:[]]))),[]).filter(u),n=[...l,...n]}}};return{id:u,clock:l,heads:p,values:d,all:d,get:y,has:g,append:async(e,r={referencesCount:0})=>{const i=await p(),o=i.map((t=>t.hash)),s=await(async(t,e=0)=>{let r=[];const n=async t=>r.length>=e&&-1!==e;for await(const{hash:e}of m(t,n,!1))r.push(e);return r=r.slice(t.length+1,e),r})(i,r.referencesCount+i.length),a=await ln.create(t,u,e,(t=>wt(t.id,++t.time))(await l()),o,s);if(!await n.canAppend(a))throw new Error(`Could not append entry:\nKey "${t.hash}" is not allowed to write to the log`);return await f.set([a]),await c.put(a.hash,a.bytes),await h.put(a.hash,!0),a},join:async t=>{if(!t)throw new Error("Log instance not defined");if(!(e=t)||void 0===e.id||void 0===e.clock||void 0===e.heads||void 0===e.values||void 0===e.access||void 0===e.identity||void 0===e.storage)throw new Error("Given argument is not an instance of Log");var e;const r=await t.heads();for(const t of r)await b(t);c.merge&&await c.merge(t.storage)},joinEntry:b,traverse:m,iterator:async function*({amount:t=-1,gt:e,gte:r,lt:n,lte:i}={}){if(0===t)return;if("string"==typeof i&&(i=[await y(i)]),"string"==typeof n){const t=await y(n);n=await Promise.all(t.next.map((t=>y(t))))}if(null!=n&&!Array.isArray(n))throw new Error("lt must be a string or an array of Entries");if(null!=i&&!Array.isArray(i))throw new Error("lte must be a string or an array of Entries");const o=(n||i||await p()).filter((t=>null!=t)),s=e||r?await y(e||r):null,a=s||-1===t?-1:t;let u=0;const c=s&&-1!==t&&!n&&!i,h=c?new mt(t+2):null;let f=0;const l=m(o,(async t=>(u++,!!t&&(u>=a&&-1!==a||!(!s||!ln.isEqual(t,s))))));for await(const t of l){const r=n&&ln.isEqual(t,o),i=e&&ln.isEqual(t,s);r||i||(c?h.set(f++,t.hash):yield t)}if(c){const e=h.keys.length,r=e>t?e-t:0,n=h.keys.slice(r,e);for(const t of n){const e=h.get(t),r=await y(e);yield r}}},clear:async()=>{await h.clear(),await f.clear(),await c.clear()},close:async()=>{await h.close(),await f.close(),await c.close()},access:n,identity:t,storage:c}},An=async(t,e)=>({put:async(r,n)=>{await t.put(r,n),await e.put(r,n)},get:async r=>{let n=await t.get(r);return n||(n=await e.get(r),n&&await t.put(r,n)),n},iterator:async function*(){const r=[];for(const n of[t,e])for await(const[t,e]of n.iterator())r[t]||(r[t]=!0,yield[t,e])},merge:async r=>{await t.merge(r),await e.merge(r),await r.merge(t),await r.merge(e)},clear:async()=>{await t.clear(),await e.clear()},close:async()=>{await t.close(),await e.close()}}),In=async({ipfs:t,timeout:e,pin:r}={})=>{if(!t)throw new Error("An instance of ipfs is required.");return e=e||3e4,{put:async(n,i)=>{const o=he.parse(n,Mt);await t.block.put(i,{cid:o.bytes,version:o.version,format:"dag-cbor",mhtype:"sha2-256",pin:r,timeout:e})},del:async t=>{},get:async r=>{const n=he.parse(r,Mt),i=await t.block.get(n,{timeout:e});if(i)return i},iterator:async function*(){},merge:async t=>{},clear:async()=>{},close:async()=>{}}};var kn=__webpack_require__(1301);const Tn=async({path:t,valueEncoding:e}={})=>{t=t||"./level",e=e||"view";const r=new kn.Level(t,{valueEncoding:e,passive:!0});return await r.open(),{put:async(t,e)=>{await r.put(t,e)},del:async t=>{await r.del(t)},get:async t=>{try{const e=await r.get(t);if(e)return e}catch(t){}},iterator:async function*(){for await(const[t,e]of r.iterator())yield[t,e]},merge:async t=>{},clear:async()=>{await r.clear()},close:async()=>{await r.close()}}},Cn=1e6,xn=async({size:t}={})=>{let e=new mt(t||Cn);return{put:async(t,r)=>{e.set(t,r)},del:async t=>{e.remove(t)},get:async t=>e.get(t),iterator:async function*(){for await(const t of e.keys){const r=e.get(t);yield[t,r]}},merge:async t=>{if(t)for await(const[r,n]of t.iterator())e.set(r,n)},clear:async()=>{e=new mt(t||Cn)},close:async()=>{}}},Ln=1e3,Rn=async({ipfs:t,identity:e,address:r,name:n,access:i,directory:o,meta:s,headsStorage:a,entryStorage:u,indexStorage:c,referencesCount:h,syncAutomatically:f,onUpdate:l})=>{o=bt(o||"./orbitdb",`./${r}/`),s=s||{},h=Number(h)>-1?h:16,u=u||await An(await xn({size:Ln}),await In({ipfs:t,pin:!0})),a=a||await An(await xn({size:Ln}),await Tn({path:bt(o,"/log/_heads/")})),c=c||await An(await xn({size:Ln}),await Tn({path:bt(o,"/log/_index/")}));const p=await _n(e,{logId:r,access:i,entryStorage:u,headsStorage:a,indexStorage:c}),d=new w.EventEmitter,y=new nt({concurrency:1}),g=await(async({ipfs:t,log:e,events:r,onSynced:n,start:i,timeout:o})=>{if(!t)throw new Error("An instance of ipfs is required.");if(!e)throw new Error("An instance of log is required.");const s=e.id,a=bt("/orbitdb/heads/",s),u=new nt({concurrency:1}),c=new Set;r=r||new w.EventEmitter,o=o||3e4;let h=!1;const f=async t=>async function*(){const t=await e.heads();for await(const{bytes:e}of t)yield e}(),l=t=>async i=>{for await(const t of i){const e=t.subarray();e&&n&&await n(e)}await(async t=>{const n=await e.heads();r.emit("join",t,n)})(t)},p=async({connection:t,stream:e})=>{const n=String(t.remotePeer);try{c.add(n),await ct(e,l(n),f,e)}catch(t){c.delete(n),r.emit("error",t)}},d=async e=>{u.add((async()=>{const{peerId:n,subscriptions:i}=e.detail,u=String(n),h=i.find((t=>t.topic===s));if(h)if(h.subscribe){if(c.has(u))return;const e=new yt.TimeoutController(o),{signal:i}=e;try{c.add(u);const e=await t.libp2p.dialProtocol(n,a,{signal:i});await ct(f,e,l(u))}catch(t){"ERR_UNSUPPORTED_PROTOCOL"===t.code||(c.delete(u),r.emit("error",t))}finally{e&&e.clear()}}else c.delete(u),r.emit("leave",u)}))},y=async e=>{u.add((async()=>{const{id:i}=await t.id();try{(t=>String(i)!==String(t.from))(e)&&(t=>void 0!==t.data)(e)&&n&&await n(e.data)}catch(t){r.emit("error",t)}}))},g=async()=>{h||(await t.libp2p.handle(a,p),t.libp2p.pubsub.addEventListener("subscription-change",d),await t.pubsub.subscribe(s,y),h=!0)};return!1!==i&&await g(),{add:async e=>{h&&await t.pubsub.publish(s,e.bytes)},stop:async()=>{h&&(await u.onIdle(),t.libp2p.pubsub.removeEventListener("subscription-change",d),await t.libp2p.unhandle(a),await t.pubsub.unsubscribe(s,y),c.clear(),h=!1)},start:g,events:r,peers:c}})({ipfs:t,log:p,events:d,onSynced:async t=>{await y.add((async()=>{const e=await ln.decode(t);e&&await p.joinEntry(e)&&(l&&await l(p,e),d.emit("update",e))}))},start:f});return{address:r,name:n,identity:e,meta:s,close:async()=>{await g.stop(),await y.onIdle(),await p.close(),i&&i.close&&await i.close(),d.emit("close")},drop:async()=>{await y.onIdle(),await p.clear(),i&&i.drop&&await i.drop(),d.emit("drop")},addOperation:async t=>{const e=await y.add((async()=>{const e=await p.append(t,{referencesCount:h});return await g.add(e),l&&await l(p,e),d.emit("update",e),e.hash}));return await y.onIdle(),e},log:p,sync:g,peers:g.peers,events:d,access:i}},Nn="documents",On={indexBy:"_id"},Un=({indexBy:t}=On)=>async({ipfs:e,identity:r,address:n,name:i,access:o,directory:s,meta:a,headsStorage:u,entryStorage:c,indexStorage:h,referencesCount:f,syncAutomatically:l,onUpdate:p})=>{const d=await Rn({ipfs:e,identity:r,address:n,name:i,access:o,directory:s,meta:a,headsStorage:u,entryStorage:c,indexStorage:h,referencesCount:f,syncAutomatically:l}),{addOperation:y,log:g}=d,b=async t=>{for await(const e of m())if(t===e.key)return e},m=async function*({amount:t}={}){const e={};let r=0;for await(const n of g.iterator()){const{op:i,key:o,value:s}=n.payload;if("PUT"!==i||e[o])"DEL"!==i||e[o]||(e[o]=!0);else{e[o]=!0,r++;const t=n.hash;yield{hash:t,key:o,value:s}}if(r>=t)break}};return{...d,type:Nn,put:async e=>{const r=e[t];if(!r)throw new Error(`The provided document doesn't contain field '${t}'`);return y({op:"PUT",key:r,value:e})},del:async t=>{if(!await b(t))throw new Error(`No document with key '${t}' in the database`);return y({op:"DEL",key:t,value:null})},get:b,iterator:m,query:async t=>{const e=[];for await(const r of m())t(r.value)&&e.push(r.value);return e},indexBy:t,all:async()=>{const t=[];for await(const e of m())t.unshift(e);return t}}};Un.type=Nn;const Dn=Un,Pn="events",Kn=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:o,meta:s,headsStorage:a,entryStorage:u,indexStorage:c,referencesCount:h,syncAutomatically:f,onUpdate:l})=>{const p=await Rn({ipfs:t,identity:e,address:r,name:n,access:i,directory:o,meta:s,headsStorage:a,entryStorage:u,indexStorage:c,referencesCount:h,syncAutomatically:f,onUpdate:l}),{addOperation:d,log:y}=p,g=async function*({gt:t,gte:e,lt:r,lte:n,amount:i}={}){const o=y.iterator({gt:t,gte:e,lt:r,lte:n,amount:i});for await(const t of o){const e=t.hash,r=t.payload.value;yield{hash:e,value:r}}};return{...p,type:Pn,add:async t=>d({op:"ADD",key:null,value:t}),get:async t=>(await y.get(t)).payload.value,iterator:g,all:async()=>{const t=[];for await(const e of g())t.unshift(e);return t}}};Kn.type=Pn;const Mn=Kn,Vn="keyvalue",jn=()=>async({ipfs:t,identity:e,address:r,name:n,access:i,directory:o,meta:s,headsStorage:a,entryStorage:u,indexStorage:c,referencesCount:h,syncAutomatically:f,onUpdate:l})=>{const p=await Rn({ipfs:t,identity:e,address:r,name:n,access:i,directory:o,meta:s,headsStorage:a,entryStorage:u,indexStorage:c,referencesCount:h,syncAutomatically:f,onUpdate:l}),{addOperation:d,log:y}=p,g=async(t,e)=>d({op:"PUT",key:t,value:e}),b=async function*({amount:t}={}){const e={};let r=0;for await(const n of y.traverse()){const{op:i,key:o,value:s}=n.payload;if("PUT"!==i||e[o])"DEL"!==i||e[o]||(e[o]=!0);else{e[o]=!0,r++;const t=n.hash;yield{key:o,value:s,hash:t}}if(r>=t)break}};return{...p,type:Vn,put:g,set:g,del:async t=>d({op:"DEL",key:t,value:null}),get:async t=>{for await(const e of y.traverse()){const{op:r,key:n,value:i}=e.payload;if("PUT"===r&&n===t)return i;if("DEL"===r&&n===t)return}},iterator:b,all:async()=>{const t=[];for await(const e of b())t.unshift(e);return t}}};jn.type=Vn;const qn=jn,zn=({storage:t}={})=>async({ipfs:e,identity:r,address:n,name:i,access:o,directory:s,meta:a,headsStorage:u,entryStorage:c,indexStorage:h,referencesCount:f,syncAutomatically:l,onUpdate:p})=>{const d=bt(s||"./orbitdb",`./${n}/_index/`),y=t||await Tn({path:d,valueEncoding:"json"});let g;const b=async(t,e)=>{const r={},n=await t.iterator({gt:g});for await(const t of n){const{op:e,key:n,value:i}=t.payload;"PUT"!==e||r[n]?"DEL"!==e||r[n]||(r[n]=!0,await y.del(n)):(r[n]=!0,await y.put(n,i))}g=e?e.hash:null},m=await qn()({ipfs:e,identity:r,address:n,name:i,access:o,directory:s,meta:a,headsStorage:u,entryStorage:c,indexStorage:h,referencesCount:f,syncAutomatically:l,onUpdate:b});return await b(m.log),{...m,get:async t=>await y.get(t)||m.get(t),iterator:async function*({amount:t}={}){const e=m.iterator({amount:t});for await(const{key:t,value:r,hash:n}of e)yield{key:t,value:r,hash:n}},close:async()=>{await y.close(),await m.close()},drop:async()=>{await y.clear(),await m.drop()}}};zn.type="keyvalue";const Fn=zn,Hn={},$n=t=>{if(!t.type)throw new Error("Database type does not contain required field 'type'.");Hn[t.type]=t};$n(Mn),$n(Dn),$n(qn),__webpack_require__(8925);var Gn=__webpack_require__(3832);function Wn(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}const Yn=Tt({prefix:"9",name:"base10",alphabet:"0123456789"}),Zn=Ct({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qn=Ct({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Jn=Ct({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Xn=Array.from(""),ti=Xn.reduce(((t,e,r)=>(t[r]=e,t)),[]),ei=Xn.reduce(((t,e,r)=>(t[e.codePointAt(0)]=r,t)),[]),ri=kt({prefix:"",name:"base256emoji",encode:function(t){return t.reduce(((t,e)=>t+ti[e]),"")},decode:function(t){const e=[];for(const r of t){const t=ei[r.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${r}`);e.push(t)}return new Uint8Array(e)}}),ni=Tt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ii=Tt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),oi=Ct({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),si=Ct({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ai=Ct({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ui=Ct({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ci=Ct({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),hi=kt({prefix:"\0",name:"identity",encode:t=>{return e=t,(new TextDecoder).decode(e);var e},decode:t=>(t=>(new TextEncoder).encode(t))(t)}),fi=new TextEncoder,li=new TextDecoder,pi="json",di=512,yi=t=>fi.encode(JSON.stringify(t)),gi=t=>JSON.parse(li.decode(t)),bi="raw",mi=85,wi=t=>vt(t),vi=t=>vt(t),Ei=vt,Bi={code:0,name:"identity",encode:Ei,digest:t=>oe(0,Ei(t))},Si={...f,...s,...h,...i,...o,...t,...u,...e,...c,...a};function _i(t=0){return null!=globalThis.Buffer?.allocUnsafe?Wn(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ai(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ii=Ai("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),ki=Ai("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{const e=_i((t=t.substring(1)).length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),Ti={utf8:Ii,"utf-8":Ii,hex:Si.base16,latin1:ki,ascii:ki,binary:ki,...Si};function Ci(t,e="utf8"){const r=Ti[e];if(null==r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${t}`):Wn(globalThis.Buffer.from(t,"utf-8"))}function xi(t,e="utf8"){const r=Ti[e];if(null==r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}const Li={get(t=globalThis){const e=t.crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};__webpack_require__(3068),__webpack_require__(7450);class Ri extends Error{code;props;constructor(t,e,r){super(t),this.code=e,this.name=r?.name??"CodeError",this.props=r??{}}}function Ni(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Oi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ui(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Di(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const Pi="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Ki=t=>t instanceof Uint8Array,Mi=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Vi=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function ji(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function qi(t){if("string"==typeof t&&(t=ji(t)),!Ki(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function zi(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Ki(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}class Fi{clone(){return this._cloneInto()}}function Hi(t){const e=e=>t().update(qi(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function $i(t=32){if(Pi&&"function"==typeof Pi.getRandomValues)return Pi.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Gi extends Fi{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mi(this.buffer)}update(t){Di(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=qi(t)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=Mi(t);for(;n<=i-o;o+=n)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Di(this),function(t,e){Ui(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let t=o;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,c=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=Mi(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)s.setUint32(4*t,c[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}const Wi=BigInt(2**32-1),Yi=BigInt(32);function Zi(t,e=!1){return e?{h:Number(t&Wi),l:Number(t>>Yi&Wi)}:{h:0|Number(t>>Yi&Wi),l:0|Number(t&Wi)}}const Qi={fromBig:Zi,split:function(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Zi(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]},toBig:(t,e)=>BigInt(t>>>0)<<Yi|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add:function(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,add5H:(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},Ji=Qi,[Xi,to]=(()=>Ji.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),eo=new Uint32Array(80),ro=new Uint32Array(80);class no extends Gi{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:c,Fh:h,Fl:f,Gh:l,Gl:p,Hh:d,Hl:y}=this;return[t,e,r,n,i,o,s,a,u,c,h,f,l,p,d,y]}set(t,e,r,n,i,o,s,a,u,c,h,f,l,p,d,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|h,this.Fl=0|f,this.Gh=0|l,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(t,e){for(let r=0;r<16;r++,e+=4)eo[r]=t.getUint32(e),ro[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|eo[t-15],r=0|ro[t-15],n=Ji.rotrSH(e,r,1)^Ji.rotrSH(e,r,8)^Ji.shrSH(e,r,7),i=Ji.rotrSL(e,r,1)^Ji.rotrSL(e,r,8)^Ji.shrSL(e,r,7),o=0|eo[t-2],s=0|ro[t-2],a=Ji.rotrSH(o,s,19)^Ji.rotrBH(o,s,61)^Ji.shrSH(o,s,6),u=Ji.rotrSL(o,s,19)^Ji.rotrBL(o,s,61)^Ji.shrSL(o,s,6),c=Ji.add4L(i,u,ro[t-7],ro[t-16]),h=Ji.add4H(c,n,a,eo[t-7],eo[t-16]);eo[t]=0|h,ro[t]=0|c}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:c,Eh:h,El:f,Fh:l,Fl:p,Gh:d,Gl:y,Hh:g,Hl:b}=this;for(let t=0;t<80;t++){const e=Ji.rotrSH(h,f,14)^Ji.rotrSH(h,f,18)^Ji.rotrBH(h,f,41),m=Ji.rotrSL(h,f,14)^Ji.rotrSL(h,f,18)^Ji.rotrBL(h,f,41),w=h&l^~h&d,v=f&p^~f&y,E=Ji.add5L(b,m,v,to[t],ro[t]),B=Ji.add5H(E,g,e,w,Xi[t],eo[t]),S=0|E,_=Ji.rotrSH(r,n,28)^Ji.rotrBH(r,n,34)^Ji.rotrBH(r,n,39),A=Ji.rotrSL(r,n,28)^Ji.rotrBL(r,n,34)^Ji.rotrBL(r,n,39),I=r&i^r&s^i&s,k=n&o^n&a^o&a;g=0|d,b=0|y,d=0|l,y=0|p,l=0|h,p=0|f,({h,l:f}=Ji.add(0|u,0|c,0|B,0|S)),u=0|s,c=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const T=Ji.add3L(S,A,k);r=Ji.add3H(T,B,_,I),n=0|T}({h:r,l:n}=Ji.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=Ji.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Ji.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:c}=Ji.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h,l:f}=Ji.add(0|this.Eh,0|this.El,0|h,0|f)),({h:l,l:p}=Ji.add(0|this.Fh,0|this.Fl,0|l,0|p)),({h:d,l:y}=Ji.add(0|this.Gh,0|this.Gl,0|d,0|y)),({h:g,l:b}=Ji.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(r,n,i,o,s,a,u,c,h,f,l,p,d,y,g,b)}roundClean(){eo.fill(0),ro.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const io=Hi((()=>new no)),oo=(BigInt(0),BigInt(1)),so=BigInt(2),ao=t=>t instanceof Uint8Array,uo=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function co(t){if(!ao(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=uo[t[r]];return e}function ho(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function fo(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[e]=o}return r}function lo(t){return ho(co(t))}function po(t){if(!ao(t))throw new Error("Uint8Array expected");return ho(co(Uint8Array.from(t).reverse()))}function yo(t,e){return fo(t.toString(16).padStart(2*e,"0"))}function go(t,e){return yo(t,e).reverse()}function bo(t,e,r){let n;if("string"==typeof e)try{n=fo(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!ao(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function mo(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!ao(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}const wo=t=>(so<<BigInt(t-1))-oo,vo=t=>new Uint8Array(t),Eo=t=>Uint8Array.from(t);function Bo(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=vo(t),i=vo(t),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...t)=>r(i,n,...t),u=(t=vo())=>{i=a(Eo([0]),t),n=a(),0!==t.length&&(i=a(Eo([1]),t),n=a())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=a();const e=n.slice();r.push(e),t+=n.length}return mo(...r)};return(t,e)=>{let r;for(s(),u(t);!(r=e(c()));)u();return s(),r}}const So={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function _o(t,e,r={}){const n=(e,r,n)=>{const i=So[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=t[e];if(!(n&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}const Ao=BigInt(0),Io=BigInt(1),ko=BigInt(2),To=BigInt(3),Co=BigInt(4),xo=BigInt(5),Lo=BigInt(8);function Ro(t,e){const r=t%e;return r>=Ao?r:e+r}function No(t,e,r){if(r<=Ao||e<Ao)throw new Error("Expected power/modulo > 0");if(r===Io)return Ao;let n=Io;for(;e>Ao;)e&Io&&(n=n*t%r),t=t*t%r,e>>=Io;return n}function Oo(t,e,r){let n=t;for(;e-- >Ao;)n*=n,n%=r;return n}function Uo(t,e){if(t===Ao||e<=Ao)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ro(t,e),n=e,i=Ao,o=Io,s=Io,a=Ao;for(;r!==Ao;){const t=n/r,e=n%r,u=i-s*t,c=o-a*t;n=r,r=e,i=s,o=a,s=u,a=c}if(n!==Io)throw new Error("invert: does not exist");return Ro(i,e)}BigInt(9),BigInt(16);const Do=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Po(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ko(t,e,r=!1,n={}){if(t<=Ao)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=Po(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%Co===To){const e=(t+Io)/Co;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%Lo===xo){const e=(t-xo)/Lo;return function(t,r){const n=t.mul(r,ko),i=t.pow(n,e),o=t.mul(r,i),s=t.mul(t.mul(o,ko),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Io)/ko;let r,n,i;for(r=t-Io,n=0;r%ko===Ao;r/=ko,n++);for(i=ko;i<t&&No(i,e,t)!==t-Io;i++);if(1===n){const e=(t+Io)/Co;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+Io)/ko;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=n,u=t.pow(t.mul(t.ONE,i),r),c=t.pow(s,o),h=t.pow(s,r);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<a&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(u,Io<<BigInt(a-e-1));u=t.sqr(r),c=t.mul(c,r),h=t.mul(h,u),a=e}return c}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:wo(i),ZERO:Ao,ONE:Io,create:e=>Ro(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Ao<=e&&e<t},is0:t=>t===Ao,isOdd:t=>(t&Io)===Io,neg:e=>Ro(-e,t),eql:(t,e)=>t===e,sqr:e=>Ro(e*e,t),add:(e,r)=>Ro(e+r,t),sub:(e,r)=>Ro(e-r,t),mul:(e,r)=>Ro(e*r,t),pow:(t,e)=>function(t,e,r){if(r<Ao)throw new Error("Expected power > 0");if(r===Ao)return t.ONE;if(r===Io)return e;let n=t.ONE,i=e;for(;r>Ao;)r&Io&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Io;return n}(a,t,e),div:(e,r)=>Ro(e*Uo(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Uo(e,t),sqrt:n.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n))),t.ONE),i=t.inv(n);return e.reduceRight(((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n))),i),r}(a,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?go(t,o):yo(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return r?po(t):lo(t)}});return Object.freeze(a)}function Mo(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Vo(t){const e=Mo(t);return e+Math.ceil(e/2)}const jo=BigInt(0),qo=BigInt(1);function zo(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,i=e;for(;r>jo;)r&qo&&(n=n.add(i)),i=i.double(),r>>=qo;return n},precomputeWindow(t,e){const{windows:r,windowSize:i}=n(e),o=[];let s=t,a=s;for(let t=0;t<r;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=n(e);let u=t.ZERO,c=t.BASE;const h=BigInt(2**e-1),f=2**e,l=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let n=Number(o&h);o>>=l,n>a&&(n-=f,o+=qo);const s=e,p=e+Math.abs(n)-1,d=t%2!=0,y=n<0;0===n?c=c.add(r(d,i[s])):u=u.add(r(y,i[p]))}return{p:u,f:c}},wNAFCached(t,e,r,n){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,n(o))),this.wNAF(i,o,r)}}}function Fo(t){return _o(t.Fp,Do.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),_o(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Po(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ho=BigInt(0),$o=BigInt(1),Go=BigInt(2),Wo=BigInt(8),Yo={zip215:!0};function Zo(t){const e=function(t){const e=Fo(t);return _o(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=e,c=Go<<BigInt(8*a)-$o,h=r.create,f=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(t*r.inv(e))}}catch(t){return{isValid:!1,value:Ho}}}),l=e.adjustScalarBytes||(t=>t),p=e.domain||((t,e,r)=>{if(e.length||r)throw new Error("Contexts/pre-hash are not supported");return t}),d=t=>"bigint"==typeof t&&Ho<t,y=(t,e)=>d(t)&&d(e)&&t<e,g=t=>t===Ho||y(t,c);function b(t,e){if(y(t,e))return t;throw new Error(`Expected valid scalar < ${e}, got ${typeof t} ${t}`)}function m(t){return t===Ho?t:b(t,n)}const w=new Map;function v(t){if(!(t instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(t,e,r,n){if(this.ex=t,this.ey=e,this.ez=r,this.et=n,!g(t))throw new Error("x required");if(!g(e))throw new Error("y required");if(!g(r))throw new Error("z required");if(!g(n))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof E)throw new Error("extended point not allowed");const{x:e,y:r}=t||{};if(!g(e)||!g(r))throw new Error("invalid affine point");return new E(e,r,$o,h(e*r))}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.ez)));return t.map(((t,r)=>t.toAffine(e[r]))).map(E.fromAffine)}_setWindowSize(t){this._WINDOW_SIZE=t,w.delete(this)}assertValidity(){const{a:t,d:r}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:n,ey:i,ez:o,et:s}=this,a=h(n*n),u=h(i*i),c=h(o*o),f=h(c*c),l=h(a*t);if(h(c*h(l+u))!==h(f+h(r*h(a*u))))throw new Error("bad point: equation left != right (1)");if(h(n*i)!==h(o*s))throw new Error("bad point: equation left != right (2)")}equals(t){v(t);const{ex:e,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=t,a=h(e*s),u=h(i*n),c=h(r*s),f=h(o*n);return a===u&&c===f}is0(){return this.equals(E.ZERO)}negate(){return new E(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:t}=e,{ex:r,ey:n,ez:i}=this,o=h(r*r),s=h(n*n),a=h(Go*h(i*i)),u=h(t*o),c=r+n,f=h(h(c*c)-o-s),l=u+s,p=l-a,d=u-s,y=h(f*p),g=h(l*d),b=h(f*d),m=h(p*l);return new E(y,g,m,b)}add(t){v(t);const{a:r,d:n}=e,{ex:i,ey:o,ez:s,et:a}=this,{ex:u,ey:c,ez:f,et:l}=t;if(r===BigInt(-1)){const t=h((o-i)*(c+u)),e=h((o+i)*(c-u)),r=h(e-t);if(r===Ho)return this.double();const n=h(s*Go*l),p=h(a*Go*f),d=p+n,y=e+t,g=p-n,b=h(d*r),m=h(y*g),w=h(d*g),v=h(r*y);return new E(b,m,v,w)}const p=h(i*u),d=h(o*c),y=h(a*n*l),g=h(s*f),b=h((i+o)*(u+c)-p-d),m=g-y,w=g+y,B=h(d-r*p),S=h(b*m),_=h(w*B),A=h(b*B),I=h(m*w);return new E(S,_,I,A)}subtract(t){return this.add(t.negate())}wNAF(t){return _.wNAFCached(this,w,t,E.normalizeZ)}multiply(t){const{p:e,f:r}=this.wNAF(b(t,n));return E.normalizeZ([e,r])[0]}multiplyUnsafe(t){let e=m(t);return e===Ho?S:this.equals(S)||e===$o?this:this.equals(B)?this.wNAF(e).p:_.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(t){const{ex:e,ey:n,ez:i}=this,o=this.is0();null==t&&(t=o?Wo:r.inv(i));const s=h(e*t),a=h(n*t),u=h(i*t);if(o)return{x:Ho,y:$o};if(u!==$o)throw new Error("invZ was invalid");return{x:s,y:a}}clearCofactor(){const{h:t}=e;return t===$o?this:this.multiplyUnsafe(t)}static fromHex(t,n=!1){const{d:i,a:o}=e,s=r.BYTES,a=(t=bo("pointHex",t,s)).slice(),u=t[s-1];a[s-1]=-129&u;const l=po(a);l===Ho||b(l,n?c:r.ORDER);const p=h(l*l),d=h(p-$o),y=h(i*p-o);let{isValid:g,value:m}=f(d,y);if(!g)throw new Error("Point.fromHex: invalid y coordinate");const w=(m&$o)===$o,v=0!=(128&u);if(!n&&m===Ho&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==w&&(m=h(-m)),E.fromAffine({x:m,y:l})}static fromPrivateKey(t){return k(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),n=go(e,r.BYTES);return n[n.length-1]|=t&$o?128:0,n}toHex(){return co(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,$o,h(e.Gx*e.Gy)),E.ZERO=new E(Ho,$o,$o,Ho);const{BASE:B,ZERO:S}=E,_=zo(E,8*a);function A(t){return Ro(t,n)}function I(t){return A(po(t))}function k(t){const e=a;t=bo("private key",t,e);const r=bo("hashed private key",o(t),2*e),n=l(r.slice(0,e)),i=r.slice(e,2*e),s=I(n),u=B.multiply(s),c=u.toRawBytes();return{head:n,prefix:i,scalar:s,point:u,pointBytes:c}}function T(t=new Uint8Array,...e){const r=mo(...e);return I(o(p(r,bo("context",t),!!i)))}const C=Yo;return B._setWindowSize(8),{CURVE:e,getPublicKey:function(t){return k(t).pointBytes},sign:function(t,e,n={}){t=bo("message",t),i&&(t=i(t));const{prefix:o,scalar:s,pointBytes:u}=k(e),c=T(n.context,o,t),h=B.multiply(c).toRawBytes(),f=A(c+T(n.context,h,u,t)*s);return m(f),bo("result",mo(h,go(f,r.BYTES)),2*a)},verify:function(t,e,n,o=C){const{context:s,zip215:a}=o,u=r.BYTES;t=bo("signature",t,2*u),e=bo("message",e),i&&(e=i(e));const c=po(t.slice(u,2*u));let h,f,l;try{h=E.fromHex(n,a),f=E.fromHex(t.slice(0,u),a),l=B.multiplyUnsafe(c)}catch(t){return!1}if(!a&&h.isSmallOrder())return!1;const p=T(s,f.toRawBytes(),h.toRawBytes(),e);return f.add(h.multiplyUnsafe(p)).subtract(l).clearCofactor().equals(E.ZERO)},ExtendedPoint:E,utils:{getExtendedPublicKey:k,randomPrivateKey:()=>s(r.BYTES),precompute:(t=8,e=E.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}}const Qo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Jo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Xo=(BigInt(0),BigInt(1)),ts=BigInt(2),es=BigInt(5),rs=BigInt(10),ns=BigInt(20),is=BigInt(40),os=BigInt(80);const ss=Ko(Qo,void 0,!0),as={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ss,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:io,randomBytes:$i,adjustScalarBytes:function(t){return t[0]&=248,t[31]&=127,t[31]|=64,t},uvRatio:function(t,e){const r=Qo,n=Ro(e*e*e,r),i=Ro(n*n*e,r);let o=Ro(t*n*function(t){const e=Qo,r=t*t%e*t%e,n=Oo(r,ts,e)*r%e,i=Oo(n,Xo,e)*t%e,o=Oo(i,es,e)*i%e,s=Oo(o,rs,e)*o%e,a=Oo(s,ns,e)*s%e,u=Oo(a,is,e)*a%e,c=Oo(u,os,e)*u%e,h=Oo(c,os,e)*u%e,f=Oo(h,rs,e)*o%e;return{pow_p_5_8:Oo(f,ts,e)*t%e,b2:r}}(t*i).pow_p_5_8,r);const s=Ro(e*o*o,r),a=o,u=Ro(o*Jo,r),c=s===t,h=s===Ro(-t,r),f=s===Ro(-t*Jo,r);return c&&(o=a),(h||f)&&(o=u),(Ro(o,r)&Io)===Io&&(o=Ro(-o,r)),{isValid:c||h,value:o}}},us=Zo(as);const cs=(ss.ORDER+BigInt(3))/BigInt(8);ss.pow(ts,cs),ss.sqrt(ss.neg(ss.ONE)),ss.ORDER,BigInt(5),BigInt(8),BigInt(486662),function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);t.isOdd(r)&&t.neg(r)}(ss,ss.neg(BigInt(486664))),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const hs=32,fs=64,ls=32;function ps(t,e){const r=new Uint8Array(fs);for(let n=0;n<ls;n++)r[n]=t[n],r[ls+n]=e[n];return r}function ds(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const r=_i(e);let n=0;for(const e of t)r.set(e,n),n+=e.length;return Wn(r)}const ys={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};async function gs(t,e){const r=function(t){const e=t?.algorithm??"AES-GCM";let r=t?.keyLength??16;const n=t?.nonceLength??12,i=t?.digest??"SHA-256",o=t?.saltLength??16,s=t?.iterations??32767,a=Li.get();return r*=8,{encrypt:async function(t,u){const c=a.getRandomValues(new Uint8Array(o)),h=a.getRandomValues(new Uint8Array(n)),f={name:e,iv:h};let l;if("string"==typeof u&&(u=Ci(u)),0===u.length){l=await a.subtle.importKey("jwk",ys,{name:"AES-GCM"},!0,["encrypt"]);try{const t={name:"PBKDF2",salt:c,iterations:s,hash:{name:i}},n=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);l=await a.subtle.deriveKey(t,n,{name:e,length:r},!0,["encrypt"])}catch{l=await a.subtle.importKey("jwk",ys,{name:"AES-GCM"},!0,["encrypt"])}}else{const t={name:"PBKDF2",salt:c,iterations:s,hash:{name:i}},n=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);l=await a.subtle.deriveKey(t,n,{name:e,length:r},!0,["encrypt"])}const p=await a.subtle.encrypt(f,l,t);return ds([c,f.iv,new Uint8Array(p)])},decrypt:async function(t,u){const c=t.subarray(0,o),h=t.subarray(o,o+n),f=t.subarray(o+n),l={name:e,iv:h};let p;if("string"==typeof u&&(u=Ci(u)),0===u.length)try{const t={name:"PBKDF2",salt:c,iterations:s,hash:{name:i}},n=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);p=await a.subtle.deriveKey(t,n,{name:e,length:r},!0,["decrypt"])}catch{p=await a.subtle.importKey("jwk",ys,{name:"AES-GCM"},!0,["decrypt"])}else{const t={name:"PBKDF2",salt:c,iterations:s,hash:{name:i}},n=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);p=await a.subtle.deriveKey(t,n,{name:e,length:r},!0,["decrypt"])}const d=await a.subtle.decrypt(l,p,f);return new Uint8Array(d)}}}(),n=await r.encrypt(t,e);return oi.encode(n)}var bs=__webpack_require__(1408),ms=__webpack_require__(7248),ws=__webpack_require__(9693),vs=__webpack_require__(1173),Es=__webpack_require__(3155);ws._configure(),bs._configure(ms),vs._configure(Es);const Bs=["uint64","int64","sint64","fixed64","sfixed64"];function Ss(t,e){const r=function(t){return function(t){for(const e of Bs){if(null==t[e])continue;const r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}(new bs(t))}(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function _s(t,e){const r=function(t){for(const e of Bs){if(null==t[e])continue;const r=t[e];t[e]=function(t){return r.call(this,t.toString())}}return t}(vs.create());return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var As,Is,ks,Ts,Cs;function xs(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function Ls(t,e){return xs("message",As.LENGTH_DELIMITED,t,e)}!function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"}(As||(As={})),function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"}(Is||(Is={})),function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"}(ks||(ks={})),function(t){t.codec=()=>function(t){function e(e){if(null==t[e.toString()])throw new Error("Invalid enum value");return t[e]}return xs("enum",As.VARINT,(function(t,r){const n=e(t);r.int32(n)}),(function(t){return e(t.int32())}))}(ks)}(Is||(Is={})),function(t){let e;t.codec=()=>(null==e&&(e=Ls(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),Is.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.Type=Is.codec().decode(t);break;case 2:r.Data=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>_s(e,t.codec()),t.decode=e=>Ss(e,t.codec())}(Ts||(Ts={})),function(t){let e;t.codec=()=>(null==e&&(e=Ls(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),Is.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.Type=Is.codec().decode(t);break;case 2:r.Data=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>_s(e,t.codec()),t.decode=e=>Ss(e,t.codec())}(Cs||(Cs={}));class Rs{_key;constructor(t){this._key=Ks(t,hs)}async verify(t,e){return async function(t,e,r){return us.verify(e,r,t)}(this._key,e,t)}marshal(){return this._key}get bytes(){return Ts.encode({Type:Is.Ed25519,Data:this.marshal()}).subarray()}equals(t){return Ni(this.bytes,t.bytes)}async hash(){const{bytes:t}=await on.digest(this.bytes);return t}}class Ns{_key;_publicKey;constructor(t,e){this._key=Ks(t,fs),this._publicKey=Ks(e,hs)}async sign(t){return async function(t,e){const r=t.subarray(0,ls);return us.sign(e,r)}(this._key,t)}get public(){return new Rs(this._publicKey)}marshal(){return this._key}get bytes(){return Cs.encode({Type:Is.Ed25519,Data:this.marshal()}).subarray()}equals(t){return Ni(this.bytes,t.bytes)}async hash(){const{bytes:t}=await on.digest(this.bytes);return t}async id(){const t=Bi.digest(this.public.bytes);return Mt.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return gs(this.bytes,t);throw new Ri(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function Os(t){if(t.length>fs){const e=(t=Ks(t,fs+hs)).subarray(0,fs),r=t.subarray(fs,t.length);return new Ns(e,r)}const e=(t=Ks(t,fs)).subarray(0,fs),r=t.subarray(hs);return new Ns(e,r)}function Us(t){return t=Ks(t,hs),new Rs(t)}async function Ds(){const{privateKey:t,publicKey:e}=await async function(){const t=us.utils.randomPrivateKey(),e=us.getPublicKey(t);return{privateKey:ps(t,e),publicKey:e}}();return new Ns(t,e)}async function Ps(t){const{privateKey:e,publicKey:r}=await async function(t){if(t.length!==ls)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=us.getPublicKey(e);return{privateKey:ps(e,r),publicKey:r}}(t);return new Ns(e,r)}function Ks(t,e){if((t=Uint8Array.from(t??[])).length!==e)throw new Ri(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}function Ms(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=ds([new Uint8Array(e-r.length),r])}return xi(r,"base64url")}function Vs(t){const e=function(t,e){let r=Ci(t,"base64urlpad");if(null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=ds([new Uint8Array(e-r.length),r])}return r}(t);return new Gn.jsbn.BigInteger(xi(e,"base16"),16)}__webpack_require__(7116),__webpack_require__(5764);function js(t,e){return e.map((e=>Vs(t[e])))}async function qs(t){const e=[await Li.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Fs(t)],r=await zs({privateKey:e[0],publicKey:e[1]});return{privateKey:r[0],publicKey:r[1]}}async function zs(t){if(null==t.privateKey||null==t.publicKey)throw new Ri("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Li.get().subtle.exportKey("jwk",t.privateKey),Li.get().subtle.exportKey("jwk",t.publicKey)])}async function Fs(t){return Li.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Hs(t,e,r,n){const i=e?function(t){return Gn.pki.setRsaPublicKey(...js(t,["n","e"]))}(t):function(t){return Gn.pki.setRsaPrivateKey(...js(t,["n","e","d","p","q","dp","dq","qi"]))}(t);return Ci(n(xi(Uint8Array.from(r),"ascii"),i),"ascii")}function $s(t){if("RSA"!==t.kty)throw new Ri("invalid key type","ERR_INVALID_KEY_TYPE");if(null==t.n)throw new Ri("invalid key modulus","ERR_INVALID_KEY_MODULUS");return 8*Ci(t.n,"base64url").length}Object.keys({"P-256":256,"P-384":384,"P-521":521}).join(" / "),__webpack_require__(3219),__webpack_require__(8095);const Gs=8192;class Ws{_key;constructor(t){this._key=t}async verify(t,e){return async function(t,e,r){const n=await Li.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Li.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}(this._key,e,t)}marshal(){return function(t){if(null==t.n||null==t.e)throw new Ri("JWK was missing components","ERR_INVALID_PARAMETERS");const e=Gn.pki.publicKeyToAsn1({n:Vs(t.n),e:Vs(t.e)});return Ci(Gn.asn1.toDer(e).getBytes(),"ascii")}(this._key)}get bytes(){return Ts.encode({Type:Is.RSA,Data:this.marshal()}).subarray()}encrypt(t){return Hs(this._key,!0,t,((t,e)=>e.encrypt(t)))}equals(t){return Ni(this.bytes,t.bytes)}async hash(){const{bytes:t}=await on.digest(this.bytes);return t}}class Ys{_key;_publicKey;constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return function(t){if(isNaN(16))throw new Ri("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return $i(16)}()}async sign(t){return async function(t,e){const r=await Li.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Li.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}(this._key,t)}get public(){if(null==this._publicKey)throw new Ri("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Ws(this._publicKey)}decrypt(t){return Hs(this._key,!1,t,((t,e)=>e.decrypt(t)))}marshal(){return function(t){if(null==t.n||null==t.e||null==t.d||null==t.p||null==t.q||null==t.dp||null==t.dq||null==t.qi)throw new Ri("JWK was missing components","ERR_INVALID_PARAMETERS");const e=Gn.pki.privateKeyToAsn1({n:Vs(t.n),e:Vs(t.e),d:Vs(t.d),p:Vs(t.p),q:Vs(t.q),dP:Vs(t.dp),dQ:Vs(t.dq),qInv:Vs(t.qi)});return Ci(Gn.asn1.toDer(e).getBytes(),"ascii")}(this._key)}get bytes(){return Cs.encode({Type:Is.RSA,Data:this.marshal()}).subarray()}equals(t){return Ni(this.bytes,t.bytes)}async hash(){const{bytes:t}=await on.digest(this.bytes);return t}async id(){return xi(await this.public.hash(),"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e){const e=new Gn.util.ByteBuffer(this.marshal()),r=Gn.asn1.fromDer(e),n=Gn.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return Gn.pki.encryptRsaPrivateKey(n,t,i)}if("libp2p-key"===e)return gs(this.bytes,t);throw new Ri(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function Zs(t){const e=function(t){const e=Gn.asn1.fromDer(xi(t,"ascii")),r=Gn.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Ms(r.n),e:Ms(r.e),d:Ms(r.d),p:Ms(r.p),q:Ms(r.q),dp:Ms(r.dP),dq:Ms(r.dQ),qi:Ms(r.qInv),alg:"RS256"}}(t);if($s(e)>Gs)throw new Ri("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await qs(e);return new Ys(r.privateKey,r.publicKey)}function Qs(t){const e=function(t){const e=Gn.asn1.fromDer(xi(t,"ascii")),r=Gn.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Ms(r.n),e:Ms(r.e)}}(t);if($s(e)>Gs)throw new Ri("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new Ws(e)}async function Js(t){if($s(t)>Gs)throw new Ri("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await qs(t);return new Ys(e.privateKey,e.publicKey)}async function Xs(t){if(t>Gs)throw new Ri("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await async function(t){const e=await Li.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await zs(e);return{privateKey:r[0],publicKey:r[1]}}(t);return new Ys(e.privateKey,e.publicKey)}const ta=(t,e,r)=>t&e^t&r^e&r,ea=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ra=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),na=new Uint32Array(64);class ia extends Gi{constructor(){super(64,32,8,!1),this.A=0|ra[0],this.B=0|ra[1],this.C=0|ra[2],this.D=0|ra[3],this.E=0|ra[4],this.F=0|ra[5],this.G=0|ra[6],this.H=0|ra[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)na[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=na[t-15],r=na[t-2],n=Vi(e,7)^Vi(e,18)^e>>>3,i=Vi(r,17)^Vi(r,19)^r>>>10;na[t]=i+na[t-7]+n+na[t-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:c}=this;for(let t=0;t<64;t++){const e=c+(Vi(s,6)^Vi(s,11)^Vi(s,25))+((h=s)&a^~h&u)+ea[t]+na[t]|0,f=(Vi(r,2)^Vi(r,13)^Vi(r,22))+ta(r,n,i)|0;c=u,u=a,a=s,s=o+e|0,o=i,i=n,n=r,r=e+f|0}var h;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,u,c)}roundClean(){na.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const oa=Hi((()=>new ia));class sa extends Fi{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Oi(t.outputLen),Oi(t.blockLen)}(t);const r=qi(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return Di(this),this.iHash.update(t),this}digestInto(t){Di(this),Ui(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const aa=(t,e,r)=>new sa(t,e).update(r).digest();aa.create=(t,e)=>new sa(t,e);const{bytesToNumberBE:ua,hexToBytes:ca}=y,ha={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=ha;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ua(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=ha,r="string"==typeof t?ca(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=ha._parseInt(r.subarray(2)),{d:s,l:a}=ha._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}},fa=BigInt(0),la=BigInt(1),pa=(BigInt(2),BigInt(3));function da(t){const e=function(t){const e=Fo(t);return _o(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(t){return Ro(t,n)}function a(t){return Uo(t,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:f}=function(t){const e=function(t){const e=Fo(t);_o(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const i=e.toAffine();return mo(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function o(t){const{a:n,b:i}=e,o=r.sqr(t),s=r.mul(o,t);return r.add(r.add(s,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&fa<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=co(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let s;try{s="bigint"==typeof t?t:lo(bo("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=Ro(s,o)),a(s),s}const c=new Map;function h(t){if(!(t instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof f)throw new Error("projective point not allowed");const i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?f.ZERO:new f(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(f.fromAffine)}static fromHex(t){const e=f.fromAffine(i(bo("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return f.BASE.multiply(u(t))}_setWindowSize(t){this._WINDOW_SIZE=t,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=o(t);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){h(t);const{px:e,py:n,pz:i}=this,{px:o,py:s,pz:a}=t,u=r.eql(r.mul(e,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return u&&c}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,i=r.mul(n,pa),{px:o,py:s,pz:a}=this;let u=r.ZERO,c=r.ZERO,h=r.ZERO,l=r.mul(o,o),p=r.mul(s,s),d=r.mul(a,a),y=r.mul(o,s);return y=r.add(y,y),h=r.mul(o,a),h=r.add(h,h),u=r.mul(t,h),c=r.mul(i,d),c=r.add(u,c),u=r.sub(p,c),c=r.add(p,c),c=r.mul(u,c),u=r.mul(y,u),h=r.mul(i,h),d=r.mul(t,d),y=r.sub(l,d),y=r.mul(t,y),y=r.add(y,h),h=r.add(l,l),l=r.add(h,l),l=r.add(l,d),l=r.mul(l,y),c=r.add(c,l),d=r.mul(s,a),d=r.add(d,d),l=r.mul(d,y),u=r.sub(u,l),h=r.mul(d,p),h=r.add(h,h),h=r.add(h,h),new f(u,c,h)}add(t){h(t);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=t;let c=r.ZERO,l=r.ZERO,p=r.ZERO;const d=e.a,y=r.mul(e.b,pa);let g=r.mul(n,s),b=r.mul(i,a),m=r.mul(o,u),w=r.add(n,i),v=r.add(s,a);w=r.mul(w,v),v=r.add(g,b),w=r.sub(w,v),v=r.add(n,o);let E=r.add(s,u);return v=r.mul(v,E),E=r.add(g,m),v=r.sub(v,E),E=r.add(i,o),c=r.add(a,u),E=r.mul(E,c),c=r.add(b,m),E=r.sub(E,c),p=r.mul(d,v),c=r.mul(y,m),p=r.add(c,p),c=r.sub(b,p),p=r.add(b,p),l=r.mul(c,p),b=r.add(g,g),b=r.add(b,g),m=r.mul(d,m),v=r.mul(y,v),b=r.add(b,m),m=r.sub(g,m),m=r.mul(d,m),v=r.add(v,m),g=r.mul(b,v),l=r.add(l,g),g=r.mul(E,v),c=r.mul(w,c),c=r.sub(c,g),g=r.mul(w,b),p=r.mul(E,p),p=r.add(p,g),new f(c,l,p)}subtract(t){return this.add(t.negate())}is0(){return this.equals(f.ZERO)}wNAF(t){return p.wNAFCached(this,c,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(f.fromAffine)}))}multiplyUnsafe(t){const n=f.ZERO;if(t===fa)return n;if(a(t),t===la)return this;const{endo:i}=e;if(!i)return p.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:u,k2:c}=i.splitScalar(t),h=n,l=n,d=this;for(;s>fa||c>fa;)s&la&&(h=h.add(d)),c&la&&(l=l.add(d)),d=d.double(),s>>=la,c>>=la;return o&&(h=h.negate()),u&&(l=l.negate()),l=new f(r.mul(l.px,i.beta),l.py,l.pz),h.add(l)}multiply(t){a(t);let n,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:u}=s.splitScalar(o);let{p:c,f:h}=this.wNAF(e),{p:l,f:d}=this.wNAF(u);c=p.constTimeNegate(t,c),l=p.constTimeNegate(a,l),l=new f(r.mul(l.px,s.beta),l.py,l.pz),n=c.add(l),i=h.add(d)}else{const{p:t,f:e}=this.wNAF(o);n=t,i=e}return f.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(t,e,r){const n=f.BASE,i=(t,e)=>e!==fa&&e!==la&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,r));return o.is0()?void 0:o}toAffine(t){const{px:e,py:n,pz:i}=this,o=this.is0();null==t&&(t=o?r.ONE:r.inv(i));const s=r.mul(e,t),a=r.mul(n,t),u=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===la)return!0;if(r)return r(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===la?this:r?r(f,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(f,this,t)}toHex(t=!0){return co(this.toRawBytes(t))}}f.BASE=new f(e.Gx,e.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);const l=e.nBitLength,p=zo(f,e.endo?Math.ceil(l/2):l);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,n){const i=e.toAffine(),o=r.toBytes(i.x),s=mo;return n?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(t){const e=t.length,n=t[0],s=t.subarray(1);if(e!==i||2!==n&&3!==n){if(e===o&&4===n)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=lo(s);if(!(fa<(a=t)&&a<r.ORDER))throw new Error("Point is not on curve");const e=h(t);let i=r.sqrt(e);return 1==(1&n)!=((i&la)===la)&&(i=r.neg(i)),{x:t,y:i}}var a}}),l=t=>co(yo(t,e.nByteLength));function p(t){return t>n>>la}const d=(t,e,r)=>lo(t.slice(e,r));class y{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=bo("compactSignature",t,2*r),new y(d(t,0,r),d(t,r,2*r))}static fromDER(t){const{r:e,s:r}=ha.toSig(bo("DER",t));return new y(e,r)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new y(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s:i,recovery:o}=this,c=w(bo("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const h=2===o||3===o?n+e.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=0==(1&o)?"02":"03",p=u.fromHex(f+l(h)),d=a(h),y=s(-c*d),g=s(i*d),b=u.BASE.multiplyAndAddUnsafe(p,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return fo(this.toDERHex())}toDERHex(){return ha.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fo(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const g={isValidPrivateKey(t){try{return c(t),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const t=Vo(e.n);return function(t,e,r=!1){const n=t.length,i=Mo(e),o=Vo(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=Ro(r?lo(t):po(t),e-Io)+Io;return r?go(s,i):yo(s,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=u.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function b(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===i||n===o:r?n===2*i||n===2*o:t instanceof u}const m=e.bits2int||function(t){const r=lo(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},w=e.bits2int_modN||function(t){return s(m(t))},v=wo(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(fa<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return yo(t,e.nByteLength)}const B={lowS:e.lowS,prehash:!1},S={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(b(t))throw new Error("first arg must be private key");if(!b(e))throw new Error("second arg must be public key");return u.fromHex(e).multiply(c(t)).toRawBytes(r)},sign:function(t,n,i=B){const{seed:o,k2sig:h}=function(t,n,i=B){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:h}=e;let{lowS:l,prehash:d,extraEntropy:g}=i;null==l&&(l=!0),t=bo("msgHash",t),d&&(t=bo("prehashed msgHash",o(t)));const b=w(t),v=c(n),S=[E(v),E(b)];if(null!=g){const t=!0===g?h(r.BYTES):g;S.push(bo("extraEntropy",t))}const _=mo(...S),A=b;return{seed:_,k2sig:function(t){const e=m(t);if(!f(e))return;const r=a(e),n=u.BASE.multiply(e).toAffine(),i=s(n.x);if(i===fa)return;const o=s(r*s(A+i*v));if(o===fa)return;let c=(n.x===i?0:2)|Number(n.y&la),h=o;return l&&p(o)&&(h=function(t){return p(t)?s(-t):t}(o),c^=1),new y(i,h,c)}}}(t,n,i),l=e;return Bo(l.hash.outputLen,l.nByteLength,l.hmac)(o,h)},verify:function(t,r,n,i=S){const o=t;if(r=bo("msgHash",r),n=bo("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:h}=i;let f,l;try{if("string"==typeof o||o instanceof Uint8Array)try{f=y.fromDER(o)}catch(t){if(!(t instanceof ha.Err))throw t;f=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;f=new y(t,e)}}l=u.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&f.hasHighS())return!1;h&&(r=e.hash(r));const{r:p,s:d}=f,g=w(r),b=a(d),m=s(g*b),v=s(p*b),E=u.BASE.multiplyAndAddUnsafe(l,m,v)?.toAffine();return!!E&&s(E.x)===p},ProjectivePoint:u,Signature:y,utils:g}}function ya(t){return{hash:t,hmac:(e,...r)=>aa(t,e,zi(...r)),randomBytes:$i}}BigInt(4);const ga=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ba=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ma=BigInt(1),wa=BigInt(2),va=(t,e)=>(t+e/wa)/e;const Ea=Ko(ga,void 0,void 0,{sqrt:function(t){const e=ga,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,h=c*c*t%e,f=Oo(h,r,e)*h%e,l=Oo(f,r,e)*h%e,p=Oo(l,wa,e)*c%e,d=Oo(p,i,e)*p%e,y=Oo(d,o,e)*d%e,g=Oo(y,a,e)*y%e,b=Oo(g,u,e)*g%e,m=Oo(b,a,e)*y%e,w=Oo(m,r,e)*h%e,v=Oo(w,s,e)*d%e,E=Oo(v,n,e)*c%e,B=Oo(E,wa,e);if(!Ea.eql(Ea.sqr(B),t))throw new Error("Cannot find square root");return B}}),Ba=function(t,e){const r=e=>da({...t,...ya(e)});return Object.freeze({...r(e),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Ea,n:ba,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ba,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ma*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=va(o*t,e),u=va(-n*t,e);let c=Ro(t-a*r-u*i,e),h=Ro(-a*n-u*o,e);const f=c>s,l=h>s;if(f&&(c=e-c),l&&(h=e-h),c>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:l,k2:h}}}},oa);function Sa(t){try{Ba.ProjectivePoint.fromHex(t)}catch(t){throw new Ri(String(t),"ERR_INVALID_PUBLIC_KEY")}}BigInt(0),Ba.ProjectivePoint;class _a{_key;constructor(t){Sa(t),this._key=t}async verify(t,e){return async function(t,e,r){try{const{digest:n}=await on.digest(r);return Ba.verify(e,n,t)}catch(t){throw new Ri(String(t),"ERR_INVALID_INPUT")}}(this._key,e,t)}marshal(){return t=this._key,Ba.ProjectivePoint.fromHex(t).toRawBytes(!0);var t}get bytes(){return Ts.encode({Type:Is.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return Ni(this.bytes,t.bytes)}async hash(){const{bytes:t}=await on.digest(this.bytes);return t}}class Aa{_key;_publicKey;constructor(t,e){this._key=t,this._publicKey=e??function(t){try{return Ba.getPublicKey(t,!0)}catch(t){throw new Ri(String(t),"ERR_INVALID_PRIVATE_KEY")}}(t),function(t){try{Ba.getPublicKey(t,!0)}catch(t){throw new Ri(String(t),"ERR_INVALID_PRIVATE_KEY")}}(this._key),Sa(this._publicKey)}async sign(t){return async function(t,e){const{digest:r}=await on.digest(e);try{return Ba.sign(r,t).toDERRawBytes()}catch(t){throw new Ri(String(t),"ERR_INVALID_INPUT")}}(this._key,t)}get public(){return new _a(this._publicKey)}marshal(){return this._key}get bytes(){return Cs.encode({Type:Is.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return Ni(this.bytes,t.bytes)}async hash(){const{bytes:t}=await on.digest(this.bytes);return t}async id(){return xi(await this.public.hash(),"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return gs(this.bytes,t);throw new Ri(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function Ia(t){return new Aa(t)}function ka(t){return new _a(t)}async function Ta(){const t=Ba.utils.randomPrivateKey();return new Aa(t)}const Ca={rsa:b,ed25519:g,secp256k1:m};function xa(t){const e=Object.keys(Ca).join(" / ");return new Ri(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}__webpack_require__(8960);const La=Ca.secp256k1.unmarshalSecp256k1PrivateKey,Ra=Ca.secp256k1.unmarshalSecp256k1PublicKey,Na=async(t,e)=>{if(!t)throw new Error("No signing key given");if(!e)throw new Error("Given input data was undefined");return e instanceof Uint8Array||(e="string"==typeof e?Ci(e):new Uint8Array(e)),xi(await t.sign(e),"base16")},Oa=xn({size:1e3}),Ua=async(t,e,r)=>{const n=await Oa,i=await n.get(t);let o=!1;if(i){const t=(t,e)=>e instanceof Uint8Array?0===function(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}(t,e):t.toString()===e.toString();o=i.publicKey===e&&t(i.data,r)}else{const i=await(async(t,e,r)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!r)throw new Error("Given input data was undefined");r instanceof Uint8Array||(r="string"==typeof r?Ci(r):new Uint8Array(r));let n=!1;try{const a=Ra(Ci(e,"base16"));n=await(i=a,o=r,s=Ci(t,"base16"),i.verify(o,s))}catch(t){}var i,o,s;return Promise.resolve(n)})(t,e,r);o=i,i&&await n.put(t,{publicKey:e,data:r})}return o},Da=async({storage:t,path:e}={})=>{t=t||await An(await xn({size:1e3}),await Tn({path:e||"./keystore"}));const r=async(e,r)=>{await t.put("private_"+e,r.privateKey)};return{clear:async()=>{await t.clear()},close:async()=>{await t.close()},hasKey:async e=>{if(!e)throw new Error("id needed to check a key");let r=!1;try{r=null!=await t.get("private_"+e)}catch(t){console.error("Error: ENOENT: no such file or directory")}return r},addKey:r,createKey:async t=>{if(!t)throw new Error("id needed to create a key");const e=await async function(t,e){return function(t){if("rsa"===(t=t.toLowerCase())||"ed25519"===t||"secp256k1"===t)return Ca[t];throw xa(t)}("secp256k1").generateKeyPair(2048)}(),n=await async function(t){const e=Cs.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Is.RSA:return Ca.rsa.unmarshalRsaPrivateKey(r);case Is.Ed25519:return Ca.ed25519.unmarshalEd25519PrivateKey(r);case Is.Secp256k1:return Ca.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw xa(e.Type??"RSA")}}(e.bytes),i={publicKey:n.public.marshal(),privateKey:n.marshal()};return await r(t,i),n},getKey:async e=>{if(!e)throw new Error("id needed to get a key");let r;try{r=await t.get("private_"+e)}catch(t){}if(r)return La(r)},getPublic:(t,e={})=>{const r=e.format||"hex";if(-1===["hex","buffer"].indexOf(r))throw new Error("Supported formats are `hex` and `buffer`");const n=t.public.marshal();return"buffer"===r?n:xi(n,"base16")}}},Pa=r,Ka=on,Ma=Mt,Va=async({id:t,publicKey:e,signatures:r,type:n,sign:i,verify:o}={})=>{if(!t)throw new Error("Identity id is required");if(!e)throw new Error("Invalid public key");if(!r)throw new Error("Signatures object is required");if(!r.id)throw new Error("Signature of id is required");if(!r.publicKey)throw new Error("Signature of publicKey+id is required");if(!n)throw new Error("Identity type is required");const s={id:t,publicKey:e,signatures:r=Object.assign({},r),type:n,sign:i,verify:o},{hash:a,bytes:u}=await ja(s);return s.hash=a,s.bytes=u,s},ja=async t=>{const{id:e,publicKey:r,signatures:n,type:i}=t,o={id:e,publicKey:r,signatures:n,type:i},{cid:s,bytes:a}=await Ie({value:o,codec:Pa,hasher:Ka});return{hash:s.toString(Ma),bytes:Uint8Array.from(a)}},qa=t=>Boolean(t.id&&t.hash&&t.bytes&&t.publicKey&&t.signatures&&t.signatures.id&&t.signatures.publicKey&&t.type),za="publickey",Fa=({keystore:t})=>async()=>{if(!t)throw new Error("PublicKeyIdentityProvider requires a keystore parameter");return{type:za,getId:async({id:e}={})=>{if(!e)throw new Error("id is required");return xi((await t.getKey(e)||await t.createKey(e)).public.marshal(),"base16")},signIdentity:async(e,{id:r}={})=>{if(!r)throw new Error("id is required");const n=await t.getKey(r);if(!n)throw new Error(`Signing key for '${r}' not found`);return Na(n,e)}}};Fa.verifyIdentity=async t=>{const{id:e,publicKey:r,signatures:n}=t;return Ua(n.publicKey,e,r+n.id)},Fa.type=za;const Ha=Fa,$a={},Ga=t=>{if(!(t=>Object.keys($a).includes(t))(t))throw new Error(`IdentityProvider type '${t}' is not supported`);return $a[t]},Wa=t=>{if(!t.type||"string"!=typeof t.type)throw new Error("Given IdentityProvider doesn't have a field 'type'.");if(!t.verifyIdentity)throw new Error("Given IdentityProvider doesn't have a function 'verifyIdentity'.");$a[t.type]=t};Wa(Ha);const Ya=bt("./orbitdb","identities"),Za=async({keystore:t,path:e,storage:r,ipfs:n}={})=>{t=t||await Da({path:e||Ya}),r||(r=n?await An(await xn({size:1e3}),await In({ipfs:n,pin:!0})):await pn());const i=await xn({size:1e3}),o=async(e,r)=>{const n=await t.getKey(e.id);if(!n)throw new Error("Private signing key not found from KeyStore");return await Na(n,r)},s=async(t,e,r)=>await Ua(t,e,r);return{createIdentity:async(e={})=>{e.keystore=t;const n=Ga("publickey"),i=e.provider||n({keystore:t}),a=await i();if(!Ga(a.type))throw new Error("Identity provider is unknown. Use useIdentityProvider(provider) to register the identity provider");const u=await a.getId(e),c=await t.getKey(u)||await t.createKey(u),h=t.getPublic(c),f=await Na(c,u),l={id:f,publicKey:await a.signIdentity(h+f,e)},p=await Va({id:u,publicKey:h,signatures:l,type:a.type,sign:o,verify:s});return await r.put(p.hash,p.bytes),p},verifyIdentity:async t=>{if(!qa(t))return!1;const{id:e,publicKey:r,signatures:n}=t;if(!await s(n.id,r,e))return!1;const o=await i.get(n.id);if(o)return u=o,(a=t).id===u.id&&a.hash===u.hash&&a.type===u.type&&a.publicKey===u.publicKey&&a.signatures.id===u.signatures.id&&a.signatures.publicKey===u.signatures.publicKey;var a,u;const c=Ga(t.type),h=await c.verifyIdentity(t);return h&&await i.put(n.id,t),h},getIdentity:async t=>{const e=await r.get(t);if(e)return(async t=>{const{value:e}=await ke({bytes:t,codec:Pa,hasher:Ka});return Va({...e})})(e)},sign:o,verify:s,keystore:t}},Qa=t=>{if(!(t=t.toString()).startsWith("/orbitdb")&&!t.startsWith("\\orbitdb"))return!1;let e;t=(t=(t=(t=t.replaceAll("/orbitdb/","")).replaceAll("\\orbitdb\\","")).replaceAll("/","")).replaceAll("\\","");try{e=he.parse(t,Mt)}catch(t){return!1}return void 0!==e},Ja=t=>{if(!t)throw new Error(`Not a valid OrbitDB address: ${t}`);if(!Qa(t))throw new Error(`Not a valid OrbitDB address: ${t}`);return Xa(t)},Xa=t=>{if(t&&"orbitdb"===t.protocol&&t.hash)return t;const e="orbitdb",r=t.replace("/orbitdb/","").replace("\\orbitdb\\","");return{protocol:e,hash:r,address:t,toString:()=>gt("/",e,r)}},tu=r,eu=on,ru=Mt,nu=async(t=32)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="",n=0;for(;n<t;)r+=e.charAt(Math.floor(Math.random()*e.length)),n+=1;return r},iu=r,ou=on,su=Mt,au="ipfs",uu=({write:t,storage:e}={})=>async({orbitdb:r,identities:n,address:i})=>{if(e=e||await An(await xn({size:1e3}),await In({ipfs:r.ipfs,pin:!0})),t=t||[r.identity.id],i){const r=await e.get(i.replaceAll("/ipfs/","")),{value:n}=await ke({bytes:r,codec:iu,hasher:ou});t=n.write}else i=await(async({storage:t,type:e,params:r})=>{const n={type:e,...r},{cid:i,bytes:o}=await Ie({value:n,codec:iu,hasher:ou}),s=i.toString(su);return await t.put(s,o),s})({storage:e,type:au,params:{write:t}}),i=bt("/",au,i);return{type:au,address:i,write:t,canAppend:async e=>{const r=await n.getIdentity(e.identity);if(!r)return!1;const{id:i}=r;return!(!t.includes(i)&&!t.includes("*"))&&n.verifyIdentity(r)}}};uu.type=au;const cu=uu,hu="orbitdb",fu=({write:t}={})=>async({orbitdb:e,identities:r,address:n,name:i})=>{n=n||i||await nu(64),t=t||[e.identity.id];const o=await e.open(n,{type:"keyvalue",AccessController:cu({write:t})});n=o.address;const s=async()=>{const t=[];for await(const e of o.iterator())t[e.key]=e.value;return Object.entries({...t,admin:new Set([...t.admin||[],...o.access.write])}).forEach((e=>{const r=e[0];t[r]=new Set([...t[r]||[],...e[1]])})),t},a=async t=>(await s())[t]||new Set([]),u=async(t,e)=>{const r=new Set(await a(t));return r.has(e)||r.has("*")};return{type:hu,address:n,write:t,canAppend:async t=>{const e=await r.getIdentity(t.identity);if(!e)return!1;const{id:n}=e;return!(!await u("write",n)&&!await u("admin",n))&&r.verifyIdentity(e)},capabilities:s,get:a,grant:async(t,e)=>{const r=new Set([...await o.get(t)||[],e]);await o.put(t,Array.from(r.values()))},revoke:async(t,e)=>{const r=new Set(await o.get(t)||[]);r.delete(e),r.size>0?await o.put(t,Array.from(r.values())):await o.del(t)},close:async()=>{await o.close()},drop:async()=>{await o.drop()},events:o.events}};fu.type=hu;const lu=fu,pu={},du=t=>{if(!t.type)throw new Error("AccessController does not contain required field 'type'.");pu[t.type]=t};du(cu),du(lu);const yu=cu,gu=async({ipfs:t,id:e,identity:r,identities:n,directory:i}={})=>{if(null==t)throw new Error("IPFS instance is a required argument.");e=e||await nu();const{id:o}=await t.id();let s;i=i||"./orbitdb",n?s=n.keystore:(s=await Da({path:bt(i,"./keystore")}),n=await Za({ipfs:t,keystore:s})),r?r.provider&&(r=await n.createIdentity({...r})):r=await n.createIdentity({id:e});const a=await(async({ipfs:t,storage:e}={})=>(e=e||await An(await xn({size:1e3}),await In({ipfs:t,pin:!0})),{get:async t=>{const r=await e.get(t),{value:n}=await ke({bytes:r,codec:tu,hasher:eu});return n},create:async({name:t,type:r,accessController:n,meta:i})=>{if(!t)throw new Error("name is required");if(!r)throw new Error("type is required");if(!n)throw new Error("accessController is required");const o=Object.assign({name:t,type:r,accessController:n},void 0!==i?{meta:i}:{}),{cid:s,bytes:a}=await Ie({value:o,codec:tu,hasher:eu}),u=s.toString(ru);return await e.put(u,a),{hash:u,manifest:o}},close:async()=>{await e.close()}}))({ipfs:t});let u={};const c=async(e,{type:o,meta:s,sync:f,Database:l,AccessController:p,headsStorage:d,entryStorage:y,indexStorage:g,referencesCount:b}={})=>{let m,w,v;if(u[e])return u[e];if(Qa(e)){const i=Xa(e);w=await a.get(i.hash),p=(t=>{if(!pu[t])throw new Error(`AccessController type '${t}' is not supported`);return pu[t]})(w.accessController.split("/",2).pop())(),v=await p({orbitdb:{open:c,identity:r,ipfs:t},identities:n,address:w.accessController}),m=w.name,o=o||w.type,s=w.meta}else{o=o||"events",p=p||yu(),v=await p({orbitdb:{open:c,identity:r,ipfs:t},identities:n,name:e});const i=await a.create({name:e,type:o,accessController:v.address,meta:s});if(w=i.manifest,e=Xa(i.hash),m=w.name,s=w.meta,u[e])return u[e]}if(l=l||(t=>{if(!t)throw new Error("Type not specified");if(!Hn[t])throw new Error(`Unsupported database type: '${t}'`);return Hn[t]})(o)(),!l)throw new Error(`Unsupported database type: '${o}'`);e=e.toString();const E=await l({ipfs:t,identity:r,address:e,name:m,access:v,directory:i,meta:s,syncAutomatically:f,headsStorage:d,entryStorage:y,indexStorage:g,referencesCount:b});return E.events.on("close",h(e)),u[e]=E,E},h=t=>()=>{delete u[t]};return{id:e,open:c,stop:async()=>{for(const t of Object.values(u))await t.close();s&&await s.close(),a&&await a.close(),u={}},ipfs:t,directory:i,keystore:s,identity:r,peerId:o}}})(),OrbitDB=__webpack_exports__})();